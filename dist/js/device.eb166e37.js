(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["device"],{"320e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"animated fadeIn device"},[n("b-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("i",{staticClass:"nav-icon cui-tablet"}),t._v("\n            "+t._s(t.$t("m.dashboard.devices"))+"\n            "),n("button",{staticClass:"btn btn-sm btn-primary link-bind",on:{click:function(e){return t.$router.push("/inventory/vehicle/bind")}}},[n("i",{staticClass:"fa fa-wrench"}),t._v("\n                "+t._s(t.$t("m.vehicle.b_install"))+"\n            ")])]),n("b-row",[n("b-col",{staticStyle:{"align-items":"center","justify-content":"center"},attrs:{sm:"12"}},[n("b-form-group",{staticClass:"search-group",attrs:{"label-for":"elementsAppendButton"}},[n("b-input-group",[n("b-form-input",{attrs:{type:"text",placeholder:t.$t("m.vehicle.search_mind")},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"primary"},on:{click:t.searchResult}},[n("i",{staticClass:"fa fa-search"}),t._v(t._s(t.$t("m.vehicle.b_search"))+"\n                            ")])],1)],1)],1)],1)],1),n("div",{staticClass:"content"},[n("b-table",{staticClass:"mb-0 table-outline table-responsive-sm",attrs:{small:"",striped:"",responsive:"sm",items:t.table,hover:"",fields:t.tableFields},scopedSlots:t._u([{key:"vin",fn:function(e){return["N/A"!=e.item.vin?n("span",{staticClass:"vin-class",on:{click:function(n){return t.$router.push("/inventory/vehicle/detail/"+e.item.id)}}},[t._v(t._s(e.item.vin))]):n("span",{staticClass:"vin-class"},[t._v(t._s(e.item.vin))])]}},{key:"actions",fn:function(e){return["N/A"!=e.item.vin?[n("div",{staticClass:"btn btn-sm btn-danger placeholder",on:{click:function(n){return t.unpairVehicle(e.item.vin,e.item.imei)}}},[n("i",{staticClass:"fa fa-close"}),t._v(" "+t._s(t.$t("m.common.b_unpair"))+"\n                        ")])]:[n("div",{staticClass:"btn btn-sm btn-primary placeholder",on:{click:function(n){return t.$router.push({name:"BindVehicle",query:{deviceMac:e.item.imei}})}}},[n("i",{staticClass:"fa fa-wrench"}),t._v(t._s(t.$t("m.device.b_install"))+"\n                        ")])],n("div",{staticClass:"btn btn-sm btn-danger btn-del",on:{click:function(n){return t.delIdM(e.item.deviceId)}}},[n("i",{staticClass:"cui cui-trash"}),t._v(t._s(t.$t("m.device.b_del"))+"\n                    ")])]}}])})],1)],1),n("b-row",[n("b-col",{attrs:{sm:"4",lg:"4"}},[n("div",{staticClass:"dataTables_info",attrs:{id:"DataTables0",role:"status","aria-live":"polite"}},[t._v("\n                "+t._s(t.$t("m.common.show"))+" "+t._s(10*(t.currentPage-1)+1)+" "+t._s(t.$t("m.common.to"))+" "+t._s(t.currentPage===t.totalPages?t.total:10*t.currentPage)+" "+t._s(t.$t("m.common.of"))+" "+t._s(t.total)+" "+t._s(t.$t("m.common.entries"))+"\n            ")])]),n("b-col",{attrs:{sm:"8",lg:"8"}},[n("b-pagination",{attrs:{align:"right","total-rows":t.total,"per-page":10},on:{input:function(e){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),n("model",{attrs:{show:t.show,title:t.title,content:t.content,buttonText:t.btnGroup},on:{closeRemindBox:t.closeBox}})],1)},a=[],s=n("3159"),o=n("ebd9"),c=n("c466"),r={name:"device",inject:["reload"],components:{model:o["a"]},data:function(){return{tableFields:{imei:{label:this.$t("m.common.imei2"),class:"text-center"},deviceType:{label:this.$t("m.cloud.device_type")},vin:{label:this.$t("m.common.vin2"),class:"text-center"},updateTime:{label:this.$t("m.cloud.last_update_time"),class:"text-center"},actions:{label:this.$t("m.vehicle.actions"),class:"Actions"}},table:null,currentPage:1,pageSize:10,total:0,totalPages:0,show:!1,unpairVin:"",title:"",content:"",btnGroup:{btnFirst:this.$t("m.tip.b_cancel"),btnSecond:this.$t("m.tip.b_ok")},delId:"",currentOpa:!1,searchText:""}},mounted:function(){this.initData(this.currentPage,this.pageSize)},methods:{initData:function(t){var e=this;s["a"].post("/api/v1/vehicle/listBindDevice?pageNo=".concat(t,"&pageSize=").concat(this.pageSize)).then(function(t){e.total=t.data.data.rowCount,e.filterData(t.data.data),e.totalPages=t.data.data.totalPages})},filterData:function(t){var e=this;this.table=t.datas.map(function(t){return{imei:t.deviceMac,vin:t.vin?t.vin:"N/A",id:t.vehicleId,deviceType:t.deviceType?1===t.deviceType?e.$t("m.cloud.device_name_nonda"):e.$t("m.cloud.device_name_chelian"):"N/A",deviceId:t.deviceId,updateTime:Object(c["d"])(t.updateTime)}})},changePage:function(t){this.initData(t,this.pageSize)},unpairVehicle:function(t,e){this.unpairVin={vin:t,deviceMac:e},this.currentOpa="unpair",this.show=!0,this.title=this.$t("m.tip.confirm"),this.content=this.$t("m.tip.unpair")},unbindVIn:function(){var t=this;s["a"].post("/api/v1/vehicle/unbind/device",{deviceMac:this.unpairVin.deviceMac,vin:this.unpairVin.vin}).then(function(e){200==e.data.code?t.reload():(t.show=!0,t.title=t.$t("m.tip.error"),t.content=t.$t("m.tip.unbind_err"),t.btnGroup.btnSecond="")})},delDevice:function(){var t=this;s["a"].post("/api/v1/device/delete",{deviceId:this.delId}).then(function(e){200==e.data.code?t.reload():(t.show=!0,t.title=t.$t("m.tip.error"),t.content=t.$t("m.tip.delete_err"),t.btnGroup.btnSecond="")})},closeBox:function(t){t?"del"==this.currentOpa?this.delDevice():this.unbindVIn():this.show=!1},delIdM:function(t){this.delId=t,this.currentOpa="del",this.show=!0,this.title=this.$t("m.tip.warn"),this.content=this.$t("m.tip.del_device")},searchResult:function(){var t=this;s["a"].post("/api/v1/vehicle/listBindDevice",{imei:this.searchText}).then(function(e){t.total=e.data.data.rowCount,t.filterData(e.data.data),t.totalPages=e.data.data.totalPages})}}},l=r,u=(n("3607"),n("2877")),d=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=d.exports},3607:function(t,e,n){"use strict";var i=n("a9a5"),a=n.n(i);a.a},a9a5:function(t,e,n){},c466:function(t,e,n){"use strict";function i(t){var e=new Date(t),n=e.getFullYear()+" ",i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate(),s=e.getHours()<10?"0"+e.getHours():e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return i+"/"+a+"/"+n+" "+s+":"+o}function a(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate();return n+"-"+i+"-"+a}function s(t,e){return Math.ceil((e-t)/1e3/3600/24)}function o(t){var e=new Date(t),n=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"),i=new Array("Sun","Mon","Tus","Wed","Thu","Fri","Sat"),a=e.getMonth(),s=e.getDay(),o=e.getDate();return i[s]+" , "+n[a]+" "+o+" , "+e.getFullYear()}function c(t){if(8===t.length){var e=t.slice(0,4),n=t.slice(4,6),i=t.slice(6,8);return e+"/"+n+"/"+i}if(17===t.length){var a=t.slice(0,4),s=t.slice(4,6),o=t.slice(6,8),c=t.slice(9,13),r=t.slice(13,15),l=t.slice(15,17);return a+"/"+s+"/"+o+" - "+c+"/"+r+"/"+l}}function r(t){var e=t.slice(0,4),n=(new Date).getFullYear();return n-e}function l(t){var e=new Date(t.slice(0,4),t.slice(4,5),t.slice(5,6)).getTime(),n=(new Date).getTime(),i=n-e,a=Math.floor(i/31536e6),s=Math.floor(i-a/2592e6)%12;return{year:a,month:s}}function u(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate();return i+"/"+a+"/"+n}function d(t,e){var n=new Date(t),i=(n.getFullYear(),n.getMonth()+1<10?n.getMonth():n.getMonth(),n.getDate()<10?n.getDate():n.getDate(),n.getHours()<10?"0"+n.getHours():n.getHours()),a=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),s=new Date(e),o=(s.getFullYear(),s.getMonth()+1<10?s.getMonth():s.getMonth(),s.getDate()<10?s.getDate():s.getDate(),s.getHours()<10?"0"+s.getHours():s.getHours()),c=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();return"".concat(i,":").concat(a,"-").concat(o,":").concat(c)}function h(t){var e=new Date(t),n=(e.getFullYear(),e.getMonth()+1<10?e.getMonth():e.getMonth(),e.getDate()<10?e.getDate():e.getDate(),e.getHours()<10?"0"+e.getHours():e.getHours()),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return n+":"+i+":"+a}n.d(e,"d",function(){return i}),n.d(e,"i",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return u}),n.d(e,"j",function(){return d}),n.d(e,"f",function(){return h})},d2e4:function(t,e,n){"use strict";var i=n("e357"),a=n.n(i);a.a},e357:function(t,e,n){},ebd9:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.show?n("div",{attrs:{id:"popup-edit"}},[n("div",{staticClass:"modal-dialog modal-md popup-content"},[n("div",{staticClass:"modal-content",attrs:{role:"document",id:"__BVID__42___BV_modal_content_","aria-labelledby":"__BVID__42___BV_modal_header_","aria-describedby":"__BVID__42___BV_modal_body_"}},[n("header",{staticClass:"modal-header",attrs:{id:"__BVID__42___BV_modal_header_"}},[n("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.closePopup()}}},[t._v("Ã—")])]),n("div",{staticClass:"modal-body",attrs:{id:"__BVID__42___BV_modal_body_"}},[n("div",[t._v(t._s(t.content))])]),n("footer",{staticClass:"modal-footer",attrs:{id:"__BVID__42___BV_modal_footer_"}},[t.buttonText&&t.buttonText.btnFirst?n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.closePopup(t.buttonText.origin?t.buttonText.origin:"")}}},[t._v(t._s(t.buttonText?t.buttonText.btnFirst:"")+"\n                  ")]):t._e(),t.buttonText&&t.buttonText.btnSecond?n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.closePopup(t.type="ok",t.buttonText.userId)}}},[t._v(t._s(t.buttonText.btnSecond)+"\n                  ")]):t._e()])])]),n("div",{staticClass:"bg",on:{click:function(e){return t.closePopup()}}})]):t._e()])},a=[],s={name:"modal",props:["show","title","content","buttonText"],methods:{closePopup:function(t,e){this.$emit("closeRemindBox",t,e)}}},o=s,c=(n("d2e4"),n("2877")),r=Object(c["a"])(o,i,a,!1,null,"15db5f6c",null);e["a"]=r.exports}}]);