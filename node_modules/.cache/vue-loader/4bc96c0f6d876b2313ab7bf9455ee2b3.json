{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/userInviteRegist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/userInviteRegist.vue","mtime":1574414921000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from '@/utils/httpclient';\nimport Alert from '@components/model';\nimport registerStatus from '@components/registStatus'\n\nexport default {\n    name: 'userInviteRegister',\n    components: {\n        Alert, registerStatus\n    },\n    data() {\n        return {\n            firstName: '',\n            lastName: '',\n            setPassWord: '',\n            confirmPassWord: '',\n            phone: '',\n            status: 'accepted',\n            showResult: false,\n            showAlerts: {\n                title: '',\n                show: false,\n                content: '',\n                buttonText: ''\n            },\n            user: {\n                name: '',\n                lot: '',\n                email: '',\n            },\n            btnGroup: {\n                btnFirst: 'Login',\n                btnSecond: 'Homepage'\n            },\n            errInfo: '',\n            succInfo: '',\n            icon: '',\n            valueLength: '',\n            language:'44',//226是美国\n            inviteData: {}\n        }\n    },\n    mounted() {\n        let token = window.location.search.split('token=')[1];\n        //let token = 'eyJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRJZCI6ImJkMzM1MGJhMWRmZDQ4Njg5MTc5MTE3YWExNTY5ZTk5IiwiZW1haWwiOiJ3ZWltaW5Abm9uZGEudXMiLCJzdWIiOiJiZDMzNTBiYTFkZmQ0ODY4OTE3OTExN2FhMTU2OWU5OV93ZWltaW5Abm9uZGEudXMiLCJleHAiOjE1NjI4Mzc0ODN9.DDntzh__-hj25PHzpazZCm9iUyFR-yv2VPUdbgmBQpU';\n        this.inviteRegister(token).then((res) => {\n            if (res.data.code === 200) {\n                let data = res.data.data;\n                this.firstName = data.inviteFirstName ? data.inviteFirstName : '';\n                this.lastName = data.inviteLastName ? data.inviteLastName : '';\n                this.phone = data.invitePhone ? data.invitePhone : '';\n                this.user.name = data.firstName + ' ' + data.lastName;\n                this.user.lot = data.storeName;\n                this.user.email = data.inviteEmail;\n\n\n            } else if (res.data.code === 400) {\n                let passData = {\n                    title: this.$t('m.register.sign_up'),\n                    show: true,\n                    content: this.$t('m.cloud.register_verify_failed'),\n                    buttonText: {\n                        btnFirst: '',\n                        btnSecond: this.$t('m.tip.b_ok')\n                    }\n                };\n                this.closeRemind(passData);\n            }\n        }).catch((err) => {\n            console.log(err)\n        })\n    },\n    computed: {\n        firstNameState() {\n            return this.firstName.length > 0\n        },\n        lastNameState() {\n            return this.lastName.length > 0\n        },\n        setPassWordState() {\n            return this.setPassWord.length > 5\n        },\n        confirmPassWordState() {\n            return this.confirmPassWord.length > 5\n        },\n        phoneState() {\n            return this.phone.length > 7\n        }\n    },\n    methods: {\n        inviteRegister(token) {\n            return httpClient.post('/api/v1/user/inviteLinkVerification', {\n                token: token\n            });\n        },\n        GetRequest() {\n            var url = location.search; //获取url中\"?\"符后的字串\n            var theRequest = {};\n            if (url.indexOf(\"?\") !== -1) {\n                var str = url.substr(1);\n                var strs = str.split(\"&\");\n                for (var i = 0; i < strs.length; i++) {\n                    theRequest[strs[i].split(\"=\")[0]] = (strs[i].split(\"=\")[1]);\n                }\n            }\n            return theRequest;\n        },\n        saveInviteData() {\n            this.checkThePassWord(this.postData)\n        },\n        checkThePassWord(cb) {//检验两次密码，是否勾选\n            if (this.firstName === '' || this.lastName === '' || this.setPassWord === '' || this.confirmPassWord === '' || this.phone === '') {\n                let passData = {\n                    title: this.$t('m.register.sign_up'),\n                    show: true,\n                    content: this.$t('m.cloud.fill_in_all_in'),\n                    buttonText: {\n                        btnFirst: '',\n                        btnSecond: this.$t('m.tip.b_ok'),\n                    }\n                };\n                this.closeRemind(passData);\n            } else if (this.confirmPassWord !== this.setPassWord) {\n                let passData = {\n                    title: this.$t('m.register.sign_up'),\n                    show: true,\n                    content: this.$t('m.tip.password_confirm_error'),\n                    buttonText: {\n                        btnFirst: '',\n                        btnSecond: this.$t('m.tip.b_ok'),\n                    }\n                };\n                this.closeRemind(passData);\n                this.confirmPassWord = ''\n            }  else {\n                cb()\n            }\n\n        // else if (this.status !== 'accepted') {//判断是否勾选协议，暂时去掉\n        //         let passData = {\n        //             title: 'Register',\n        //             show: true,\n        //             content: 'Please Check Our Privacy Policy and Terms of Service',\n        //             buttonText: {\n        //                 btnFirst: '',\n        //                 btnSecond: 'OK'\n        //             }\n        //         };\n        //         this.closeRemind(passData);\n        //     }\n\n\n        },\n        postData() {\n            let data = {\n                firstName: this.firstName,\n                lastName: this.lastName,\n                password: this.confirmPassWord,\n                phone: this.phone,\n                userEmail: this.user.email\n            };\n            let token = this.GetRequest().token;\n            let link = '/api/v1/user/reg?token=' + token;\n            httpClient.post(link, data).then((res) => {\n                if (res && res.data.code === 400) {\n                    this.showResult = !this.showResult;\n                    this.errInfo = this.$t('m.tip.user_already');\n                    this.succInfo = '';\n                    this.icon = 'fa fa-close'\n                } else {\n                    this.showResult = !this.showResult;\n                    this.errInfo = '';\n                    this.succInfo = this.$t('m.cloud.register_success_login',{store:this.user.lot});\n                    this.icon = 'cui cui-check'\n                }\n            })\n        },\n        closeRemind(data) {\n            this.showAlerts.show = data.show;\n            this.showAlerts.title = data.title;\n            this.showAlerts.content = data.content;\n            this.showAlerts.buttonText = data.buttonText;\n        },\n        closeBox() {//子组件来请求父组件关闭弹窗\n            this.showAlerts.show = !this.showAlerts.show;\n        },\n    }\n}\n",{"version":3,"sources":["userInviteRegist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userInviteRegist.vue","sourceRoot":"src/views/dashboard/dashboardMain","sourcesContent":["<template>\n    <div class=\"animated fadeIn\">\n        <div class=\"invite-register\" v-if=\"!showResult\">\n            <b-row>\n                <b-col sm=\"12\" lg=\"12\" class=\"text-center\">\n                    <img src=\"../../../assets/pages-img/logo.svg\" width=\"200\" alt=\"\">\n                </b-col>\n                <b-col sm=\"12\" lg=\"12\">\n                    <p class=\"text-muted text-center title\">\n                        {{$t('m.cloud.invite_user_title')}}\n                    </p>\n                </b-col>\n                <b-col sm=\"12\" lg=\"12\">\n                    <div class=\"text-muted text-center\" style=\"margin-bottom: 10px\">\n                        {{$t('m.cloud.user_invite_desc',{name:user.name,store:user.lot})}}<br>\n                        {{$t('m.cloud.user_invite_fill')}}\n                    </div>\n                </b-col>\n            </b-row>\n\n            <div class=\"form-submit\">\n                <b-row>\n                    <b-col class=\"full-width\" sm=\"6\" lg=\"6\">\n                        <label class=\"text-muted\">{{$t('m.common.first_name')}}</label>\n                        <b-form-input class=\"form-control\" type=\"text\" :state=\"firstNameState\"\n                                      v-model=\"firstName\"></b-form-input>\n                    </b-col>\n                    <b-col class=\"full-width\" sm=\"6\" lg=\"6\">\n                        <label class=\"text-muted\">{{$t('m.common.last_name')}}</label>\n                        <b-form-input class=\"form-control\" type=\"text\" :state=\"lastNameState\"\n                                      v-model=\"lastName\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{$t('m.admin.email')}}</label>\n                        <b-form-input disabled class=\"form-control\" type=\"email\" v-model=\"user.email\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{$t('m.register.set')}}</label>\n                        <b-form-input class=\"form-control\" type=\"password\" :state=\"setPassWordState\"\n                                      v-model=\"setPassWord\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{$t('m.register.confirm')}}</label>\n                        <b-form-input class=\"form-control\" :state=\"confirmPassWordState\" type=\"password\"\n                                      v-model=\"confirmPassWord\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{$t('m.common.contact_phone')}}</label>\n                        <b-form-input class=\"form-control\" :state=\"phoneState\" type=\"number\"\n                                      v-model=\"phone\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n<!--                    <b-form-checkbox class=\"input-check\" v-model=\"status\" value=\"accepted\"-->\n<!--                                     unchecked-value=\"not_accepted\">-->\n<!--                        Agree to the Privacy Policy and Terms of Service-->\n<!--                    </b-form-checkbox>-->\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\" class=\"margin-submit\">\n                        <b-button variant=\"success\" class=\"btn col-12 \" @click=\"saveInviteData\">{{$t('m.common.submit')}}</b-button>\n                    </b-col>\n                </b-row>\n            </div>\n        </div>\n\n        <div v-if=\"showResult\">\n            <registerStatus id=\"after-result\" :btnGroup=\"btnGroup\" :errInfo=\"errInfo\"\n                            :succInfo=\"succInfo\"></registerStatus>\n        </div>\n\n        <Alert @closeRemindBox='closeBox()' :buttonText=\"showAlerts.buttonText\" :show=\"showAlerts.show\"\n               :title=\"showAlerts.title\" :content=\"showAlerts.content\"></Alert>\n    </div>\n</template>\n<script>\n    import httpClient from '@/utils/httpclient';\n    import Alert from '@components/model';\n    import registerStatus from '@components/registStatus'\n\n    export default {\n        name: 'userInviteRegister',\n        components: {\n            Alert, registerStatus\n        },\n        data() {\n            return {\n                firstName: '',\n                lastName: '',\n                setPassWord: '',\n                confirmPassWord: '',\n                phone: '',\n                status: 'accepted',\n                showResult: false,\n                showAlerts: {\n                    title: '',\n                    show: false,\n                    content: '',\n                    buttonText: ''\n                },\n                user: {\n                    name: '',\n                    lot: '',\n                    email: '',\n                },\n                btnGroup: {\n                    btnFirst: 'Login',\n                    btnSecond: 'Homepage'\n                },\n                errInfo: '',\n                succInfo: '',\n                icon: '',\n                valueLength: '',\n                language:'44',//226是美国\n                inviteData: {}\n            }\n        },\n        mounted() {\n            let token = window.location.search.split('token=')[1];\n            //let token = 'eyJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRJZCI6ImJkMzM1MGJhMWRmZDQ4Njg5MTc5MTE3YWExNTY5ZTk5IiwiZW1haWwiOiJ3ZWltaW5Abm9uZGEudXMiLCJzdWIiOiJiZDMzNTBiYTFkZmQ0ODY4OTE3OTExN2FhMTU2OWU5OV93ZWltaW5Abm9uZGEudXMiLCJleHAiOjE1NjI4Mzc0ODN9.DDntzh__-hj25PHzpazZCm9iUyFR-yv2VPUdbgmBQpU';\n            this.inviteRegister(token).then((res) => {\n                if (res.data.code === 200) {\n                    let data = res.data.data;\n                    this.firstName = data.inviteFirstName ? data.inviteFirstName : '';\n                    this.lastName = data.inviteLastName ? data.inviteLastName : '';\n                    this.phone = data.invitePhone ? data.invitePhone : '';\n                    this.user.name = data.firstName + ' ' + data.lastName;\n                    this.user.lot = data.storeName;\n                    this.user.email = data.inviteEmail;\n\n\n                } else if (res.data.code === 400) {\n                    let passData = {\n                        title: this.$t('m.register.sign_up'),\n                        show: true,\n                        content: this.$t('m.cloud.register_verify_failed'),\n                        buttonText: {\n                            btnFirst: '',\n                            btnSecond: this.$t('m.tip.b_ok')\n                        }\n                    };\n                    this.closeRemind(passData);\n                }\n            }).catch((err) => {\n                console.log(err)\n            })\n        },\n        computed: {\n            firstNameState() {\n                return this.firstName.length > 0\n            },\n            lastNameState() {\n                return this.lastName.length > 0\n            },\n            setPassWordState() {\n                return this.setPassWord.length > 5\n            },\n            confirmPassWordState() {\n                return this.confirmPassWord.length > 5\n            },\n            phoneState() {\n                return this.phone.length > 7\n            }\n        },\n        methods: {\n            inviteRegister(token) {\n                return httpClient.post('/api/v1/user/inviteLinkVerification', {\n                    token: token\n                });\n            },\n            GetRequest() {\n                var url = location.search; //获取url中\"?\"符后的字串\n                var theRequest = {};\n                if (url.indexOf(\"?\") !== -1) {\n                    var str = url.substr(1);\n                    var strs = str.split(\"&\");\n                    for (var i = 0; i < strs.length; i++) {\n                        theRequest[strs[i].split(\"=\")[0]] = (strs[i].split(\"=\")[1]);\n                    }\n                }\n                return theRequest;\n            },\n            saveInviteData() {\n                this.checkThePassWord(this.postData)\n            },\n            checkThePassWord(cb) {//检验两次密码，是否勾选\n                if (this.firstName === '' || this.lastName === '' || this.setPassWord === '' || this.confirmPassWord === '' || this.phone === '') {\n                    let passData = {\n                        title: this.$t('m.register.sign_up'),\n                        show: true,\n                        content: this.$t('m.cloud.fill_in_all_in'),\n                        buttonText: {\n                            btnFirst: '',\n                            btnSecond: this.$t('m.tip.b_ok'),\n                        }\n                    };\n                    this.closeRemind(passData);\n                } else if (this.confirmPassWord !== this.setPassWord) {\n                    let passData = {\n                        title: this.$t('m.register.sign_up'),\n                        show: true,\n                        content: this.$t('m.tip.password_confirm_error'),\n                        buttonText: {\n                            btnFirst: '',\n                            btnSecond: this.$t('m.tip.b_ok'),\n                        }\n                    };\n                    this.closeRemind(passData);\n                    this.confirmPassWord = ''\n                }  else {\n                    cb()\n                }\n\n            // else if (this.status !== 'accepted') {//判断是否勾选协议，暂时去掉\n            //         let passData = {\n            //             title: 'Register',\n            //             show: true,\n            //             content: 'Please Check Our Privacy Policy and Terms of Service',\n            //             buttonText: {\n            //                 btnFirst: '',\n            //                 btnSecond: 'OK'\n            //             }\n            //         };\n            //         this.closeRemind(passData);\n            //     }\n\n\n            },\n            postData() {\n                let data = {\n                    firstName: this.firstName,\n                    lastName: this.lastName,\n                    password: this.confirmPassWord,\n                    phone: this.phone,\n                    userEmail: this.user.email\n                };\n                let token = this.GetRequest().token;\n                let link = '/api/v1/user/reg?token=' + token;\n                httpClient.post(link, data).then((res) => {\n                    if (res && res.data.code === 400) {\n                        this.showResult = !this.showResult;\n                        this.errInfo = this.$t('m.tip.user_already');\n                        this.succInfo = '';\n                        this.icon = 'fa fa-close'\n                    } else {\n                        this.showResult = !this.showResult;\n                        this.errInfo = '';\n                        this.succInfo = this.$t('m.cloud.register_success_login',{store:this.user.lot});\n                        this.icon = 'cui cui-check'\n                    }\n                })\n            },\n            closeRemind(data) {\n                this.showAlerts.show = data.show;\n                this.showAlerts.title = data.title;\n                this.showAlerts.content = data.content;\n                this.showAlerts.buttonText = data.buttonText;\n            },\n            closeBox() {//子组件来请求父组件关闭弹窗\n                this.showAlerts.show = !this.showAlerts.show;\n            },\n        }\n    }\n</script>\n<style lang=\"scss\" scoped>\n    .invite-register {\n        margin: 40px auto;\n        max-width: 440px;\n\n        .title {\n            margin: 10px 0;\n            font-size: 28px;\n        }\n    }\n\n    .form-submit {\n        label {\n            margin-top: 10px;\n        }\n    }\n\n    .input-check {\n        margin: 10px auto;\n    }\n\n    .contain {\n        transform: translateX(-50%);\n        position: absolute;\n        left: 50%;\n        top: 20px;\n\n        .col-lg-6 {\n            flex: 0 0 100%;\n            max-width: 100%;\n        }\n\n        .full-width {\n            flex: 0 0 50% !important;\n        }\n    }\n    .margin-submit{\n        margin-top: 20px;\n    }\n</style>\n"]}]}