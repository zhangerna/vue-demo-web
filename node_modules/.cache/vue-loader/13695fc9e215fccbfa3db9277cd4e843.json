{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/adminEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/adminEdit.vue","mtime":1562061537000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from '@/utils/httpclient';\nimport Alert from '@components/model'\n\nexport default {\n    name: 'adminEdit',\n    components: {\n        Alert\n    },\n    data() {\n        return {\n            id: this.$route.params.id,\n            userName: '',\n            firstName: '',\n            lastName: '',\n            userEmail: '',\n            phone: '',\n            adminId: 0,\n            status: 1,\n            role: '',\n            options1: [\n                'Dealership Staff', 'Dealership Manager', 'Dealership Group Administrator'\n            ],\n            selected1: '',\n            options2: [\n                'Active', 'InActive'\n            ],\n            selected2: '',\n            showAlerts: {\n                title: '',\n                content: '',\n                show: false,\n                buttonText: ''\n            }\n        }\n    },\n    mounted() {\n        this.adminId = this.$store.state.userInfo.userId;\n        let url = '/api/v1/getUserById';\n        httpClient.post(url, {userId: this.id}).then((res) => {\n            let data = res.data.data;\n            this.userName = data.firstName + ' ' + data.lastName;\n            this.firstName = data.firstName;\n            this.lastName = data.lastName;\n            this.userEmail = data.userEmail;\n            this.phone = data.phone;\n            this.status = data.status === 1 ? 'Active' : 'InActive';\n            this.role = data.role;\n            //初始化role 和 status的下拉选择\n            let i = this.options1.findIndex((val) => val === this.role);\n            this.selected1 = this.options1[i];\n            let j = this.options2.findIndex((item) => item === this.status);\n            this.selected2 = this.options2[j];\n        });\n\n    },\n    methods: {\n        saveData() {\n            let link = '/api/v1/updateUser';\n            let userRole;\n            if (this.selected1 === 'Dealership Staff') {\n                userRole = 'user'\n            } else if (this.selected1 === 'Dealership Manager') {\n                userRole = 'manager'\n            } else {\n                userRole = 'root'\n            }\n            let data = {\n                userId: this.id,\n                role: userRole,\n                status: this.selected2 === 'Active' ? 1 : 0\n            };\n            httpClient.post(link, data).then((res) => {\n                if (res.data.code === 200) {\n                    let passData = {\n                        title: this.$t('m.tip.info'),\n                        show: true,\n                        content: this.$t('m.tip.update_succ'),\n                        buttonText: {\n                            btnFirst: '',\n                            btnSecond: this.$t('m.tip.b_ok'),\n                            userId: ''\n                        }\n                    };\n                    this.closeRemind(passData);\n                    window.location.reload();\n                }\n            })\n        },\n        closeBox() {\n            this.showAlerts.show = !this.showAlerts.show;\n        },\n        closeRemind(data) {\n            this.showAlerts.show = data.show;\n            this.showAlerts.title = data.title;\n            this.showAlerts.content = data.content;\n            this.showAlerts.buttonText = data.buttonText;\n        },\n    }\n}\n",{"version":3,"sources":["adminEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"adminEdit.vue","sourceRoot":"src/views/dashboard/dashboardMain","sourcesContent":["<template>\n    <div class=\"animated fadeIn\">\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <strong id=\"header-title\">{{ $t('m.common.edit') }}: {{userName}}</strong>\n                    </div>\n\n                    <div class=\"card-body\">\n                        <div class=\"row\">\n                            <div class=\"col-sm-12 col-md-6 col-lg-6\">\n                                <b-form-group :label=\"$t('m.common.first_name')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"firstName\"></b-input>\n                                </b-form-group>\n                            </div>\n                            <div class=\"col-sm-12 col-md-6 col-lg-6\">\n                                <b-form-group :label=\"$t('m.common.last_name')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"lastName\"></b-input>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                            <div class=\"col-12\">\n                                <b-form-group :label=\"$t('m.common.user_email')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"userEmail\"></b-input>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                            <div class=\"col-12\">\n                                <b-form-group :label=\"$t('m.common.phone')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"phone\"></b-input>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                            <div class=\"col-sm-12 col-md-6 col-lg-6 option-choose\">\n                                <b-form-group :label=\"$t('m.common.role')\" label-align-sm=\"top\">\n                                    <b-form-select v-model=\"selected1\" :options=\"options1\"\n                                                   :disabled=\"adminId === id || role === 'Dealership Group Administrator' \"></b-form-select>\n                                </b-form-group>\n                            </div>\n\n                            <div class=\"col-sm-12 col-md-6 col-lg-6 option-choose\">\n                                <b-form-group :label=\"$t('m.admin.detail_status')\" label-align-sm=\"top\">\n                                    <b-form-select v-model=\"selected2\" :options=\"options2\"\n                                                   :disabled=\"adminId === id || role === 'Dealership Group Administrator' \"></b-form-select>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\" v-if=\"adminId !== id && role !== 'Dealership Group Administrator' \">\n                            <div class=\"col-6\">\n                                <b-button variant=\"primary\" @click=\"saveData\">{{ $t('m.admin.save') }}</b-button>\n                            </div>\n                        </div>\n\n                        <Alert @closeRemindBox='closeBox' :buttonText=\"showAlerts.buttonText\" :show=\"showAlerts.show\"\n                               :title=\"showAlerts.title\" :content=\"showAlerts.content\">\n                        </Alert>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import httpClient from '@/utils/httpclient';\n    import Alert from '@components/model'\n\n    export default {\n        name: 'adminEdit',\n        components: {\n            Alert\n        },\n        data() {\n            return {\n                id: this.$route.params.id,\n                userName: '',\n                firstName: '',\n                lastName: '',\n                userEmail: '',\n                phone: '',\n                adminId: 0,\n                status: 1,\n                role: '',\n                options1: [\n                    'Dealership Staff', 'Dealership Manager', 'Dealership Group Administrator'\n                ],\n                selected1: '',\n                options2: [\n                    'Active', 'InActive'\n                ],\n                selected2: '',\n                showAlerts: {\n                    title: '',\n                    content: '',\n                    show: false,\n                    buttonText: ''\n                }\n            }\n        },\n        mounted() {\n            this.adminId = this.$store.state.userInfo.userId;\n            let url = '/api/v1/getUserById';\n            httpClient.post(url, {userId: this.id}).then((res) => {\n                let data = res.data.data;\n                this.userName = data.firstName + ' ' + data.lastName;\n                this.firstName = data.firstName;\n                this.lastName = data.lastName;\n                this.userEmail = data.userEmail;\n                this.phone = data.phone;\n                this.status = data.status === 1 ? 'Active' : 'InActive';\n                this.role = data.role;\n                //初始化role 和 status的下拉选择\n                let i = this.options1.findIndex((val) => val === this.role);\n                this.selected1 = this.options1[i];\n                let j = this.options2.findIndex((item) => item === this.status);\n                this.selected2 = this.options2[j];\n            });\n\n        },\n        methods: {\n            saveData() {\n                let link = '/api/v1/updateUser';\n                let userRole;\n                if (this.selected1 === 'Dealership Staff') {\n                    userRole = 'user'\n                } else if (this.selected1 === 'Dealership Manager') {\n                    userRole = 'manager'\n                } else {\n                    userRole = 'root'\n                }\n                let data = {\n                    userId: this.id,\n                    role: userRole,\n                    status: this.selected2 === 'Active' ? 1 : 0\n                };\n                httpClient.post(link, data).then((res) => {\n                    if (res.data.code === 200) {\n                        let passData = {\n                            title: this.$t('m.tip.info'),\n                            show: true,\n                            content: this.$t('m.tip.update_succ'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: this.$t('m.tip.b_ok'),\n                                userId: ''\n                            }\n                        };\n                        this.closeRemind(passData);\n                        window.location.reload();\n                    }\n                })\n            },\n            closeBox() {\n                this.showAlerts.show = !this.showAlerts.show;\n            },\n            closeRemind(data) {\n                this.showAlerts.show = data.show;\n                this.showAlerts.title = data.title;\n                this.showAlerts.content = data.content;\n                this.showAlerts.buttonText = data.buttonText;\n            },\n        }\n    }\n</script>\n<style lang=\"scss\" scoped>\n    .card-body {\n        .row {\n            margin-bottom: 20px;\n        }\n\n        .custom-select:disabled {\n            color: #73818f;\n            background-color: unset;\n        }\n\n        .option-choose {\n            .custom-select {\n                color: #fff;\n            }\n        }\n    }\n</style>"]}]}