{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/reseOrderVerify.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/reseOrderVerify.vue","mtime":1577962918000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport OrderDetail from '../component/orderDetail'\nimport httpClient from \"@/utils/httpclient\"\nexport default {\n    name: \"reseOrderVerify\",\n    components:{\n        OrderDetail\n    },\n    data(){\n        return{\n            id:this.$route.params.id,\n            modalContent:'',\n            selected_reason: '',\n            cancelOrder:false,\n            submitAuthTime:null,\n            reasonList: {\n                \"10\": this.$t('m.cloud.wait_pick_up'),\n                \"20\": this.$t('m.cloud.wait_return'),\n                \"30\": this.$t('m.cloud.had_return')\n            },\n            curReson: [],\n            curOrderStatus: ''\n        }\n    },\n    methods:{\n        getOrderStatus(orderStatus) {\n            this.curOrderStatus = Number(orderStatus) + 10;\n            this.curReson.push({\n                value: orderStatus,\n                text: this.reasonList[String(Number(orderStatus) + 10)]\n            });\n        },\n        linkToOrderDetail() {\n            if (this.modalContent == this.$t('m.admin.save_success')) {\n                this.$router.push('/test-drive/reservation-order/detail/' + this.$route.params.id)\n            }\n        },\n        changeOrderStatus(){\n            this.cancelOrder = true;\n            this.modalContent = 'success';\n            let url = this.curOrderStatus == 20 ? \"/api/v1/clouddrive/order/unlockusevehicle\" : \"/api/v1/clouddrive/order/returnvehicle\";\n            httpClient.post(url, {\n                orderId: this.id,\n            }).then(res => {\n                if (res.data.code === 200 && res.data.data.result) {\n                    this.cancelOrder = true;\n                    this.modalContent = this.$t('m.admin.save_success');\n                } else {\n                    this.cancelOrder = true;\n                    this.modalContent = res.data.data.content || 'failed'\n                }\n            })\n        }\n    }\n}\n",{"version":3,"sources":["reseOrderVerify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reseOrderVerify.vue","sourceRoot":"src/views/dashboard/testDrive","sourcesContent":["<template>\n    <div class=\"animated fadeIn order-verify\">\n        <OrderDetail :orderId=\"id\" @childData=\"getOrderStatus\" />\n        <b-row class=\"change-order-status\">\n            <b-col sm=\"6\">\n                <p>{{$t('m.cloud.order_status_change')}}</p>\n                <p class=\"text-red\">{{$t('m.cloud.order_status_tip')}}</p>\n                <div class=\"d-flex justify-content-center\">\n                    <b-form-select class=\"select-box\" v-model=\"selected_reason\">\n                        <option value=\"\">{{ $t('m.add_shop.please_select') }}</option>\n                        <option v-for=\"(val,j) in curReson\" :value=\"val.value\" :key=\"j\">\n                            {{val.text}}\n                        </option>\n                    </b-form-select>\n\n                    <button class=\"btn btn-primary\" @click=\"changeOrderStatus\" style=\"margin-left: 10px\">\n                        {{ $t('m.common.b_save') }}\n                    </button>\n                </div>\n            </b-col>\n            <b-modal ref=\"my-modal-cancel\" v-model=\"cancelOrder\"  :ok-title=\"$t('m.tip.b_ok')\" ok-only\n                     @ok=\"linkToOrderDetail\"  class=\"select-store\" >\n                <template slot=\"modal-title\">\n                    {{ $t('m.vehicle.actions_remind') }}\n                </template>\n                <div class=\"text-left\">\n                    {{ modalContent }}\n                </div>\n            </b-modal>\n        </b-row>\n    </div>\n</template>\n\n<script>\n    import OrderDetail from '../component/orderDetail'\n    import httpClient from \"@/utils/httpclient\"\n    export default {\n        name: \"reseOrderVerify\",\n        components:{\n            OrderDetail\n        },\n        data(){\n            return{\n                id:this.$route.params.id,\n                modalContent:'',\n                selected_reason: '',\n                cancelOrder:false,\n                submitAuthTime:null,\n                reasonList: {\n                    \"10\": this.$t('m.cloud.wait_pick_up'),\n                    \"20\": this.$t('m.cloud.wait_return'),\n                    \"30\": this.$t('m.cloud.had_return')\n                },\n                curReson: [],\n                curOrderStatus: ''\n            }\n        },\n        methods:{\n            getOrderStatus(orderStatus) {\n                this.curOrderStatus = Number(orderStatus) + 10;\n                this.curReson.push({\n                    value: orderStatus,\n                    text: this.reasonList[String(Number(orderStatus) + 10)]\n                });\n            },\n            linkToOrderDetail() {\n                if (this.modalContent == this.$t('m.admin.save_success')) {\n                    this.$router.push('/test-drive/reservation-order/detail/' + this.$route.params.id)\n                }\n            },\n            changeOrderStatus(){\n                this.cancelOrder = true;\n                this.modalContent = 'success';\n                let url = this.curOrderStatus == 20 ? \"/api/v1/clouddrive/order/unlockusevehicle\" : \"/api/v1/clouddrive/order/returnvehicle\";\n                httpClient.post(url, {\n                    orderId: this.id,\n                }).then(res => {\n                    if (res.data.code === 200 && res.data.data.result) {\n                        this.cancelOrder = true;\n                        this.modalContent = this.$t('m.admin.save_success');\n                    } else {\n                        this.cancelOrder = true;\n                        this.modalContent = res.data.data.content || 'failed'\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .change-order-status{\n        width: 100%;\n        border-radius: 5px;\n        padding: 20px;\n        margin: 0 auto 20px;\n        background: #fff;\n        .text-red{\n            color: #cc0000;\n        }\n    }\n</style>\n"]}]}