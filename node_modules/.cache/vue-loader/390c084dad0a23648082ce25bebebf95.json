{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testPoint.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testPoint.vue","mtime":1577962918000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n    name: \"testPoint\",\n    components: {\n        model\n    },\n    data() {\n        return {\n            currentPage: 1,\n            pageSize: 10,\n            total: 0,\n            data: null,\n            table: null,\n            pageCount: 0,\n            showModel: false,\n            modelTitle: \"\",\n            modelContent: \"\",\n            showModel2: false,\n            modelTitle2: \"\",\n            modelContent2: \"\",\n            curPoint: \"\",\n            btnGroup: {\n                btnFirst: this.$t(\"m.tip.b_cancel\"),\n                btnSecond: this.$t(\"m.tip.b_ok\")\n            },\n            btnGroup2: {\n                btnFirst: this.$t(\"m.tip.b_cancel\"),\n                btnSecond: this.$t(\"m.tip.b_ok\")\n            },\n            tableFields: {\n                pointNum: {\n                    label: this.$t(\"m.cloud.drive_point_num\"),\n                    class: \"text-center\"\n                },\n                point: {\n                    label: this.$t(\"m.cloud.test_store_name\"),\n                    class: \"text-center\"\n                },\n                addressInfo: {\n                    label: this.$t(\"m.add_shop.label_address\"),\n                    class: \"text-center\"\n                },\n                userName: {\n                    label: this.$t(\"m.common.contact_person\"),\n                    class: \"text-center\"\n                },\n                userPhone: {\n                    label: this.$t(\"m.common.contact_phone\"),\n                    class: \"text-center\"\n                },\n                storeName: {\n                    label: this.$t(\"m.cloud.vehicle_store_name\"),\n                    class: \"text-center\"\n                },\n                tenantName: {\n                    label: this.$t(\"m.cloud.drive_dealership\"),\n                    class: \"text-center\"\n                },\n                action: {\n                    label: this.$t(\"m.common.action\"),\n                    class: \"text-center\"\n                }\n            }\n        };\n    },\n    mounted() {\n        this.initData();\n    },\n    methods: {\n        initData() {\n            httpClient.get(\"/api/v1/clouddrive/parkinglot/pagelist\").then(res => {\n                if (res.data.code == 200) {\n                    this.total = res.data.data.rowCount;\n                    this.data = res.data.data;\n                    this.pageCount = res.data.data.totalPages;\n                    this.filterData(res.data.data.datas || []);\n                }\n            });\n        },\n        showDelPoint(id) {\n            this.curPoint = id;\n            this.modelTitle = this.$t(\"m.vehicle.actions_remind\");\n            this.modelContent = this.$t(\"m.tip.confirm_del_vehicle\");\n            this.showModel = true;\n            this.btnGroup = {\n                btnFirst: this.$t(\"m.tip.b_cancel\"),\n                btnSecond: this.$t(\"m.tip.confirm\")\n            };\n        },\n        clickButton(type) {\n            if (type) {\n                httpClient\n                    .post(\"/api/v1/lot/delete\", {\n                        id: this.curPoint\n                    })\n                    .then(response => {\n                        if (response.data.code == 200) {\n                            window.location.reload();\n                        }\n                    }).catch(err => {\n                        err;\n                        this.modelTitle2 = this.$t(\"m.vehicle.actions_remind\");\n                        this.modelContent2 = this.$t(\"m.vehicle.file_remind\");\n                        this.showModel2 = true;\n                        this.btnGroup2 = {\n                            btnFirst: \"\",\n                            btnSecond: this.$t(\"m.tip.b_ok\")\n                            \n                        };\n                    });\n                        this.showModel = false;\n\n            }else {\n                this.showModel = false;\n            }\n        },\n        clickButton2 () {\n            this.showModel2 = false;\n        },\n        filterData(data) {\n            this.table = data.map(item => {\n                return {\n                    point: item.parkingName,\n                    address: item.address,\n                    desc: item.parkingAddressDesc,\n                    userName: item.parkingContactName,\n                    userPhone: item.parkingContactPhone,\n                    tenantName: item.tenantName,\n                    storeName: item.storeName,\n                    country: item.parkingCountryName,\n                    state: item.parkingStateName,\n                    city: item.parkingCityName,\n                    area: item.parkingAreaName,\n                    id: item.id,\n                    pointNum: item.parkingServiceNum || \"N/A\"\n                };\n            });\n        },\n        changePage(page) {\n            this.initData(page);\n        }\n    }\n};\n",{"version":3,"sources":["testPoint.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"testPoint.vue","sourceRoot":"src/views/dashboard/testDrive","sourcesContent":["<template>\n    <div class=\"animated fadeIn alerts\">\n        <b-card class=\"custom-header\">\n            <div slot=\"header\">\n                {{ $t(\"m.dashboard.test_point\") }}\n\n                <span class=\"text-right float-right\">\n                    <button class=\"btn btn-sm btn-primary\" @click=\"$router.push('/test-drive/test-point/add')\">\n                        <i class=\"fa fa-plus-square\"></i>\n                        {{ $t(\"m.cloud.add_test_point\") }}\n                    </button>\n                </span>\n            </div>\n            <b-table class=\"table-outline\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\" head-variant=\"light\">\n                <template slot-scope=\"data\" slot=\"addressInfo\">\n                    <p style=\"margin: 4px 0 2px 0;\">{{ data.item.country ? data.item.country : \"N/A\" }},{{ data.item.state ? data.item.state : \"N/A\" }},{{ data.item.city ? data.item.city : \"N/A\" }},{{ data.item.area ? data.item.area : \"N/A\" }},{{ data.item.address ? data.item.address : \"N/A\" }}</p>\n                </template>\n                <template slot=\"action\" slot-scope=\"data\">\n                    <div class=\"btn btn-sm btn-info point-eye text-white\" v-b-tooltip.hover :title=\"$t('m.vehicle_bind.detail')\" style=\"margin-right: 4px;\" @click=\"$router.push('/test-drive/test-point/detail/' + data.item.id)\"><i class=\"fa fa-eye\"></i></div>\n                    <div v-b-tooltip.hover :title=\"$t('m.common.edit')\" class=\"btn btn-sm btn-info point-edit text-white\" style=\"margin-right: 4px;\" @click=\"$router.push('/test-drive/test-point/edit/' + data.item.id)\"><i class=\"fa fa-edit\"></i></div>\n                    <div v-b-tooltip.hover :title=\"$t('m.cloud.delete')\" class=\"btn btn-sm btn-danger\" @click=\"showDelPoint(data.item.id)\"><i class=\"cui cui-trash\"></i></div>\n                </template>\n            </b-table>\n\n            <b-row v-if=\"total > 0\" class=\"paginate-alert\" style=\"margin-top: 20px;\">\n                <b-col sm=\"4\" lg=\"4\">\n                    <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">{{ $t(\"m.common.show\") }} {{ 10 * (currentPage - 1) + 1 }} {{ $t(\"m.common.to\") }} {{ currentPage === pageCount ? total : currentPage * 10 }} {{ $t(\"m.common.of\") }} {{ total }} {{ $t(\"m.common.entries\") }}</div>\n                </b-col>\n                <b-col sm=\"8\" lg=\"8\">\n                    <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"pageSize\" aria-controls=\"my-table\" @input=\"changePage(currentPage)\"></b-pagination>\n                </b-col>\n            </b-row>\n        </b-card>\n        <model :show=\"showModel\" :title=\"modelTitle\" :content=\"modelContent\" :buttonText=\"btnGroup\" @closeRemindBox=\"clickButton\"></model>\n        <model :show=\"showModel2\" :title=\"modelTitle2\" :content=\"modelContent2\" :buttonText=\"btnGroup2\" @closeRemindBox=\"clickButton2\"></model>\n    </div>\n</template>\n\n<script>\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n    name: \"testPoint\",\n    components: {\n        model\n    },\n    data() {\n        return {\n            currentPage: 1,\n            pageSize: 10,\n            total: 0,\n            data: null,\n            table: null,\n            pageCount: 0,\n            showModel: false,\n            modelTitle: \"\",\n            modelContent: \"\",\n            showModel2: false,\n            modelTitle2: \"\",\n            modelContent2: \"\",\n            curPoint: \"\",\n            btnGroup: {\n                btnFirst: this.$t(\"m.tip.b_cancel\"),\n                btnSecond: this.$t(\"m.tip.b_ok\")\n            },\n            btnGroup2: {\n                btnFirst: this.$t(\"m.tip.b_cancel\"),\n                btnSecond: this.$t(\"m.tip.b_ok\")\n            },\n            tableFields: {\n                pointNum: {\n                    label: this.$t(\"m.cloud.drive_point_num\"),\n                    class: \"text-center\"\n                },\n                point: {\n                    label: this.$t(\"m.cloud.test_store_name\"),\n                    class: \"text-center\"\n                },\n                addressInfo: {\n                    label: this.$t(\"m.add_shop.label_address\"),\n                    class: \"text-center\"\n                },\n                userName: {\n                    label: this.$t(\"m.common.contact_person\"),\n                    class: \"text-center\"\n                },\n                userPhone: {\n                    label: this.$t(\"m.common.contact_phone\"),\n                    class: \"text-center\"\n                },\n                storeName: {\n                    label: this.$t(\"m.cloud.vehicle_store_name\"),\n                    class: \"text-center\"\n                },\n                tenantName: {\n                    label: this.$t(\"m.cloud.drive_dealership\"),\n                    class: \"text-center\"\n                },\n                action: {\n                    label: this.$t(\"m.common.action\"),\n                    class: \"text-center\"\n                }\n            }\n        };\n    },\n    mounted() {\n        this.initData();\n    },\n    methods: {\n        initData() {\n            httpClient.get(\"/api/v1/clouddrive/parkinglot/pagelist\").then(res => {\n                if (res.data.code == 200) {\n                    this.total = res.data.data.rowCount;\n                    this.data = res.data.data;\n                    this.pageCount = res.data.data.totalPages;\n                    this.filterData(res.data.data.datas || []);\n                }\n            });\n        },\n        showDelPoint(id) {\n            this.curPoint = id;\n            this.modelTitle = this.$t(\"m.vehicle.actions_remind\");\n            this.modelContent = this.$t(\"m.tip.confirm_del_vehicle\");\n            this.showModel = true;\n            this.btnGroup = {\n                btnFirst: this.$t(\"m.tip.b_cancel\"),\n                btnSecond: this.$t(\"m.tip.confirm\")\n            };\n        },\n        clickButton(type) {\n            if (type) {\n                httpClient\n                    .post(\"/api/v1/lot/delete\", {\n                        id: this.curPoint\n                    })\n                    .then(response => {\n                        if (response.data.code == 200) {\n                            window.location.reload();\n                        }\n                    }).catch(err => {\n                        err;\n                        this.modelTitle2 = this.$t(\"m.vehicle.actions_remind\");\n                        this.modelContent2 = this.$t(\"m.vehicle.file_remind\");\n                        this.showModel2 = true;\n                        this.btnGroup2 = {\n                            btnFirst: \"\",\n                            btnSecond: this.$t(\"m.tip.b_ok\")\n                            \n                        };\n                    });\n                        this.showModel = false;\n\n            }else {\n                this.showModel = false;\n            }\n        },\n        clickButton2 () {\n            this.showModel2 = false;\n        },\n        filterData(data) {\n            this.table = data.map(item => {\n                return {\n                    point: item.parkingName,\n                    address: item.address,\n                    desc: item.parkingAddressDesc,\n                    userName: item.parkingContactName,\n                    userPhone: item.parkingContactPhone,\n                    tenantName: item.tenantName,\n                    storeName: item.storeName,\n                    country: item.parkingCountryName,\n                    state: item.parkingStateName,\n                    city: item.parkingCityName,\n                    area: item.parkingAreaName,\n                    id: item.id,\n                    pointNum: item.parkingServiceNum || \"N/A\"\n                };\n            });\n        },\n        changePage(page) {\n            this.initData(page);\n        }\n    }\n};\n</script>\n"]}]}