{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/alerts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/alerts.vue","mtime":1560750572000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpclient from '@/utils/httpclient';\nimport { getDateString } from \"../../../utils/date\";\n\nexport default {\n    name: \"alerts\",\n    data() {\n        return {\n            currentPage: 1,\n            pageSize: 10,\n            total: 0,\n            show: false,\n            tableFields: {\n                alertType: {\n                    label: \"Alert Type\",\n                    class: \"text-center\"\n                },\n                vehicle: {\n                    label: \"Vehicle\",\n                    class: \"text-center\"\n                },\n                stockNo: {\n                    label: \"Stock NO.\",\n                    class: \"text-center\"\n                },\n                time: {\n                    label: \"Time\",\n                    class: \"text-center\"\n                },\n                status: {\n                    label: \"Status\",\n                    class: \"text-center\"\n                },\n                action: {\n                    label: \"Actions\",\n                    class: \"text-center\"\n                }\n            },\n            data: null,\n            table: null,\n            pageCount: 0,\n            updateInfo: ''\n        }\n    },\n    mounted(){\n        this.axiosData(this.currentPage);\n    },\n    methods: {\n        axiosData(pageNo) {\n            httpclient.post(`/api/v1/alert/list?pageNo=${pageNo}&pageSize=10`)\n                .then(response => {\n                    console.log(response);\n                    this.currentPage = response.data.data.pageNo;\n                    this.total = response.data.data.rowCount;\n                    this.data = response.data.data;\n                    this.pageCount = response.data.data.totalPages;\n                    this.filterData();\n                })\n        },\n        filterData() {\n            this.table = this.data.datas.map((item) => {\n               let year = item.year ? item.year : 'N/A';\n               let make = item.make ? item.make : 'N/A';\n               let model = item.model ? item.model : 'N/A';\n                return {\n                    \"alertType\" : item.alertTypeName,\n                    \"vehicle\": `${year} ${make} ${model}`,\n                    \"stockNo\": item.stockNum ? item.stockNum : 'N/A',\n                    \"time\": item.createTime ? getDateString(item.createTime) : 'N/A',\n                    \"status\": item.alertStatus,\n                    'id': item.id\n                }\n            });\n        },\n        changeFL(type) {\n            this.axiosData(type == 'f' ? 1 : this.pageCount)\n        },\n        prevPage(){\n            this.axiosData(this.currentPage > 1  ? this.currentPage - 1 : 1)\n        },\n        nextPage(){\n            this.axiosData(this.currentPage >= this.pageCount  ? this.currentPage : this.currentPage + 1)\n        },\n        changePage(page) {\n            console.log(page);\n            this.axiosData(page);\n        },\n        reload() {\n            window.location.reload();\n        },\n        updateVehicle(id) {\n            let self = this;\n            httpclient.post('/api/v1/alert/update/status', {\n                alertId: id\n            }).then(response => {\n                if (response.data.code == 200) {\n                    self.updateInfo = 'The alert status has been modified';\n                    self.show = true;\n                } else {\n                    self.updateInfo = 'update error';\n                    self.show = true;\n                }\n            }).catch(error => {\n            })\n        }\n    }\n}\n",null]}