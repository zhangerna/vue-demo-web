{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/profile.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/profile.vue","mtime":1577085605000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.profile {\n    .content {\n        max-width: 600px;\n        margin: 0 auto;\n        img {\n            border-radius: 50%;\n            cursor: pointer;\n        }\n        .group-img {\n            position: relative;\n            margin-bottom: 20px;\n            text-align: center;\n            input {\n                opacity: 0;\n                width: 160px;\n                height: 160px;\n                border-radius: 50%;\n                position: absolute;\n                z-index: 1;\n                // margin-left: -160px;\n                left: 50%;\n                top: 50%;\n                cursor: pointer;\n                transform: translate(-50%,-50%);\n            }\n            .camera {\n                color:#000;\n                font-size: 40px;\n                position: absolute;\n                left: 56%;\n                top: 70%;\n                cursor: pointer;\n            }\n        }\n        .btn-ghost-danger {\n            margin-left: 20px;\n        }\n    }\n}\n",{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"profile.vue","sourceRoot":"src/views/dashboard/inventory","sourcesContent":["<template>\n    <div class=\"animated fadeIn profile-content\">\n        <b-card :header=\"$t('m.dashboard.profile')\" class=\"profile\">\n            <div class=\"content\">\n                <div class=\"group-img\">\n                    <img :src=\"img\" width=\"160px\" height=\"160px\" />\n                    <input type=\"file\"  @change=\"savefile($event)\" accept=\"image/jpeg,image/png,image/jpg\" />\n                    <!-- <div class=\"icon-camera  camera\"></div> -->\n                </div>\n                <div>\n                    <b-form-group>\n                        <label for=\"email\">{{ this.$t(\"m.admin.email\") }}</label>\n                        <b-form-input v-model=\"email\" id=\"email\" type=\"email\" required disabled autocomplete=\"email\"></b-form-input>\n                    </b-form-group>\n                    <b-row style=\"padding-left: 0px;\">\n                        <b-col sm=\"6\">\n                            <b-form-group>\n                                <label for=\"firstname\">{{ $t(\"m.common.first_name\") }}</label>\n                                <b-form-input v-model=\"firstname\" id=\"firstname\" type=\"text\" :placeholder=\"$t('m.common.enter') + $t('m.common.first_name')\" required></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                        <b-col>\n                            <b-form-group>\n                                <label for=\"lastname\">{{ $t(\"m.common.last_name\") }}</label>\n                                <b-form-input v-model=\"lastname\" id=\"lastname\" type=\"text\" :placeholder=\"$t('m.common.enter') + $t('m.common.last_name')\" required></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                    </b-row>\n                    <b-form-group>\n                        <label for=\"phone\">{{ $t(\"m.common.contact_phone\") }}</label>\n                        <b-form-input v-model=\"phone\" id=\"phone\" type=\"text\" required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label for=\"Role\">{{ $t(\"m.common.role\") }}</label>\n                        <b-form-input v-model=\"role\" id=\"role\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label>{{ $t(\"m.common.dealership\") }}</label>\n                        <b-form-input v-model=\"dealship\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label>{{ $t(\"m.common.deal_group\") }}</label>\n                        <b-form-input v-model=\"dealGroup\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                </div>\n                <b-row class=\"text-center\">\n                    <b-col>\n                        <button class=\"btn btn-primary\" @click=\"saveUserInfo\">\n                            {{ $t(\"m.admin.save\") }}\n                        </button>\n                        <button class=\"btn btn-ghost-danger\" @click=\"$router.push('/change-password')\">\n                            {{ $t(\"m.common.change_password\") }}\n                        </button>\n                    </b-col>\n                </b-row>\n            </div>\n        </b-card>\n        <b-modal ref=\"globalModal\" :title=\"$t('m.vehicle.actions_remind')\" v-model=\"showTip\" :ok-title=\"$t('m.tip.b_ok')\" ok-only @ok=\"showTip = false\">\n            <p v-text=\"pText\"></p>\n        </b-modal>\n\n        <b-modal ref=\"globalModal\" :title=\"$t('m.vehicle.actions_remind')\" v-model=\"showETip\" :ok-title=\"$t('m.tip.b_ok')\" ok-only @ok=\"showETip = false\">\n            <p>{{ content }}</p>\n        </b-modal>\n    </div>\n</template>\n\n<style lang=\"scss\">\n.profile {\n    .content {\n        max-width: 600px;\n        margin: 0 auto;\n        img {\n            border-radius: 50%;\n            cursor: pointer;\n        }\n        .group-img {\n            position: relative;\n            margin-bottom: 20px;\n            text-align: center;\n            input {\n                opacity: 0;\n                width: 160px;\n                height: 160px;\n                border-radius: 50%;\n                position: absolute;\n                z-index: 1;\n                // margin-left: -160px;\n                left: 50%;\n                top: 50%;\n                cursor: pointer;\n                transform: translate(-50%,-50%);\n            }\n            .camera {\n                color:#000;\n                font-size: 40px;\n                position: absolute;\n                left: 56%;\n                top: 70%;\n                cursor: pointer;\n            }\n        }\n        .btn-ghost-danger {\n            margin-left: 20px;\n        }\n    }\n}\n</style>\n\n<script>\nimport httpclient from \"@/utils/httpclient\";\nexport default {\n    name: \"profile\",\n    inject: [\"reload\"],\n    data() {\n        return {\n            data: null,\n            email: \"\",\n            firstname: \"\",\n            lastname: \"\",\n            phone: \"\",\n            role: \"\",\n            dealGroup: \"\",\n            dealship: \"\",\n            img: \"\",\n            showTip: false,\n            showETip: false,\n            pText: '',\n            content: ''\n        };\n    },\n    mounted() {\n        this.img = this.$store.state.userInfo.avatarUrl;\n        httpclient\n            .post(\"/api/v1/getUserById\", {\n                userId: this.$store.state.userInfo.userId\n            })\n            .then(response => {\n                this.email = response.data.data.userEmail ? response.data.data.userEmail : \"\";\n                this.firstname = response.data.data.firstName;\n                this.lastname = response.data.data.lastName;\n                this.phone = response.data.data.phone;\n                this.role = response.data.data.role;\n                this.dealship = response.data.data.storeName;\n                this.dealGroup = response.data.data.tenantName;\n            });\n    },\n    methods: {\n        savefile(event) {\n            let file = event.target.files;\n            let fb = new FormData();\n            fb.append(\"image\", file[0]);\n            httpclient.post(\"/api/v1/user/updateAvatar\", fb).then(response => {\n                if (response.data.code === 200) {\n                    this.img = response.data.data.avatarUrl;\n                    let userPersonInfo = {\n                        avatarUrl: this.img,\n                        firstName: this.firstname,\n                        lastName: this.lastname\n                    };\n                    this.$store.dispatch(\"user_Personal_Info\", userPersonInfo); //更新store内用户信息\n                    let storeData = JSON.parse(localStorage.getItem(\"user_info\")); //更新localstorage内用户信息\n                    storeData.avatarUrl = this.img;\n                    localStorage.setItem(\"user_info\", JSON.stringify(storeData));\n                    this.showTip = true;\n                    this.pText =  this.$t(\"m.admin.upload_success\")\n                } else {\n                    this.content = this.$t(\"m.err_message.img_upload_error\");\n                    this.showETip = true;\n                }\n            }).catch(err => {\n                this.content = this.$t(\"m.err_message.img_upload_error\");\n                this.showETip = true;\n            })\n        },\n        saveUserInfo() {\n            if (this.firstname && this.lastname && this.phone) {\n                httpclient\n                    .post(\"/api/v1/updateuserdetail\", {\n                        firstName: this.firstname,\n                        lastName: this.lastname,\n                        userPhone: this.phone\n                    })\n                    .then(res => {\n                        if (res.data.code === 200) {\n                            let userPersonInfo = {\n                                avatarUrl: this.img,\n                                firstName: this.firstname,\n                                lastName: this.lastname\n                            };\n                            this.$store.dispatch(\"user_Personal_Info\", userPersonInfo);\n                            let storeData = JSON.parse(localStorage.getItem(\"user_info\"));\n                            storeData.firstName = this.firstname;\n                            storeData.lastName = this.lastname;\n                            localStorage.setItem(\"user_info\", JSON.stringify(storeData));\n                            this.showTip = true;\n                            this.pText =  this.$t(\"m.admin.save_success\")\n\n                        }\n                    })\n                    .catch(() => {\n                        alert(\"internal error\");\n                    });\n            }\n        }\n    }\n};\n</script>\n"]}]}