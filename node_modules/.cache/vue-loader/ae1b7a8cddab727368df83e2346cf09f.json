{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/login/index.vue?vue&type=style&index=0&id=37dfd6fc&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/login/index.vue","mtime":1577153439000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.logo {\n  text-align: center;\n  p {\n    font-size: 32px;\n    margin: 20px 0;\n  }\n}\n.card-wi {\n  width:44%;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"app flex-row align-items-center\">\n    <div class=\"container\">\n      <div class=\"justify-content-center logo\">\n        <img src=\"@/assets/pages-img/logo.svg\" width=\"300px\">\n        <p>{{ $t('m.register.title') }}</p>\n      </div>\n      <b-row class=\"justify-content-center\">\n        <b-col md=\"8\">\n          <b-card-group>\n            <b-card no-body class=\"p-4\">\n              <b-card-body>\n                <b-form>\n                  <h1>{{ $t('m.login.title2') }}</h1>\n                  <p class=\"text-muted\">{{ $t('m.login.l_p') }}</p>\n                  <b-input-group class=\"mb-3\">\n                    <b-input-group-prepend><b-input-group-text><i class=\"icon-user\"></i></b-input-group-text></b-input-group-prepend>\n                    <b-form-input type=\"text\" :class=\"errorUsername\" v-model=\"username\" class=\"form-control\" :placeholder=\"$t('m.login.p_username')\" autocomplete=\"username email\" @keyup.enter.native=\"handleLogin\" />\n                  </b-input-group>\n                  <b-input-group class=\"mb-4\">\n                    <b-input-group-prepend><b-input-group-text><i class=\"icon-lock\"></i></b-input-group-text></b-input-group-prepend>\n                    <b-form-input type=\"password\" class=\"form-control\" :class=\"errorPass\" v-model=\"password\" :placeholder=\"$t('m.login.p_password')\" autocomplete=\"current-password\" @keyup.enter.native=\"handleLogin\" />\n                  </b-input-group>\n                  <b-row>\n                    <b-col cols=\"6\">\n                      <b-button @click=\"handleLogin\" variant=\"primary\" class=\"px-4\">{{ $t('m.login.title2') }}</b-button>\n                    </b-col>\n                    <b-col cols=\"6\" class=\"text-right\">\n                      <b-button variant=\"link\" class=\"px-0\" @click=\"$router.push('/forget-password')\">{{ $t('m.login.forgot_password') }}</b-button>\n                    </b-col>\n                  </b-row>\n                </b-form>\n              </b-card-body>\n            </b-card>\n            <b-card no-body class=\"text-white bg-primary py-5 d-md-down-none card-wi\">\n              <b-card-body class=\"text-center\">\n                <div>\n                  <h2>{{ $t('m.login.title3') }}</h2>\n                  <p>{{ $t('m.login.r_desc') }}</p>\n                </div>\n              </b-card-body>\n            </b-card>\n          </b-card-group>\n        </b-col>\n      </b-row>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport httpclient from '../../utils/httpclient';\nimport {saveTokenExpireAt, saveUserInfo,saveUserId} from '../../utils/token'\n\nexport default {\n  name: 'Login',\n  data(){\n    return {\n      username: '',\n      password: '',\n      errorUsername: '',\n      errorPass: ''\n    }\n  },\n  methods: {\n    handleLogin(){\n      this.errorUsername = \"\";\n      this.errorPass = \"\";\n      if (!this.username || this.username.indexOf(\"@\") < 1) {\n        this.errorUsername = \"is-invalid\";\n        return;\n      }\n      if (!this.password || this.password.length < 6) {\n        this.errorPass = \"is-invalid\";\n        return;\n      }\n      httpclient.post('/api/v1/login',{\n        username: this.username,\n        password: this.password\n      }).then((response)=>{\n        localStorage.setItem(\"user_info\", JSON.stringify(response.data.data.user));\n        localStorage.setItem(\"role\", response.data.data.user.roleCode);\n        this.$store.dispatch(\"user_info\", response.data.data.user);\n        saveTokenExpireAt(response.data.data.token.expireAt);\n        saveUserInfo(response.data.data.user.userEmail);\n        saveUserId(response.data.data.user.userId);\n        this.$router.push({ path: '/index'});\n      }).catch((err) => {\n          alert(\"Login Failed, Username or Password Incorrect!\")\n      })\n\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .logo {\n    text-align: center;\n    p {\n      font-size: 32px;\n      margin: 20px 0;\n    }\n  }\n  .card-wi {\n    width:44%;\n  }\n</style>\n"]}]}