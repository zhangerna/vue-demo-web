{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/components/searchMapForGaoDe.vue?vue&type=style&index=0&id=a670257e&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/components/searchMapForGaoDe.vue","mtime":1563349917000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#gaode-map {\n    width: 100%;\n    height: 65vh;\n    .amap-info-contentContainer {\n        width: 100%;\n        border-radius: 10px;\n        .amap-info-content{\n            padding: 20px 10px 0;\n        }\n        .amap-info-close{\n            right:10px !important;\n        }\n    }\n}\n.map-btn-group {\n    position: absolute;\n    margin-top: 10px;\n    z-index: 1;\n    margin-left: 20px;\n    ul {\n        color: grey;\n        padding: 0 20px;\n        height: 40px;\n        line-height: 40px;\n        background: #ffffff;\n        font-size: 18px;\n        li {\n            cursor: pointer;\n            display: inline-block;\n        }\n    }\n}\n.content-window-card {\n    position: relative;\n    box-shadow: none;\n    bottom: 0;\n    left: 0;\n    width: auto;\n    padding: 0;\n}\n\n.content-window-card p {\n    height: 2rem;\n}\n\n.custom-info {\n    border: solid 1px silver;\n}\n\ndiv.info-top {\n    position: relative;\n    background: none repeat scroll 0 0 #F9F9F9;\n    border-bottom: 1px solid #CCC;\n    border-radius: 5px 5px 0 0;\n}\n\ndiv.info-top div {\n    display: inline-block;\n    color: #333333;\n    font-size: 14px;\n    font-weight: bold;\n    line-height: 31px;\n    padding: 0 10px;\n}\n\ndiv.info-top img {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    transition-duration: 0.25s;\n}\n\ndiv.info-top img:hover {\n    box-shadow: 0px 0px 5px #000;\n}\n\ndiv.info-middle {\n    font-size: 12px;\n    padding: 10px 6px;\n    line-height: 20px;\n}\n\ndiv.info-bottom {\n    height: 0px;\n    width: 100%;\n    clear: both;\n    text-align: center;\n}\n\ndiv.info-bottom img {\n    position: relative;\n    z-index: 104;\n}\n\nspan {\n    margin-left: 5px;\n    font-size: 11px;\n}\n\n.info-middle img {\n    float: left;\n    margin-right: 6px;\n}\n\n\n",{"version":3,"sources":["searchMapForGaoDe.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"searchMapForGaoDe.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"searchGaode\">\n        <div class=\"map-btn-group\">\n            <ul>\n                <li @click=\"changeMapType('default')\">地图 |</li>\n                <li @click=\"changeMapType('sate')\">&nbsp;卫星图像</li>\n            </ul>\n        </div>\n        <div class=\"amap\" id=\"gaode-map\">\n\n        </div>\n    </div>\n</template>\n\n<script>\n    import { wgs84ToGcjo2,calCenter } from \"@/utils/coordtransform\"\n    import AMap from 'AMap'\n    export default {\n        name: \"SearchMapForGaode\",\n        props: [\"map\"],\n        data() {\n            return {\n                mapInfo: {\n                    lots:[],\n                    lat:0,\n                    lng:0,\n                    vehicleInfo:[],\n                    showMult:true\n                },\n                lat: \"\",\n                lng: \"\",\n                myMap:{},\n                myInfoWindow:null,\n                safeLayer: null,\n                roadLayer: null\n            }\n        },\n        watch: {\n            map: function (newVal) {\n                this.mapInfo.lots = newVal.lots;\n                this.mapInfo.vehicleInfo = newVal.vehicles;\n                this.getMyMap();\n            }\n        },\n        mounted(){\n            this.getMyMap()\n        },\n        methods: {\n            changeMapType(type) {\n                if (type == 'default') {\n                    this.roadLayer.hide();\n                    this.safeLayer.hide();\n                } else {\n                    this.roadLayer.show();\n                    this.safeLayer.show();\n                }\n            },\n            getMyMap(){\n                let centerPoint;\n                let _arr = [];\n                if(this.mapInfo.vehicleInfo.length > 0){\n                    this.mapInfo.vehicleInfo.map(item => {\n                        if(item.lastLocationLat && item.lastLocationLng ){\n                            _arr.push({\n                                lng: item.lastLocationLng,\n                                lat: item.lastLocationLat\n                            })\n                        }\n                    });\n                    centerPoint = calCenter(_arr);\n                }\n\n                this.myMap = new AMap.Map(\"gaode-map\", {//实例化一个地图\n                    zoom: 12,\n                    center: centerPoint\n                });\n                this.safeLayer = new AMap.TileLayer.Satellite({\n                });\n                this.roadLayer = new AMap.TileLayer.RoadNet({\n                });\n                this.myMap.add(this.safeLayer);\n                this.myMap.add(this.roadLayer);\n                let area2 = [];\n                if(this.mapInfo.lots.length > 0){\n                    this.mapInfo.lots.map(item => {//给地图加上指定停车红色区域\n                        let myArr=[];\n                        item.areaCoordinate.map(val =>{\n                            let temp = val.split(\",\");\n                            myArr.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1]) ))\n                        });\n                        area2.push(myArr)\n                    });\n                }\n\n                let polygon = new AMap.Polygon({//给地图加上指定停车红色区域\n                    path: area2,\n                    strokeColor: '#FF0000',\n                    strokeOpacity: 0.8,\n                    strokeWeight: 2,\n                    fillColor: '#FF0000',\n                    fillOpacity: 0.35\n                });\n                this.myMap.add(polygon);\n                this.myInfoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, 0)});//初始化地图infoWindow\n                if (this.mapInfo.showMult) {\n                    this.mapInfo.vehicleInfo.map(item => {\n                        if(item.lastLocationLat && item.lastLocationLng ){\n                            let lnglat = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n                            let contentString = `<div>\n                                <img style=\"background: #3a4149\" src=\"${item.photoUrl ? item.photoUrl : '/img/placeholder.5367544d.svg'}\" width=\"100%\" alt=\"\">\n                           <a href='/vehicle/detail/${item.vehicleId}'><h5 id=\"firstHeading\" class=\"firstHeading\">${item.year ? item.year :'N/A'} ${item.make ? item.make :'N/A'} ${item.model ? item.model:'N/A'} - ${item.alias? item.alias:'N/A'}</h5>\n                            <p>${this.getYMDString(item.locationTime)}</p>\n                            </a></div>`;\n                            let marker = new AMap.Marker({\n                                position: lnglat,\n                                map: this.myMap,\n                                icon: new AMap.Icon({\n                                    image: \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\",\n                                    size: new AMap.Size(60, 60),\n                                    imageSize: new AMap.Size(20,30),\n                                })\n                            });\n                            marker.content = contentString;\n                            marker.on('click', this.markerClick);\n                        }\n                    })\n                }\n                this.myMap.setFitView();\n            },\n            markerClick(e) {//地图标记点击事件\n                this.myInfoWindow.setContent(e.target.content);\n                this.myInfoWindow.open(this.myMap, e.target.getPosition());\n            },\n            getYMDString(time) {//格式化时间\n                var date = new Date(time);\n                var Y = date.getFullYear() + ' ';\n                var M = (date.getMonth() + 1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1);\n                var D = date.getDate() < 10 ? '0' + date.getDate() : date.getDate() ;\n                var h = date.getHours() < 10 ? '0' + date.getHours() : date.getHours() ;\n                var m = date.getMinutes() < 10 ? '0' + date.getMinutes()  : date.getMinutes();\n                return  M + '/' + D + '/' + Y + ' ' + h +':'+ m +  ' ';\n            },\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    #gaode-map {\n        width: 100%;\n        height: 65vh;\n        .amap-info-contentContainer {\n            width: 100%;\n            border-radius: 10px;\n            .amap-info-content{\n                padding: 20px 10px 0;\n            }\n            .amap-info-close{\n                right:10px !important;\n            }\n        }\n    }\n    .map-btn-group {\n        position: absolute;\n        margin-top: 10px;\n        z-index: 1;\n        margin-left: 20px;\n        ul {\n            color: grey;\n            padding: 0 20px;\n            height: 40px;\n            line-height: 40px;\n            background: #ffffff;\n            font-size: 18px;\n            li {\n                cursor: pointer;\n                display: inline-block;\n            }\n        }\n    }\n    .content-window-card {\n        position: relative;\n        box-shadow: none;\n        bottom: 0;\n        left: 0;\n        width: auto;\n        padding: 0;\n    }\n\n    .content-window-card p {\n        height: 2rem;\n    }\n\n    .custom-info {\n        border: solid 1px silver;\n    }\n\n    div.info-top {\n        position: relative;\n        background: none repeat scroll 0 0 #F9F9F9;\n        border-bottom: 1px solid #CCC;\n        border-radius: 5px 5px 0 0;\n    }\n\n    div.info-top div {\n        display: inline-block;\n        color: #333333;\n        font-size: 14px;\n        font-weight: bold;\n        line-height: 31px;\n        padding: 0 10px;\n    }\n\n    div.info-top img {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        transition-duration: 0.25s;\n    }\n\n    div.info-top img:hover {\n        box-shadow: 0px 0px 5px #000;\n    }\n\n    div.info-middle {\n        font-size: 12px;\n        padding: 10px 6px;\n        line-height: 20px;\n    }\n\n    div.info-bottom {\n        height: 0px;\n        width: 100%;\n        clear: both;\n        text-align: center;\n    }\n\n    div.info-bottom img {\n        position: relative;\n        z-index: 104;\n    }\n\n    span {\n        margin-left: 5px;\n        font-size: 11px;\n    }\n\n    .info-middle img {\n        float: left;\n        margin-right: 6px;\n    }\n\n\n</style>"]}]}