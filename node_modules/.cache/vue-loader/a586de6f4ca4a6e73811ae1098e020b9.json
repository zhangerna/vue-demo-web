{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/device.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/device.vue","mtime":1560922401000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.device {\n    .link-bind {\n        float: right;\n    }\n    td {\n        height: 44px;\n        line-height: 44px;\n    }\n    .vin-class {\n        color: #20a8d8;\n        cursor: pointer;\n        &:hover{\n            text-decoration: underline;\n        }\n    }\n    .placeholder {\n        margin-right: 4px;\n    }\n}\n",{"version":3,"sources":["device.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"device.vue","sourceRoot":"src/views/dashboard/dashboardMain","sourcesContent":["<template>\n    <div class=\"animated fadeIn device\">\n        <b-card>\n            <div slot=\"header\">\n                <i class=\"nav-icon cui-tablet\"></i>\n                Devices\n                <button class=\"btn btn-sm btn-primary link-bind\" @click=\"$router.push('/vehicle/bind')\">\n                    <i class=\"fa fa-wrench\"></i>\n                    Device Installaction\n                </button>\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline table-responsive-sm\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"vin\" slot-scope=\"data\">\n                        <span class=\"vin-class\" @click=\"$router.push('/vehicle/detail/' + data.item.id)\">{{ data.item.vin }}</span>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <template v-if=\"data.item.vin != 'N/A'\">\n                            <div class=\"btn btn-sm btn-danger placeholder\" @click=\"unpairVehicle(data.item.vin, data.item.imei)\">\n                                <i class=\"fa fa-close\"></i> Unpair\n                            </div>\n                        </template>\n                        <template v-else>\n                            <div class=\"btn btn-sm btn-primary placeholder\" @click=\"$router.push({name: 'BindVehicle', query: {deviceMac: data.item.imei}})\">\n                                <i class=\"fa fa-close\"></i> Install\n                            </div>\n                        </template>\n                        <div class=\"btn btn-sm btn-danger btn-del\" @click=\"delIdM(data.item.deviceId)\">\n                            <i class=\"cui cui-trash\" ></i>Delete Device\n                        </div>\n                    </template>\n                </b-table>\n            </div>\n        </b-card>\n\n\n        <b-row>\n            <b-col sm=\"4\" lg=\"4\">\n                <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                    Showing {{10 * (currentPage - 1) + 1 }} to {{currentPage === totalPages? total :currentPage * 10 }} of {{total}} entries\n                </div>\n            </b-col>\n            <b-col sm=\"8\" lg=\"8\">\n                <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"10\" @input=\" changePage(currentPage)\"></b-pagination>\n            </b-col>\n        </b-row>\n\n        <model\n                :show=\"show\"\n                :title=\"title\"\n                :content=\"content\"\n                :buttonText=\"btnGroup\"\n                @closeRemindBox=\"closeBox\"\n            ></model>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .device {\n        .link-bind {\n            float: right;\n        }\n        td {\n            height: 44px;\n            line-height: 44px;\n        }\n        .vin-class {\n            color: #20a8d8;\n            cursor: pointer;\n            &:hover{\n                text-decoration: underline;\n            }\n        }\n        .placeholder {\n            margin-right: 4px;\n        }\n    }\n</style>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import model from \"@/components/model\";\n    export default {\n        name: \"device\",\n        inject: ['reload'],\n        components: {\n            model\n        },\n        data(){\n            return {\n                tableFields: {\n                    imei: {\n                        label: \"IMEI\",\n                        class: \"text-center\"\n                    },\n                    vin: {\n                        label: \"Related Vehicle VIN\",\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: \"Related Vehicle VIN\",\n                        class: \"Actions\"\n                    }\n                },\n                table: null,\n                currentPage: 1,\n                pageSize: 10,\n                total: 0,\n                totalPages:0,\n                show: false,\n                unpairVin: '',\n                title: '',\n                content: '',\n                btnGroup: {btnFirst:'Cancel', btnSecond: 'OK'},\n                delId: '',\n                currentOpa: false\n\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage, this.pageSize);\n        },\n        methods: {\n            initData(page) {\n                httpClient.post(`/api/v1/vehicle/listBindDevice?pageNo=${page}&pageSize=${this.pageSize}`).\n                then(response => {\n                    this.currentPage = response.data.data.pageNo;\n                    this.total = response.data.data.rowCount;\n                    this.filterData(response.data.data);\n                    this.totalPages = response.data.data.totalPages\n                })\n            },\n            filterData(data) {\n                this.table = data.datas.map((item) => {\n                    return {\n                        imei: item.deviceMac,\n                        vin: item.vin ? item.vin : 'N/A',\n                        id: item.vehicleId,\n                        deviceId: item.deviceId,\n                    }\n                });\n\n            },\n            changePage(page) {\n                this.initData(page, this.pageSize);\n            },\n            unpairVehicle(id, imei){\n                this.unpairVin = {\n                    vin: id,\n                    deviceMac: imei\n                };\n                this.currentOpa = 'unpair';\n                this.show = true;\n                this.title = 'Confirm';\n                this.content = 'Are you sure to unpair the device and vehicle ?';\n            },\n            unbindVIn() {\n                httpClient.post('/api/v1/vehicle/unbind/device', {\n                    deviceMac: this.unpairVin.deviceMac,\n                    vin: this.unpairVin.vin\n                }).then(response => {\n                    if (response.data.code == 200) {\n                        this.reload();\n                    } else {\n                        this.show = true;\n                        this.title = 'Error';\n                        this.content = 'unbind error';\n                        this.btnGroup.btnSecond = '';\n                    }\n                })\n            },\n            delDevice() {\n                httpClient.post('/api/v1/device/delete', {\n                    deviceId: this.delId\n                }).then(response => {\n                    if (response.data.code == 200) {\n                        this.reload();\n                    } else {\n                        this.show = true;\n                        this.title = 'Error';\n                        this.content = 'delete error';\n                        this.btnGroup.btnSecond = '';\n                    }\n                })\n            },\n            closeBox(type) {\n                if (type) {\n                    this.currentOpa == \"del\" ? this.delDevice() : this.unbindVIn();\n                } else {\n                    this.show = false;\n                }\n            },\n            delIdM(id) {\n                this.delId = id;\n                this.currentOpa = 'del';\n                this.show = true;\n                this.title = 'Warning';\n                this.content = 'Are you sure to delete the device?';\n            }\n        }\n    }\n</script>"]}]}