{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/components/amap.vue?vue&type=style&index=0&id=606ddfeb&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/components/amap.vue","mtime":1563348269000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n.amap-info-contentContainer {\n    width: 66%;\n    background:#ffffff;\n    border-radius: 10px;\n}\n.maps {\n    .map-btn-group {\n        position: absolute;\n        margin-top: 10px;\n        z-index: 1;\n        margin-left: 20px;\n        ul {\n            color: grey;\n            padding: 0 20px;\n            height: 40px;\n            line-height: 40px;\n            background: #ffffff;\n            font-size: 18px;\n            li {\n                cursor: pointer;\n                display: inline-block;\n            }\n        }\n    }\n    #map {\n        height: 70vh;\n        width: 100%;\n    }\n    .my-map{\n        height: 70vh;\n        width: 100%;\n        .amap-info-contentContainer {\n            width: 66%;\n            background:#ffffff;\n            border-radius: 10px;\n        }\n    }\n}\n",{"version":3,"sources":["amap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"amap.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"maps\">\n        <div class=\"map-btn-group\">\n            <ul>\n                <li @click=\"changeMapType('default')\">地图 |</li>\n                <li @click=\"changeMapType('sate')\">&nbsp;卫星图像</li>\n            </ul>\n        </div>\n        <div class=\"amap my-map\" :id=\"elId ? elId :'map'\">\n        </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n    .amap-info-contentContainer {\n        width: 66%;\n        background:#ffffff;\n        border-radius: 10px;\n    }\n    .maps {\n        .map-btn-group {\n            position: absolute;\n            margin-top: 10px;\n            z-index: 1;\n            margin-left: 20px;\n            ul {\n                color: grey;\n                padding: 0 20px;\n                height: 40px;\n                line-height: 40px;\n                background: #ffffff;\n                font-size: 18px;\n                li {\n                    cursor: pointer;\n                    display: inline-block;\n                }\n            }\n        }\n        #map {\n            height: 70vh;\n            width: 100%;\n        }\n        .my-map{\n            height: 70vh;\n            width: 100%;\n            .amap-info-contentContainer {\n                width: 66%;\n                background:#ffffff;\n                border-radius: 10px;\n            }\n        }\n    }\n</style>\n\n<script>\n    import { wgs84ToGcjo2 } from \"@/utils/coordtransform\"\n    import AMap from 'AMap'\n    export default {\n        name: \"amap\",\n        props: [\"map\",\"elId\"],\n        data() {\n            return {\n                mapInfo: null,\n                mapObj: null,\n                marker: null,\n                polygon: null,\n                markers: [],\n                lat: \"\",\n                lng: \"\",\n                infoWindow: null,\n                safeLayer: null,\n                roadLayer: null\n            }\n        },\n        watch: {\n          map: function (newVal) {\n              this.mapInfo = newVal;\n              this.initMap();\n          }\n        },\n        methods: {\n            addMarker(position, title, contentString) {\n                let marker = new AMap.Marker({\n                    position: position,\n                    map: this.mapObj,\n                    icon: new AMap.Icon({\n                        image: \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\",\n                        size: new AMap.Size(60, 60),\n                        imageSize: new AMap.Size(20,30),\n                    })\n\n                });\n                if (contentString) {\n                    let infoWindow = new AMap.InfoWindow({\n                        isCustom: true,\n                        content:contentString,\n                        offset: new AMap.Pixel(16, -45)\n                    });\n                    marker.on('click', function (e) {\n                        infoWindow.open(window.mapObj, e.target.getPosition());\n                    });\n                }\n            },\n            changeMapType(type) {\n                if (type == 'default') {\n                    this.roadLayer.hide();\n                    this.safeLayer.hide();\n                } else {\n                    this.roadLayer.show();\n                    this.safeLayer.show();\n                }\n            },\n            initMap() {\n                let lnglat = wgs84ToGcjo2(this.mapInfo.lng, this.mapInfo.lat);\n                this.mapObj = new AMap.Map(this.elId ? this.elId :'map', {\n                    center: lnglat,\n                    zoom: 17\n                });\n                this.safeLayer = new AMap.TileLayer.Satellite({\n                });\n                this.roadLayer = new AMap.TileLayer.RoadNet({\n                });\n                this.mapObj.add(this.safeLayer);\n                this.mapObj.add(this.roadLayer);\n\n                window.mapObj = this.mapObj;\n                let area2 = [];\n                this.mapInfo['area'] ? this.mapInfo['area'].map(function (item) {\n                    let temp = item.split(\",\")\n                    area2.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1]) ))\n                }) : '';\n                let polygon = new AMap.Polygon({\n                    path: area2,\n                    strokeColor: '#FF0000',\n                    strokeOpacity: 0.8,\n                    strokeWeight: 2,\n                    fillColor: '#FF0000',\n                    fillOpacity: 0.35\n                });\n                this.mapObj.add(polygon);\n                if (this.mapInfo.showMult) {\n                    this.mapInfo.vehicleInfo.map(item => {\n                        let temp = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n                        let title = `${item.year? item.year :'N/A'} ${item.make? item.make :'N/A'} ${item.model? item.model:'N/A'}`;\n                        let contentString = `<a href='/vehicle/detail/${item.vehicleId}'>\n                            <img style=\"background: #3a4149\" src=\"${item.photoPath ? item.photoPath : '/img/placeholder.5367544d.svg'}\" width=\"100%\">\n                            <h5 id=\"firstHeading\" class=\"firstHeading\">${item.year ? item.year :'N/A'} ${item.make ? item.make :'N/A'} ${item.model ? item.model:'N/A'}</h5>\n                            </a>`;\n                        this.addMarker(temp, title, contentString);\n                    })\n                } else {\n                    this.addMarker(lnglat, this.mapInfo.vehicleInfo, null);\n                }\n            }\n        }\n    }\n</script>"]}]}