{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/lots.vue?vue&type=style&index=0&id=6ca7170a&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/lots.vue","mtime":1576755060000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.margin2 {\n    margin-top: 2%;\n}\n.card {\n    width: 100%;\n}\n.my-table{\n    margin-bottom: 0;\n}\n.show-map {\n    .modal-dialog {\n        max-width: 80%;\n    }\n}\n.lots {\n    .card-header span {\n        margin-left: 10px;\n    }\n    .card-header {\n\n    }\n    th, td {\n        height: 44px;\n        line-height: 20px;\n    }\n}\n",{"version":3,"sources":["lots.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"lots.vue","sourceRoot":"src/views/dashboard/inventory","sourcesContent":["<template>\n    <div class=\"animated fadeIn lots\">\n        <b-card class=\"custom-header\">\n            <div slot=\"header\">\n                {{ $t('m.dashboard.lots') }}\n                <span class=\"float-right\">\n                      <button class=\"btn btn-sm btn-primary\" @click=\"$router.push('/inventory/lots/add')\">\n                        <i class=\"fa fa-plus-square\"></i>\n                        {{ $t('m.lots.b_add') }}\n                    </button>\n                </span>\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline my-table\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"parkingNum\" slot-scope=\"data\">\n                        {{ data.item.parkingNum | checkNan }}\n                    </template>\n                    <template slot=\"address\" slot-scope=\"data\">\n                        {{ data.item.country | checkNan }},{{ data.item.state | checkNan }},{{ data.item.city | checkNan }},{{ data.item.area && GLOBAL.APP_ENV == 'cn' ? data.item.area + ',' : '' }}{{ data.item.address | checkNan }}\n                    </template>\n                    <template slot=\"vehicles\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-success\" @click=\"linkVehicles(data.item.id)\">{{ data.item.vehicles }}</span>\n                    </template>\n                    <template slot=\"battery\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-danger\" @click=\"linkBattery(data.item.id)\">{{ data.item.battery }}</span>\n                    </template>\n                    <template slot=\"offline\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-secondary\" @click=\"linkSecondary(data.item.id)\">{{ data.item.offline }}</span>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <button v-b-tooltip.hover :title=\"$t('m.common.position_detail')\" class=\"btn btn-sm btn-success m-1 cursor\" @click=\"mapInfo(data.item.id)\">\n                            <i class=\"cui cui-location-pin\"></i>\n                        </button>\n                        <button v-b-tooltip.hover :title=\"$t('m.tooltip.check_detail')\" class=\"btn btn-sm btn-info cursor\" @click=\"$router.push('/inventory/lots/detail/' + data.item.id)\">\n                            <i class=\"fa fa-eye\"></i>\n                        </button>\n                        <button v-b-tooltip.hover :title=\"$t('m.common.edit')\" class=\"btn btn-sm btn-info  m-1\" @click=\"$router.push('/inventory/lots/edit/' + data.item.id)\">\n                            <i class=\"fa fa-edit\"></i>\n                        </button>\n                        <button v-b-tooltip.hover :title=\"$t('m.detail_shop.del_b')\" class=\"btn btn-sm btn-danger btn-del\" @click=\"delId(data.item.id)\">\n                            <i class=\"cui cui-trash\"></i>\n                        </button>\n                    </template>\n                </b-table>\n            </div>\n            <b-row v-if=\"total > 0\" class=\"margin2\">\n                <b-col sm=\"4\" lg=\"4\">\n                    <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                        {{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? total :currentPage * 10 }} {{ $t('m.common.of') }} {{total}} {{ $t('m.common.entries') }}\n                    </div>\n                </b-col>\n                <b-col sm=\"8\" lg=\"8\">\n                    <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"pageSize\" @input=\" changePage(currentPage)\"></b-pagination>\n                </b-col>\n            </b-row>\n        </b-card>\n\n        <b-modal ref=\"my-modal\" :title=\"tipTitle\" :ok-title=\"$t('m.tip.b_ok')\" v-model=\"showMap\" @ok=\"showMap = false\" class=\"show-map\" ok-only>\n            <myMap :map=\"map\" type=\"model\"></myMap>\n        </b-modal>\n        <model\n               :show=\"show\"\n               :title=\"$t('m.vehicle.actions_remind')\"\n               :content=\"$t('m.tip.confirm_del_lot')\"\n               :buttonText=\"btnGroup\"\n               @closeRemindBox=\"hideTip\"\n        ></model>\n        <model\n               :show=\"show2\"\n               :title=\"$t('m.vehicle.actions_remind')\"\n               :content=\"$t('m.vehicle.file_remind')\"\n               :buttonText=\"btnGroup2\"\n               @closeRemindBox=\"hideTip2\"\n        ></model>\n    </div>\n</template>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import myMap from '@/components/map';\n    import model from \"@/components/model\";\n    export default {\n        name: 'lots',\n        inject: ['reload'],\n        components: {\n            myMap,\n            model,\n        },\n        data() {\n            return {\n                currentPage: 1,\n                pageSize: 10,\n                table: null,\n                curDel: null,\n                show: false,\n                show2: false,\n                btnGroup: {\n                    btnFirst: this.$t('m.tip.b_cancel'),\n                    btnSecond: this.$t('m.tip.confirm')\n                },\n                btnGroup2: {\n                    btnFirst: '',\n                    btnSecond: this.$t('m.tip.b_ok')\n                },\n                tableFields: {\n                    parkingNum: {\n                        label: this.$t('m.lots.parkingNum'),\n                        class: \"text-center\"\n                    },\n                    name: {\n                        label: this.$t('m.lots.name'),\n                        class: \"text-center\"\n                    },\n                    address: {\n                        label: this.$t('m.lots.address'),\n                        class: \"text-center\"\n                    },\n                    storeName: {\n                        label: this.$t('m.lots.store_name'),\n                        class: \"text-center\"\n                    },\n                    dealership: {\n                        label: this.$t('m.common.dealership'),\n                        class: \"text-center\"\n                    },\n                    vehicles: {\n                        label: this.$t('m.lots.all_vehicle'),\n                        class: \"text-center\"\n                    },\n                    battery: {\n                        label: this.$t('m.alert.alert_type_1'),\n                        class: \"text-center\"\n                    },\n                    offline: {\n                        label: this.$t('m.common.offline'),\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: this.$t('m.vehicle.actions'),\n                        class: \"text-center\"\n                    }\n                },\n                total: 0,\n                totalPages:0,\n                tipTitle: '',\n                showMap: false,\n                map: {}\n\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage);\n        },\n        methods: {\n            initData(page) {\n                httpClient.get(`/api/v1/lot/page?pageNo=${page}`).then(response => {\n                    if (response.data.data) {\n                        this.total = response.data.data ? response.data.data.rowCount : 0;\n                        this.filterData(response.data.data);\n                        this.totalPages = response.data.data.totalPages;\n                    }\n                })\n            },\n            filterData(data){\n                this.table = data.datas.map(item => {\n                    return {\n                        name: item.parkingName,\n                        address: item.address,\n                        storeName: item.storeName,\n                        dealership: item.tenantName,\n                        vehicles: item.vehicleFilter.num,\n                        battery: item.lowBatteryFilter.num,\n                        offline: item.offLineFilter.num,\n                        country: item.parkingCountryName,\n                        state: item.parkingStateName,\n                        city: item.parkingCityName,\n                        area: item.parkingAreaName,\n                        id: item.id,\n                        parkingNum: item.parkingServiceNum\n                    }\n                });\n            },\n            delId(id) {\n                this.curDel = id;\n                this.show = true;\n            },\n            hideTip(type) {\n                if (type) {\n                    httpClient.post('/api/v1/lot/delete', {\n                        id: this.curDel\n                    }).then(() => {\n                        window.location.reload();\n                    }).catch(()=>{\n                        this.show = false;\n                        this.show2 = true;\n                    })\n\n                }else {\n                    this.show = false;\n                }\n                // this.show = false;\n            },\n            hideTip2 () {\n                this.show2 = false;\n            },\n            linkVehicles(id) {\n                let filter = `[{\"key\":\"parking\",\"value\":[\"${id}\"]}]`;\n                this.$router.push({name: 'VehicleList', query: {filters: filter}});\n            },\n            linkBattery(id) {\n                this.$router.push({name: 'VehicleList', query: {\n                    filters: `[{\"key\":\"parking\",\"value\":[\"${id}\"]},{\"key\":\"battery\",\"value\":[\"1\"]}]`\n                }});\n            },\n            linkSecondary(id) {\n                this.$router.push({name: 'VehicleList', query: {\n                    filters: `[{\"key\":\"parking\",\"value\":[\"${id}\"]},{\"key\":\"online\",\"value\":[\"2\"]}]`\n                }});\n            },\n            prevPage(){\n                this.initData(this.currentPage > 1  ? this.currentPage - 1 : 1)\n            },\n            nextPage(){\n                this.initData(this.currentPage >= this.pageCount  ? this.currentPage : this.currentPage + 1)\n            },\n            changePage(page) {\n                this.initData(page);\n            },\n            getVehicleList(id, area, centerCoor, packingName) {\n                httpClient.get('/api/v1/inlotvehiclelist', {\n                    params: {\n                        parkingId: id\n                    }\n                }).then(response => {\n                    let latlng = centerCoor.split(\" \");\n                    this.map = {\n                        lat: Number(latlng[1]),\n                        lng: Number(latlng[0]),\n                        area: area,\n                        vehicleInfo: response.data.data,\n                        showMult: true\n                    };\n                    this.tipTitle = packingName;\n                    this.showMap = true;\n                })\n            },\n            mapInfo(id) {\n                httpClient.get(\"/api/v1/lot/detail\", {\n                    params: {\n                        id: id\n                    }\n                }).then(response => {\n                    let data = response.data.data;\n                    this.getVehicleList(id, data.areaCoordinate, data.centerCoordinate, data.parkingName);\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .margin2 {\n        margin-top: 2%;\n    }\n    .card {\n        width: 100%;\n    }\n    .my-table{\n        margin-bottom: 0;\n    }\n    .show-map {\n        .modal-dialog {\n            max-width: 80%;\n        }\n    }\n    .lots {\n        .card-header span {\n            margin-left: 10px;\n        }\n        .card-header {\n\n        }\n        th, td {\n            height: 44px;\n            line-height: 20px;\n        }\n    }\n</style>\n"]}]}