{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testUserDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testUserDetail.vue","mtime":1570770081000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from \"@/utils/httpclient\";\nimport { getDateString, formatIdDate } from \"@/utils/date\";\n\nexport default {\n    name: \"testUserDetail\",\n    inject: ['reload'],\n    data() {\n        return {\n            data: {},\n            showMap: false,\n            map:{},\n            show: false,\n            updateInfo: '',\n            markedAt:'',\n            table: null,\n            tableFields: {\n                orderId: {\n                    label: this.$t('m.cloud.order_id'),\n                    class: \"text-center\"\n                },\n                vehicleInfo: {\n                    label: this.$t('m.cloud.vehicle_info'),\n                    class: \"text-center\"\n                },\n                testInfo: {\n                    label: this.$t('m.dashboard.test_point'),\n                    class: \"text-center\"\n                },\n                pointTime: {\n                    label: this.$t('m.cloud.rese_test_drive'),\n                    class: \"text-center\"\n                },\n                status: {\n                    label: this.$t('m.cloud.status'),\n                    class: \"text-center\"\n                }\n            },\n            idcardVerifyTime:null,\n            driverLicenseverifyTime:null,\n            currentPage:1,\n            totalPages:0,\n            total:0,\n            idcardBirthDate:null,\n            idcardExpireDate:null,\n            licenseBirthDate:null,\n            licenceFristGetTime:null,\n            licenseExpireDate:null,\n\n        }\n    },\n    mounted() {\n        httpClient.get('/api/v1/clouddrive/user/detail?userId='+this.$route.params.id)\n            .then(response => {\n            if (response.data.code == 200) {\n                this.data = response.data.data;\n                let res = response.data.data;\n                this.idcardVerifyTime = res.idCardResponse.certificationTime ? getDateString(res.idCardResponse.certificationTime) : '';\n                this.driverLicenseverifyTime = res.driveLicenseResponse.certificationTime ? getDateString(res.driveLicenseResponse.certificationTime) : '';\n                this.idcardBirthDate = res.idCardResponse.birthDate? formatIdDate(res.idCardResponse.birthDate):'N/A';\n                this.idcardExpireDate = res.idCardResponse.expireDate? formatIdDate(res.idCardResponse.expireDate):'N/A';\n                this.licenseBirthDate = res.driveLicenseResponse.birthDate ? formatIdDate(res.driveLicenseResponse.birthDate) : 'N/A';\n                this.licenceFristGetTime = res.driveLicenseResponse.initialDrivingLicenseDate ? formatIdDate(res.driveLicenseResponse.initialDrivingLicenseDate) : 'N/A';\n                this.licenseExpireDate = res.driveLicenseResponse.expireDate ? formatIdDate(res.driveLicenseResponse.expireDate) : 'N/A';\n            }\n        });\n        this.getUserOrderList(1)\n    },\n    methods: {\n        getUserOrderList(page){\n            let _page = page ? page:1;\n            httpClient.get('/api/v1/clouddrive/order/pagelistbyuser?duserid='+ this.$route.params.id+\"&pageNo=\"+_page)\n                .then(res => {\n                    if (res.data.code == 200) {\n                        this.filterData(res.data.data.datas ? res.data.data.datas : []);\n                        this.total = res.data.data.rowCount;\n                        this.totalPages = res.data.data.totalPages\n                    }\n                })\n        },\n        filterData(data) {\n            this.table = data.map((item) => {\n                let _status;\n                if(item.orderStatus){\n                    if(item.orderStatus === 10){\n                        _status = this.$t('m.cloud.wait_pick_up')\n                    }else if(item.orderStatus === 20){\n                        _status = this.$t('m.cloud.wait_return')\n                    }else if(item.orderStatus === 30){\n                        _status = this.$t('m.cloud.returned_vehicle')\n                    }else if(item.orderStatus === 40){\n                        _status = this.$t('m.cloud.complete')\n                    }else if(item.orderStatus === 50){\n                        _status = this.$t('m.cloud.canceled')\n                    }\n                }\n\n                return {\n                    orderId: item.orderServiceNum,\n                    vehicleInfo:item.vehicleYear+ \" \"+item.vehicleMake+ \" \"+ item.vehicleModel+\" \"+item.vehicleStockNum+\" \"+item.vehiclePlate,\n                    id: item.orderId,\n                    phone: item.phone,\n                    color: item.vehicleColor,\n                    alias: item.vehicleAlias,\n                    trim: item.vehicleTrim,\n                    plat: item.vehiclePlate,\n                    num: item.vehicleStockNum, // 库存编号\n                    testInfo: item.parkingName,\n                    pointTime: getDateString(item.appointmentStartTime),\n                    status: _status\n                }\n            });\n        },\n    }\n}\n",null]}