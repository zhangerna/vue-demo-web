{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/addVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/addVehicle.vue","mtime":1569468357000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n    name: \"addVehicle\",\n    components: {\n        model\n    },\n    data() {\n        return {\n            title: '',\n            content: '',\n            show: false,\n            showB: true,\n            vin: '',\n            vinIsVaild: false,\n            vinSuccess: false,\n            data: {},\n            year: '',\n            make: '',\n            alias:'',\n            trim: '',\n            engine: '',\n            price: '',\n            stock: '',\n            condition: '',\n            odometer: '',\n            model: '',\n            color: 'Black',\n            date: '',\n            plate: '',\n            photo: '',\n            changedLanguage:null,\n            disabled: false,\n            colorList: [{c: this.$t('m.colors.black'), y: \"Black\"}, {c: this.$t('m.colors.white'), y:'White'}, {c: this.$t('m.colors.silver'), y: 'Silver'}, {c: this.$t('m.colors.blue'), y: 'Blue'}, {c: this.$t('m.colors.red'), y: 'Red'}, {c: this.$t('m.colors.brown'), y: 'Brown'}, {c: this.$t('m.colors.gold'), y: 'Gold'}, {c: this.$t('m.colors.orange'), y: 'Orange'}, {c: this.$t('m.colors.yellow'), y: 'Yellow'}, {c: this.$t('m.colors.purple'), y: 'Purple'}, {c: this.$t('m.colors.green'), y: 'Green'}, {c: this.$t('m.colors.pink'), y: 'Pink'},{c: this.$t('m.colors.others'), y: 'Others'}],\n            conditionList: [{c: this.$t('m.common.c_new'), y: \"1\"}, { c: this.$t('m.common.c_used'), y: \"3\"}, { c: this.$t('m.common.c_demo'), y: \"2\" }],\n        }\n    },\n    mounted() {\n        if (this.$i18n.locale === 'en-US') {\n            this.changedLanguage = \"English\";\n        } else {\n            this.changedLanguage = 'Chinese';\n        }\n    },\n    watch: {\n        vin(curVal) {\n            if (curVal.length == 17) {\n                this.disabled = true;\n                httpClient.get('/api/v1/vehicle/detail/vin?vin=' + this.vin).then(response => {\n                    let _mileage = null;//距离单位转换\n                    if(response.data.data.odometer){\n                        if(this.changedLanguage === 'English'){\n                            _mileage = ((response.data.data.odometer * 0.0006214).toFixed(0))\n                        }else{\n                            _mileage = ((response.data.data.odometer / 1000).toFixed(0))\n                        }\n                    }else{\n                        _mileage = 0\n                    }\n                    this.vinSuccess = true;\n                    this.vinIsVaild = false;\n                    this.showB = false;\n                    this.data = response.data.data;\n                    this.year = this.data.year;\n                    this.make = this.data.make;\n                    this.model = this.data.model;\n                    this.alias = this.data.alias;\n                    this.trim = this.data.trim;\n                    this.engine = this.data.engineType;\n                    this.price = this.data.price;\n                    this.color = this.data.color;\n                    this.date = this.data.inventoryDays;\n                    this.stock = this.data.stockNumber;\n                    this.condition = this.data.vehicleTypeCode;\n                    this.odometer = _mileage;\n                    this.plate = this.data.plate;\n                    this.photo = this.data.photoPath;\n                }).catch(error => {\n                    this.vinIsVaild = false;\n                    this.vinSuccess = false;\n                    this.showB = false;\n                })\n            } else {\n                this.vinIsVaild = true;\n\n            }\n        }\n    },\n    methods: {\n        closeTip() {\n            this.show = false;\n        },\n        savefile(event) {\n            let file = event.target.files;\n            let fb = new FormData();\n            fb.append(\"image\", file[0]);\n            httpClient.post('/api/v1/uploadFile', fb).then(response => {\n                if (response.data.code == 200) {\n                    this.photo = response.data.data.path;\n                    this.title = this.$t('m.tip.suc');\n                    this.content = this.$t('m.tip.upload');\n                    this.show = true;\n                    this.showB = false;\n                }\n            }).catch(error => {\n                console.error(error)\n            })\n        },\n        saveData() {\n            let _mileage = null;//距离单位转换\n            if(this.odometer){\n                if(this.changedLanguage === 'English'){\n                    _mileage = ((this.odometer * 1609.344).toFixed(0))\n                }else{\n                    _mileage = ((this.odometer * 1000).toFixed(0))\n                }\n            }else{\n                _mileage = 0\n            }\n            httpClient.post('/api/v1/vehicle/insert/vehicle',{\n                vin: this.vin,\n                year: this.year,\n                make: this.make,\n                model: this.model,\n                alias:this.alias,\n                trim: this.trim,\n                engineType: this.engine,\n                color: this.color,\n                price: this.price,\n                stockNumber: this.stock,\n                inventoryDate: new Date(this.date).getTime(),\n                vehicleTypeCode: Number(this.condition),\n                currentMileage: _mileage,\n                plate: this.plate,\n                photoPath: this.photo\n\n            }).then(response => {\n                if (response.data.data.bindResult == true) {\n                    this.$router.push('/inventory/vehicle/detail/' + response.data.data.vehicleId);\n                }\n            })\n        }\n    }\n}\n",null]}