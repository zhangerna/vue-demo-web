{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/vehicleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/vehicleDetail.vue","mtime":1576639577000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpclient from \"@/utils/httpclient\";\nimport { getDateString, getDaysBetweenDate } from \"@/utils/date\";\nimport myMap from \"@/components/map\";\nimport Alert from \"@components/model\";\nimport \"@/utils/viewer\"; //该组件的js是预览图片组件，按需引用即可\n\nexport default {\n    name: \"vehicleDetail\",\n    components: {\n        myMap,\n        Alert\n    },\n    data() {\n        return {\n            btnGroup: {\n                btnFirst: \"Cancel\",\n                btnSecond: \"OK\"\n            },\n            data: {},\n            map: null,\n            searchGoogleMap: {},\n            mapPopup: null,\n            tipTitle: \"\",\n            showSoldVehicle: false,\n            soldVehicleStatus: false,\n            soldVehicleSuccess: false,\n            soldVehicleTransform: false,\n            installDeviceStatus: false,\n            installSuccess: false,\n            installStatus: false,\n            inputText: \"\",\n            soldVehicleContent: \"\",\n            soldVehicleHeader: \"\",\n            transferStatus: false,\n            transferContents: \"\",\n            transferTitle: \"\",\n            soldStatus: \"\",\n            soldOutC: \"\",\n            fields: {\n                operation: {\n                    key: \"operationType\",\n                    label: this.$t(\"m.common.action\")\n                },\n                vehicle: {\n                    key: \"vehicle\",\n                    label: this.$t(\"m.vehicle_detail.operator\")\n                },\n                time: {\n                    key: \"time\",\n                    label: this.$t(\"m.common.time\")\n                }\n            },\n            options: [],\n            selected: null,\n            items: [],\n            totalPages: 1,\n            currentPage: 1,\n            perPage: 10,\n            showDelMap: false,\n            rows: 1,\n            myCurrentMileage: null,\n            imeiIsVaild: false,\n            bUnpair: false,\n            showAlerts: {\n                title: \"\",\n                show: false,\n                content: \"\",\n                buttonText: \"\"\n            },\n            deviceMac: \"\",\n            vin: \"\",\n            isOnline: \"\"\n        };\n    },\n    watch: {\n        inputText(newV) {\n            if (newV.length === 15) {\n                this.imeiIsVaild = true;\n            } else {\n                this.imeiIsVaild = false;\n            }\n        }\n    },\n    mounted() {\n        if (this.$i18n.locale === \"en-US\") {\n            this.changedLanguage = \"English\";\n        } else {\n            this.changedLanguage = \"Chinese\";\n        }\n        let self = this;\n        httpclient\n            .get(\"/api/v1/vehicle/detail/id?vehicleId=\" + this.$route.params.id, {})\n            .then(response => {\n                self.data = response.data.data;\n                this.isOnline = response.data.data.isOnline;\n                this.deviceMac = response.data.data.deviceMac;\n                this.vin = response.data.data.vin;\n                let year = self.data.year ? self.data.year : \"N/A\";\n                let make = self.data.make ? self.data.make : \"N/A\";\n                let model = self.data.model ? self.data.model : \"N/A\";\n                let info = year == \"N/A\" && make == \"N/A\" && model == \"N/A\" ? \"N/A\" : year + \" \" + make + \" \" + model;\n                self.tipTitle = info;\n                self.map = {\n                    lat: self.data.lastLocationLat ? self.data.lastLocationLat : 0,\n                    lng: self.data.lastLocationLng ? self.data.lastLocationLng : 0,\n                    area: self.data.areaCoordinates ? self.data.areaCoordinates : [],\n                    vehicleInfo: info\n                };\n                self.mapPopup = {\n                    lat: self.data.lastLocationLat ? self.data.lastLocationLat : 0,\n                    lng: self.data.lastLocationLng ? self.data.lastLocationLng : 0,\n                    area: self.data.areaCoordinates ? self.data.areaCoordinates : [],\n                    vehicleInfo: info\n                };\n                let _mileage = null;\n                if (response.data.data.currentMileage) {\n                    if (self.changedLanguage === \"English\") {\n                        _mileage = (response.data.data.currentMileage * 0.0006214).toFixed(0);\n                    } else {\n                        _mileage = (response.data.data.currentMileage / 1000).toFixed(0);\n                    }\n                } else {\n                    _mileage = \"N/A\";\n                }\n                self.myCurrentMileage = _mileage;\n            })\n            .catch(err => {\n                // console.dir(err);\n                err;\n            });\n        this.getVehicleOperatorList(1);\n    },\n    methods: {\n        reloadPage() {\n            window.location.reload();\n        },\n        getDateString(data) {\n            return getDateString(data);\n        },\n        getDaysBetweenDate(data, time) {\n            return getDaysBetweenDate(data, time);\n        },\n        getVehicleOperatorList(page) {\n            let myVehicleId = this.$route.params.id;\n            let myLink = \"/api/v1/operationlog/listbyvehicleid?pageNo=\" + page + \"&vehicleId=\" + myVehicleId;\n            httpclient.get(myLink).then(res => {\n                let myData = res.data.data.datas;\n                this.items = myData;\n                this.searchGoogleMap = myData;\n                // this.currentPage = res.data.data.pageNo;\n                this.perPage = res.data.data.pageSize;\n                this.totalPages = res.data.data.totalPages;\n                this.rows = res.data.data.rowCount;\n                let myArr = [];\n                myData.map(item => {\n                    myArr.push({\n                        operationType: item.operationType,\n                        operator: item.userName,\n                        time: this.getDateString(item.createTime),\n                        userId: item.userId\n                    });\n                });\n                this.items = myArr;\n            });\n        },\n        turnToPage(p) {\n            this.getVehicleOperatorList(p ? p : 1);\n        },\n        showRegisterSold() {\n            this.soldOutC = this.$t(\"m.sold_vehicle.sold_content\", {\n                year: this.data.year ? this.data.year : \"N/A\",\n                make: this.data.make ? this.data.make : \"N/A\",\n                model: this.data.model ? this.data.model : \"N/A\",\n                alias: this.data.alias ? this.data.alias : \"N/A\",\n                stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n            });\n            this.showSoldVehicle = true;\n        },\n        delData() {\n            this.showDelMap = true;\n        },\n        apiDel() {\n            //删除车辆\n            httpclient\n                .post(\"/api/v1/vehicle/delete\", {\n                    vehicleId: this.$route.params.id\n                })\n                .then(response => {\n                    if (response.data.code == 200) {\n                        this.showDelMap = !this.showDelMap;\n                        // this.reload();\n                        this.$router.push(\"/inventory/vehicle/list\");\n                    }\n                });\n        },\n        registerSold() {\n            //确认登记售出\n            let vehicleId = this.$route.params.id;\n            httpclient.post(\"/api/v1/vehicle/sale\", { vehicleId: vehicleId }).then(res => {\n                if (res.data.code === 200 && res.data.data.result) {\n                    this.soldVehicleSuccess = true;\n                    this.soldVehicleStatus = true;\n                    this.data.soldVehicleContent = this.$t(\"m.sold_vehicle.sold_content_success\", {\n                        year: this.data.year ? this.data.year : \"N/A\",\n                        make: this.data.make ? this.data.make : \"N/A\",\n                        model: this.data.model ? this.data.model : \"N/A\",\n                        alias: this.data.alias ? this.data.alias : \"N/A\",\n                        stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n                    });\n                    this.data.soldVehicleHeader = this.$t(\"m.sold_vehicle.sold_header_success\");\n                } else {\n                    this.soldVehicleSuccess = false;\n                    this.soldVehicleStatus = true;\n                    this.data.soldVehicleContent = this.$t(\"m.sold_vehicle.sold_content_fail\", {\n                        year: this.data.year ? this.data.year : \"N/A\",\n                        make: this.data.make ? this.data.make : \"N/A\",\n                        model: this.data.model ? this.data.model : \"N/A\",\n                        alias: this.data.alias ? this.data.alias : \"N/A\",\n                        stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n                    });\n                    this.data.soldVehicleHeader = this.$t(\"m.sold_vehicle.sold_header_fail\");\n                }\n            });\n        },\n        goBackToList() {\n            //回到列表\n            if (this.soldVehicleSuccess) {\n                this.$router.push(\"/inventory/vehicle/list\");\n            }\n        },\n        confirmTransformVehicle() {\n            //车辆转移确认\n            if (this.selected !== null) {\n                let _name = \"\";\n                this.options.map(item => {\n                    if (item.value === this.selected) {\n                        _name = item.text;\n                    }\n                });\n                let data = {\n                    vehicleId: this.$route.params.id,\n                    transferStoreId: this.selected\n                };\n                httpclient.post(\"/api/v1/vehicle/transfer\", data).then(res => {\n                    this.transferStatus = true;\n                    if (res.data.code === 200 && res.data.data.result === true) {\n                        this.transferTitle = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_header_success\");\n                        this.transferContents = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_content_success\", {\n                            year: this.data.year ? this.data.year : \"N/A\",\n                            make: this.data.make ? this.data.make : \"N/A\",\n                            model: this.data.model ? this.data.model : \"N/A\",\n                            alias: this.data.alias ? this.data.alias : \"N/A\",\n                            storeName: _name,\n                            stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n                        });\n                    } else {\n                        this.transferTitle = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_header_fail\");\n                        this.transferContents = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_content_fail\");\n                    }\n                });\n            }\n        },\n        showTransformVehicle() {\n            //弹出车辆转移的弹窗，获取门店列表\n            this.soldVehicleTransform = true;\n            httpclient.get(\"/api/v1/store/listbyself?vehicleid=\" + this.$route.params.id).then(res => {\n                if (res.data.code === 200 && res.data.data.length) {\n                    this.options.length = 0;\n                    this.options.push({\n                        value: null,\n                        text: this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_options\"),\n                        disabled: true\n                    });\n                    res.data.data.map(item => {\n                        this.options.push({\n                            value: item.storeId,\n                            text: item.storeName\n                        });\n                    });\n                }\n            });\n        },\n        afterTransfer() {\n            //转移成功，跳转到vehicle-list\n            if (this.transferStatus) {\n                this.$router.push(\"/inventory/vehicle/list\");\n            }\n        },\n        hideModal() {\n            this.showDelMap = !this.showDelMap;\n        },\n        showBindInfo() {\n            this.installDeviceStatus = !this.installDeviceStatus;\n        },\n        installDevice() {\n            httpclient\n                .post(\"/api/v1/clouddrive/device/box/bind\", {\n                    deviceImei: this.inputText,\n                    vehicleId: this.$route.params.id,\n                    deviceType: 1\n                })\n                .then(res => {\n                    if (res.data.code === 200 && res.data.data.result) {\n                        this.installStatus = true;\n                        this.installSuccess = true;\n                        // window.location.reload();\n                    } else {\n                        this.installStatus = false;\n                        this.installSuccess = true;\n                    }\n                });\n        },\n        unPairdevice() {\n            //设备解绑，未绑定的设备，按钮不显示\n            let link = \"/api/v1/vehicle/unbind/device\";\n            let self = this;\n            let data = {\n                deviceMac: this.deviceMac,\n                vin: this.vin\n            };\n            httpclient\n                .post(link, data)\n                .then(function(res) {\n                    if (res.data.code === 200) {\n                        let passData = {\n                            title: self.$t(\"m.tip.info\"),\n                            show: true,\n                            content: self.$t(\"m.tip.vehicle_unpair_success\"),\n                            buttonText: {\n                                btnFirst: \"\",\n                                btnSecond: self.$t(\"m.tip.b_ok\")\n                            }\n                        };\n                        self.closeRemind(passData);\n                        // window.location.reload()\n                    }\n                })\n                .catch(function(err) {\n                    if (err) {\n                        let passData = {\n                            title: self.$t(\"m.tip.info\"),\n                            show: true,\n                            content: self.$t(\"m.tip.vehicle_unpair_failed\"),\n                            buttonText: {\n                                btnFirst: \"\",\n                                btnSecond: self.$t(\"m.tip.b_ok\")\n                            }\n                        };\n                        self.closeRemind(passData);\n                    }\n                });\n        },\n        closeRemind(data) {\n            this.showAlerts.show = data.show;\n            this.showAlerts.title = data.title;\n            this.showAlerts.content = data.content;\n            this.showAlerts.buttonText = data.buttonText;\n            // window.location.reload()\n        },\n        closeBox() {\n            //子组件来请求父组件关闭弹窗\n            this.showAlerts.show = !this.showAlerts.show;\n            window.location.reload();\n            if (this.updateDetail === \"update\") {\n                //如果是update车辆信息，成功后到详情页面\n                this.$router.push(\"/test-drive/test-vehicle/detail/\" + this.id);\n            }\n        }\n    }\n};\n",{"version":3,"sources":["vehicleDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8ZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vehicleDetail.vue","sourceRoot":"src/views/dashboard/inventory","sourcesContent":["<template>\n    <div class=\"animated fadeIn vehicle-detail\">\n        <b-card class=\"custom-header\">\n            <div slot=\"header\">\n                {{ $t(\"m.common.detail\") }}\n                <div class=\"float-right\">\n                    <b-button class=\"btn btn-sm btn-info mr-2 text-white\" @click=\"$router.push('/inventory/vehicle/edit/' + $route.params.id)\">\n                        {{ $t(\"m.common.edit\") }}\n                    </b-button>\n\n                    <template v-if=\"$store.state.userInfo.roleCode === 'manager' || $store.state.userInfo.roleCode === 'root'\">\n                        <b-button v-if=\"GLOBAL.APP_ENV == 'en'\" @click=\"showRegisterSold()\" class=\"btn btn-sm btn-info mr-2 text-white\">{{ $t('m.sold_vehicle.w_sold') }}\n                        </b-button>\n                        <b-button @click=\"showTransformVehicle()\" class=\"btn btn-sm btn-info mr-2 text-white\">\n                            {{ $t(\"m.sold_vehicle.v_trans\") }}\n                        </b-button>\n                    </template>\n                </div>\n            </div>\n            <b-row>\n                <b-col sm=\"6\" class=\"left\">\n                    <div class=\"border-dark border\" v-if=\"data\">\n                        <b-row>\n                            <b-col sm=\"12\" lg=\"12\" class=\"title\">\n                                {{ data.year && data.year != \"null\" ? data.year : \"N/A\" }}\n                                {{ data.make && data.make != \"null\" ? data.make : \"N/A\" }}\n                                {{ data.model && data.model != \"null\" ? data.model : \"N/A\" }}{{ data.alias && data.alias != \"null\" ? \" - \" + data.alias : \"\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.last_location\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.lastLocation ? data.lastLocation : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.last_update\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.lastUpdateTime ? getDateString(data.lastUpdateTime) : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.lot\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.outStatus == 2 ? $t(\"m.vehicle_detail.off_lot\") : data.parkingLot ? data.parkingLot : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row v-if=\"data.checkedInBy\">\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.vehicle_detail.check_by\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.checkedInBy }}\n                            </b-col>\n                        </b-row>\n                        <b-row v-if=\"data.checkedInAt\">\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.vehicle_detail.check_at\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ this.getDateString(data.checkedInAt) }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.line_status\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                <span v-if=\"isOnline === 1\" class=\"online-success\">{{ $t(\"m.common.online\") }}</span>\n                                <span v-if=\"isOnline === 2\" class=\"online-danger\">{{ $t(\"m.common.offline\") }}</span>\n                                <span v-if=\"isOnline === 3\" class=\"online-gray\">{{ $t(\"m.vehicle.unbound\") }}</span>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.voltage\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                <template v-if=\"data.currentVoltage\">\n                                    <span v-if=\"data.currentVoltage && Number(data.currentVoltage.toFixed(1)) <= 11.7\" class=\" badge-red badge-pill currentVoltage\">\n                                        {{ data.currentVoltage.toFixed(1) + \"V\" }}\n                                    </span>\n                                    <span v-else-if=\"data.currentVoltage && Number(data.currentVoltage.toFixed(1)) > 11.7 && Number(data.currentVoltage.toFixed(1)) <= 12.1\" class=\"badge-red badge-pill\">\n                                        {{ data.currentVoltage.toFixed(1) + \"V\" }}\n                                    </span>\n                                    <span v-else class=\"badge-success badge-pill \">\n                                        {{ data.currentVoltage.toFixed(1) + \"V\" }}\n                                    </span>\n                                </template>\n                                <template v-else>\n                                    <span class=\" badge badge-pill badge-secondary\">N/A</span>\n                                </template>\n                            </b-col>\n                        </b-row>\n                        <b-row v-if=\"data.available === 1\">\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.use_status\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                <span class=\"mx-2 badge badge-pill btn-danger\">{{ $t(\"m.common.in_use\") }}</span>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.imei\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                <span v-if=\"data.deviceMac\">{{ data.deviceMac }}</span>\n                                <span v-else class=\"online-gray\">{{ $t(\"m.vehicle.unbound\") }}</span>\n                                <b-button style=\"margin-left:10px;\" v-if=\"!data.deviceMac\" pressed size=\"sm\" variant=\"primary\" aria-pressed=\"true\" class=\"button-primary\" @click=\"showBindInfo\">{{ $t(\"m.vehicle.install_device\") }}</b-button>\n                                <b-button style=\"margin-left:10px;\" v-else pressed size=\"sm\"  aria-pressed=\"true\" class=\"button-red\" @click=\"bUnpair = true\">{{ $t(\"m.common.b_unpair\") }}</b-button>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.vin\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.vin ? data.vin : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.year\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.year ? data.year : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.make\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.make ? data.make : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.model\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.model ? data.model : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.alias\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.alias ? data.alias : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.trim\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.trim ? data.trim : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.engine\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.engineType ? data.engineType : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.color\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.color ? data.color : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.price\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.thousandsPrice ? $t(\"m.common.moneyType\") + data.thousandsPrice : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.stock_num\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.stockNumber ? data.stockNumber : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.inv_age\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.inventoryTime ? getDaysBetweenDate(data.inventoryTime, new Date().getTime()) + $t(\"m.common.days\") : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.cloud.vehicle_type\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                <template v-if=\"!data.vehicleTypeCode\">\n                                    N/A\n                                </template>\n                                <template v-else>\n                                    {{ data.vehicleTypeCode == 1 ? $t(\"m.common.c_new\") : data.vehicleTypeCode == 2 ? $t(\"m.common.c_demo\") : data.vehicleTypeCode == 3 ? $t(\"m.common.c_used\") : $t(\"m.common.c_test\") }}\n                                </template>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.odometer\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ myCurrentMileage }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.common.remain_oil\") }}\n                            </b-col>\n                            <b-col sm=\"4\" lg=\"4\">\n                                <template v-if=\"data.residualOil\">\n                                    <template v-if=\"data.residualOil < 10\">\n                                        <span style=\"color: red\">{{ data.residualOil + $t(\"m.report.ltre\") }}</span>\n                                    </template>\n                                    <template v-else>\n                                        <span>{{ data.residualOil + $t(\"m.report.ltre\") }}</span>\n                                    </template>\n                                </template>\n                                <template v-else>\n                                    <span>N/A</span>\n                                </template>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.vehicle_detail.plat\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.plate ? data.plate : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.vehicle_detail.vehicle_store\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.storeName ? data.storeName : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"4\" lg=\"4\">\n                                {{ $t(\"m.vehicle_detail.notes\") }}\n                            </b-col>\n                            <b-col sm=\"8\" lg=\"8\">\n                                {{ data.notes ? data.notes : \"N/A\" }}\n                            </b-col>\n                        </b-row>\n                    </div>\n                </b-col>\n                <b-col sm=\"6\" class=\"right\">\n                    <div class=\"text-center img-box\">\n                        <viewer>\n                            <img :src=\"data.photoPath ? data.photoPath : '/img/placeholder.5367544d.svg'\" style=\"border-radius: 5px 5px 5px 5px;box-shadow: 0px 0px 4px 1px #000;margin-bottom: 10px;\" width=\"100%\" alt=\"\" />\n                        </viewer>\n                    </div>\n                    <div class=\"map\" style=\"position: relative\">\n                        <myMap :elementId=\"'map-1'\" :map=\"map\" :class=\"map && (map.lat != 0 || map.area.length > 0) ? '' : 'hidden'\"></myMap>\n                        <div class=\"img text-center\" v-if=\"map && map.lat == 0 && map.area == 0\" style=\"height: 40vh;margin-top: 15vh;\">\n                            <img src=\"@/assets/pages-img/Location_not_available.svg\" width=\"100px\" />\n                            <p style=\"margin-top: 14px\">\n                                {{ $t(\"m.vehicle_detail.no_map\") }}\n                            </p>\n                        </div>\n                    </div>\n                </b-col>\n            </b-row>\n            <b-row style=\"border-bottom: 0px;\">\n                <b-table class=\"user-table-list mb-0 table-outline table-responsive-sm\"  striped hover fixed :items=\"items\" :fields=\"fields\">\n                    <template slot=\"operation\" slot-scope=\"items\">\n                        <span>{{ items.item.type }}</span>\n                    </template>\n                    <template slot=\"vehicle\" slot-scope=\"items\">\n                        <a v-if=\"items.item.operator\" class=\"btn-md link-detail\" @click=\"$router.push('/inventory/admin/detail/' + items.item.userId)\">\n                            {{ items.item.operator }}\n                        </a>\n                        <span v-else>N/A</span>\n                    </template>\n                    <template slot=\"time\" slot-scope=\"items\">\n                        <div class=\"btn-md\">{{ items.item.time }}</div>\n                    </template>\n                </b-table>\n            </b-row>\n\n            <b-pagination align=\"right\" :total-rows=\"rows\" v-model=\"currentPage\" :per-page=\"perPage\" @input=\"turnToPage(currentPage)\"></b-pagination>\n            <div class=\"dataTables_info text-right\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                <span v-if=\"totalPages > 0\"\n                    >{{ $t(\"m.common.show\") }}\n                    {{ 10 * (currentPage - 1) + 1 }}\n                    {{ $t(\"m.common.to\") }}\n                    {{ currentPage === totalPages ? rows : currentPage * 10 }}\n                    {{ $t(\"m.common.of\") }} {{ rows }} {{ $t(\"m.common.entries\") }}</span\n                >\n                <span v-else>{{ $t(\"m.common.show\") }} 0 {{ $t(\"m.common.to\") }} 0 {{ $t(\"m.common.of\") }} {{ rows }} {{ $t(\"m.common.entries\") }}</span>\n            </div>\n            <b-row class=\"text-center\">\n                <b-col>\n                    <div class=\"btn btn-sm btn-danger btn-del btn-bottom-detail\" @click=\"delData\">\n                        {{ $t(\"m.cloud.delete\") }}\n                    </div>\n                </b-col>\n            </b-row>\n        </b-card>\n\n        <b-modal ref=\"my-modal-2\" v-model=\"showSoldVehicle\" :ok-title=\"$t('m.tip.b_ok')\" @ok=\"registerSold()\" class=\"\" ok-only>\n            <template slot=\"modal-title\"> {{ $t(\"m.sold_vehicle.sold_tt\") }}{{ soldStatus }} </template>\n            <div class=\"d-block text-left\">\n                <p>{{ soldOutC }}</p>\n            </div>\n        </b-modal>\n\n        <b-modal ref=\"my-modal-3\" v-model=\"soldVehicleStatus\" :ok-title=\"$t('m.tip.b_ok')\" @ok=\"goBackToList()\" class=\"\" ok-only>\n            <template slot=\"modal-title\">\n                {{ data.soldVehicleHeader }}\n            </template>\n            <div class=\"d-block text-left\">\n                <p>{{ data.soldVehicleContent }}</p>\n            </div>\n        </b-modal>\n\n        <b-modal ref=\"my-modal-4\" v-model=\"soldVehicleTransform\" :cancel-title=\"$t('m.tip.b_cancel')\" :ok-title=\"$t('m.tip.b_ok')\" @ok=\"confirmTransformVehicle()\" class=\"select-store\" ok-only>\n            <template slot=\"modal-title\">\n                {{ this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_header\") }}\n            </template>\n            <div class=\"text-left\">\n                <p style=\"color: #cc0000\">\n                    {{ this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_content\") }}\n                </p>\n                <div class=\"select-box\">\n                    <div class=\"col-md-3\">\n                        <p>\n                            {{ this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_content_title\") }}\n                        </p>\n                    </div>\n                    <div class=\"col-md-9\">\n                        <b-form-select v-model=\"selected\" :options=\"options\"></b-form-select>\n                    </div>\n                </div>\n            </div>\n        </b-modal>\n\n        <b-modal ref=\"my-modal-5\" v-model=\"transferStatus\" :ok-title=\"$t('m.tip.b_ok')\" @ok=\"afterTransfer()\" class=\"select-store\" ok-only>\n            <template slot=\"modal-title\">\n                {{ transferTitle }}\n            </template>\n            <div class=\"text-left\">\n                <p>{{ transferContents }}</p>\n            </div>\n        </b-modal>\n\n        <b-modal ref=\"my-modal-6\" v-model=\"installStatus\" @ok=\"installSuccess ? reloadPage() : ''\" :ok-title=\"$t('m.tip.b_ok')\" class=\"select-store\" ok-only>\n            <template slot=\"modal-title\">\n                {{ $t(\"m.cloud.vehicle_oper\") }}\n            </template>\n            <div class=\"text-left\">\n                <p>\n                    {{ installSuccess === true ? $t(\"m.cloud.insert_succ_title\") : $t(\"m.tip.update_failed\") }}\n                </p>\n            </div>\n        </b-modal>\n        <b-modal ref=\"my-modal-7\" v-model=\"installDeviceStatus\" :ok-disabled=\"!imeiIsVaild\" :ok-title=\"$t('m.tip.b_ok')\" @ok=\"installDevice()\" class=\"select-store\" ok-only>\n            <template slot=\"modal-title\">\n                {{ this.$t(\"m.vehicle.install_device\") }}\n            </template>\n            <div class=\"text-left\">\n                <div class=\"select-box\">\n                    <div class=\"col-md-3\">\n                        <p>{{ this.$t(\"m.vehicle.input_mind\") }}</p>\n                    </div>\n                    <div class=\"col-md-9\">\n                        <b-form-input type=\"text\" aria-describedby=\"input-live-help input-live-feedback\" id=\"input-live\" :placeholder=\"$t('m.vehicle.input_mind')\" v-model=\"inputText\" :class=\"!imeiIsVaild ? 'is-invalid' : ''\" maxlength=\"15\"></b-form-input>\n                        <b-form-invalid-feedback id=\"input-live-feedback\" v-if=\"!imeiIsVaild\">\n                            {{ $t(\"m.car_box.IMEI_verify\") }}\n                        </b-form-invalid-feedback>\n                    </div>\n                </div>\n            </div>\n        </b-modal>\n\n        <div class=\"del-tip\">\n            <b-modal ref=\"my-modal-bottom\" :cancel-title=\"$t('m.tip.b_cancel')\" :ok-title=\"$t('m.tip.b_ok')\" :title=\"$t('m.tip.d_vehicle')\" v-model=\"showDelMap\" @ok=\"apiDel\"> </b-modal>\n        </div>\n        <b-modal class=\"lock-my-car\" ref=\"my-modal\" v-model=\"bUnpair\" :title=\"$t('m.cloud.confirmUnbundling')\" :cancel-title=\"$t('m.tip.b_cancel')\" :ok-title=\"$t('m.tip.confirm')\" @ok=\"unPairdevice()\">\n            <p class=\"text-center\">\n                {{ $t(\"m.cloud.confirm_Unbund\") }}\n            </p>\n        </b-modal>\n        <Alert @closeRemindBox=\"closeBox()\" :buttonText=\"showAlerts.buttonText\" :show=\"showAlerts.show\" :title=\"showAlerts.title\" :content=\"showAlerts.content\"></Alert>\n    </div>\n</template>\n\n<script>\nimport httpclient from \"@/utils/httpclient\";\nimport { getDateString, getDaysBetweenDate } from \"@/utils/date\";\nimport myMap from \"@/components/map\";\nimport Alert from \"@components/model\";\nimport \"@/utils/viewer\"; //该组件的js是预览图片组件，按需引用即可\n\nexport default {\n    name: \"vehicleDetail\",\n    components: {\n        myMap,\n        Alert\n    },\n    data() {\n        return {\n            btnGroup: {\n                btnFirst: \"Cancel\",\n                btnSecond: \"OK\"\n            },\n            data: {},\n            map: null,\n            searchGoogleMap: {},\n            mapPopup: null,\n            tipTitle: \"\",\n            showSoldVehicle: false,\n            soldVehicleStatus: false,\n            soldVehicleSuccess: false,\n            soldVehicleTransform: false,\n            installDeviceStatus: false,\n            installSuccess: false,\n            installStatus: false,\n            inputText: \"\",\n            soldVehicleContent: \"\",\n            soldVehicleHeader: \"\",\n            transferStatus: false,\n            transferContents: \"\",\n            transferTitle: \"\",\n            soldStatus: \"\",\n            soldOutC: \"\",\n            fields: {\n                operation: {\n                    key: \"operationType\",\n                    label: this.$t(\"m.common.action\")\n                },\n                vehicle: {\n                    key: \"vehicle\",\n                    label: this.$t(\"m.vehicle_detail.operator\")\n                },\n                time: {\n                    key: \"time\",\n                    label: this.$t(\"m.common.time\")\n                }\n            },\n            options: [],\n            selected: null,\n            items: [],\n            totalPages: 1,\n            currentPage: 1,\n            perPage: 10,\n            showDelMap: false,\n            rows: 1,\n            myCurrentMileage: null,\n            imeiIsVaild: false,\n            bUnpair: false,\n            showAlerts: {\n                title: \"\",\n                show: false,\n                content: \"\",\n                buttonText: \"\"\n            },\n            deviceMac: \"\",\n            vin: \"\",\n            isOnline: \"\"\n        };\n    },\n    watch: {\n        inputText(newV) {\n            if (newV.length === 15) {\n                this.imeiIsVaild = true;\n            } else {\n                this.imeiIsVaild = false;\n            }\n        }\n    },\n    mounted() {\n        if (this.$i18n.locale === \"en-US\") {\n            this.changedLanguage = \"English\";\n        } else {\n            this.changedLanguage = \"Chinese\";\n        }\n        let self = this;\n        httpclient\n            .get(\"/api/v1/vehicle/detail/id?vehicleId=\" + this.$route.params.id, {})\n            .then(response => {\n                self.data = response.data.data;\n                this.isOnline = response.data.data.isOnline;\n                this.deviceMac = response.data.data.deviceMac;\n                this.vin = response.data.data.vin;\n                let year = self.data.year ? self.data.year : \"N/A\";\n                let make = self.data.make ? self.data.make : \"N/A\";\n                let model = self.data.model ? self.data.model : \"N/A\";\n                let info = year == \"N/A\" && make == \"N/A\" && model == \"N/A\" ? \"N/A\" : year + \" \" + make + \" \" + model;\n                self.tipTitle = info;\n                self.map = {\n                    lat: self.data.lastLocationLat ? self.data.lastLocationLat : 0,\n                    lng: self.data.lastLocationLng ? self.data.lastLocationLng : 0,\n                    area: self.data.areaCoordinates ? self.data.areaCoordinates : [],\n                    vehicleInfo: info\n                };\n                self.mapPopup = {\n                    lat: self.data.lastLocationLat ? self.data.lastLocationLat : 0,\n                    lng: self.data.lastLocationLng ? self.data.lastLocationLng : 0,\n                    area: self.data.areaCoordinates ? self.data.areaCoordinates : [],\n                    vehicleInfo: info\n                };\n                let _mileage = null;\n                if (response.data.data.currentMileage) {\n                    if (self.changedLanguage === \"English\") {\n                        _mileage = (response.data.data.currentMileage * 0.0006214).toFixed(0);\n                    } else {\n                        _mileage = (response.data.data.currentMileage / 1000).toFixed(0);\n                    }\n                } else {\n                    _mileage = \"N/A\";\n                }\n                self.myCurrentMileage = _mileage;\n            })\n            .catch(err => {\n                // console.dir(err);\n                err;\n            });\n        this.getVehicleOperatorList(1);\n    },\n    methods: {\n        reloadPage() {\n            window.location.reload();\n        },\n        getDateString(data) {\n            return getDateString(data);\n        },\n        getDaysBetweenDate(data, time) {\n            return getDaysBetweenDate(data, time);\n        },\n        getVehicleOperatorList(page) {\n            let myVehicleId = this.$route.params.id;\n            let myLink = \"/api/v1/operationlog/listbyvehicleid?pageNo=\" + page + \"&vehicleId=\" + myVehicleId;\n            httpclient.get(myLink).then(res => {\n                let myData = res.data.data.datas;\n                this.items = myData;\n                this.searchGoogleMap = myData;\n                // this.currentPage = res.data.data.pageNo;\n                this.perPage = res.data.data.pageSize;\n                this.totalPages = res.data.data.totalPages;\n                this.rows = res.data.data.rowCount;\n                let myArr = [];\n                myData.map(item => {\n                    myArr.push({\n                        operationType: item.operationType,\n                        operator: item.userName,\n                        time: this.getDateString(item.createTime),\n                        userId: item.userId\n                    });\n                });\n                this.items = myArr;\n            });\n        },\n        turnToPage(p) {\n            this.getVehicleOperatorList(p ? p : 1);\n        },\n        showRegisterSold() {\n            this.soldOutC = this.$t(\"m.sold_vehicle.sold_content\", {\n                year: this.data.year ? this.data.year : \"N/A\",\n                make: this.data.make ? this.data.make : \"N/A\",\n                model: this.data.model ? this.data.model : \"N/A\",\n                alias: this.data.alias ? this.data.alias : \"N/A\",\n                stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n            });\n            this.showSoldVehicle = true;\n        },\n        delData() {\n            this.showDelMap = true;\n        },\n        apiDel() {\n            //删除车辆\n            httpclient\n                .post(\"/api/v1/vehicle/delete\", {\n                    vehicleId: this.$route.params.id\n                })\n                .then(response => {\n                    if (response.data.code == 200) {\n                        this.showDelMap = !this.showDelMap;\n                        // this.reload();\n                        this.$router.push(\"/inventory/vehicle/list\");\n                    }\n                });\n        },\n        registerSold() {\n            //确认登记售出\n            let vehicleId = this.$route.params.id;\n            httpclient.post(\"/api/v1/vehicle/sale\", { vehicleId: vehicleId }).then(res => {\n                if (res.data.code === 200 && res.data.data.result) {\n                    this.soldVehicleSuccess = true;\n                    this.soldVehicleStatus = true;\n                    this.data.soldVehicleContent = this.$t(\"m.sold_vehicle.sold_content_success\", {\n                        year: this.data.year ? this.data.year : \"N/A\",\n                        make: this.data.make ? this.data.make : \"N/A\",\n                        model: this.data.model ? this.data.model : \"N/A\",\n                        alias: this.data.alias ? this.data.alias : \"N/A\",\n                        stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n                    });\n                    this.data.soldVehicleHeader = this.$t(\"m.sold_vehicle.sold_header_success\");\n                } else {\n                    this.soldVehicleSuccess = false;\n                    this.soldVehicleStatus = true;\n                    this.data.soldVehicleContent = this.$t(\"m.sold_vehicle.sold_content_fail\", {\n                        year: this.data.year ? this.data.year : \"N/A\",\n                        make: this.data.make ? this.data.make : \"N/A\",\n                        model: this.data.model ? this.data.model : \"N/A\",\n                        alias: this.data.alias ? this.data.alias : \"N/A\",\n                        stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n                    });\n                    this.data.soldVehicleHeader = this.$t(\"m.sold_vehicle.sold_header_fail\");\n                }\n            });\n        },\n        goBackToList() {\n            //回到列表\n            if (this.soldVehicleSuccess) {\n                this.$router.push(\"/inventory/vehicle/list\");\n            }\n        },\n        confirmTransformVehicle() {\n            //车辆转移确认\n            if (this.selected !== null) {\n                let _name = \"\";\n                this.options.map(item => {\n                    if (item.value === this.selected) {\n                        _name = item.text;\n                    }\n                });\n                let data = {\n                    vehicleId: this.$route.params.id,\n                    transferStoreId: this.selected\n                };\n                httpclient.post(\"/api/v1/vehicle/transfer\", data).then(res => {\n                    this.transferStatus = true;\n                    if (res.data.code === 200 && res.data.data.result === true) {\n                        this.transferTitle = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_header_success\");\n                        this.transferContents = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_content_success\", {\n                            year: this.data.year ? this.data.year : \"N/A\",\n                            make: this.data.make ? this.data.make : \"N/A\",\n                            model: this.data.model ? this.data.model : \"N/A\",\n                            alias: this.data.alias ? this.data.alias : \"N/A\",\n                            storeName: _name,\n                            stock: this.data.stockNumber ? this.data.stockNumber : \"N/A\"\n                        });\n                    } else {\n                        this.transferTitle = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_header_fail\");\n                        this.transferContents = this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_content_fail\");\n                    }\n                });\n            }\n        },\n        showTransformVehicle() {\n            //弹出车辆转移的弹窗，获取门店列表\n            this.soldVehicleTransform = true;\n            httpclient.get(\"/api/v1/store/listbyself?vehicleid=\" + this.$route.params.id).then(res => {\n                if (res.data.code === 200 && res.data.data.length) {\n                    this.options.length = 0;\n                    this.options.push({\n                        value: null,\n                        text: this.$t(\"m.sold_vehicle.transform_vehicle_to_other_store_options\"),\n                        disabled: true\n                    });\n                    res.data.data.map(item => {\n                        this.options.push({\n                            value: item.storeId,\n                            text: item.storeName\n                        });\n                    });\n                }\n            });\n        },\n        afterTransfer() {\n            //转移成功，跳转到vehicle-list\n            if (this.transferStatus) {\n                this.$router.push(\"/inventory/vehicle/list\");\n            }\n        },\n        hideModal() {\n            this.showDelMap = !this.showDelMap;\n        },\n        showBindInfo() {\n            this.installDeviceStatus = !this.installDeviceStatus;\n        },\n        installDevice() {\n            httpclient\n                .post(\"/api/v1/clouddrive/device/box/bind\", {\n                    deviceImei: this.inputText,\n                    vehicleId: this.$route.params.id,\n                    deviceType: 1\n                })\n                .then(res => {\n                    if (res.data.code === 200 && res.data.data.result) {\n                        this.installStatus = true;\n                        this.installSuccess = true;\n                        // window.location.reload();\n                    } else {\n                        this.installStatus = false;\n                        this.installSuccess = true;\n                    }\n                });\n        },\n        unPairdevice() {\n            //设备解绑，未绑定的设备，按钮不显示\n            let link = \"/api/v1/vehicle/unbind/device\";\n            let self = this;\n            let data = {\n                deviceMac: this.deviceMac,\n                vin: this.vin\n            };\n            httpclient\n                .post(link, data)\n                .then(function(res) {\n                    if (res.data.code === 200) {\n                        let passData = {\n                            title: self.$t(\"m.tip.info\"),\n                            show: true,\n                            content: self.$t(\"m.tip.vehicle_unpair_success\"),\n                            buttonText: {\n                                btnFirst: \"\",\n                                btnSecond: self.$t(\"m.tip.b_ok\")\n                            }\n                        };\n                        self.closeRemind(passData);\n                        // window.location.reload()\n                    }\n                })\n                .catch(function(err) {\n                    if (err) {\n                        let passData = {\n                            title: self.$t(\"m.tip.info\"),\n                            show: true,\n                            content: self.$t(\"m.tip.vehicle_unpair_failed\"),\n                            buttonText: {\n                                btnFirst: \"\",\n                                btnSecond: self.$t(\"m.tip.b_ok\")\n                            }\n                        };\n                        self.closeRemind(passData);\n                    }\n                });\n        },\n        closeRemind(data) {\n            this.showAlerts.show = data.show;\n            this.showAlerts.title = data.title;\n            this.showAlerts.content = data.content;\n            this.showAlerts.buttonText = data.buttonText;\n            // window.location.reload()\n        },\n        closeBox() {\n            //子组件来请求父组件关闭弹窗\n            this.showAlerts.show = !this.showAlerts.show;\n            window.location.reload();\n            if (this.updateDetail === \"update\") {\n                //如果是update车辆信息，成功后到详情页面\n                this.$router.push(\"/test-drive/test-vehicle/detail/\" + this.id);\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vehicle-detail {\n    .is-invalid {\n        border: 1px solid red;\n    }\n\n    .select-store {\n        .modal-dialog {\n            max-width: 800px;\n        }\n        .select-box {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            .col-md-4 {\n                padding-left: 0;\n            }\n            .col-md-8 {\n                padding-right: 0;\n            }\n            p {\n                margin-bottom: 0;\n            }\n        }\n    }\n    .row {\n        border-bottom: 1px solid #23282c;\n        padding: 0.75rem 1.25rem;\n        .img-box {\n            width: 100%;\n        }\n    }\n    .show-map .modal-dialog {\n        width: 80%;\n        max-width: 1200px;\n    }\n    .user-table-list {\n        margin-top: 20px;\n        .link-detail {\n            color: #20a8d8 !important;\n            cursor: pointer;\n            &:hover {\n                text-decoration: underline !important;\n                color: #167495 !important;\n            }\n        }\n    }\n}\n.vehicle-detail {\n    .card-body {\n        padding: 0 1.25rem;\n    }\n    .title {\n        font-size: 18px;\n        color: #63c2de;\n    }\n    .card {\n        margin: 0 auto;\n    }\n    .hidden {\n        display: none;\n    }\n    .left {\n        padding: 10px;\n        padding-top: 0;\n        .row {\n            margin: 0px;\n            border-bottom: 1px solid #23282c;\n            padding: 10px;\n        }\n        .row > div {\n            padding-left: 4px;\n        }\n    }\n    .right {\n        .table thead th {\n            color: grey;\n        }\n        #map {\n            height: 40vh;\n        }\n    }\n}\n.button-red {\n    display: inline-block;\n    width: 50px;\n    height: 20px;\n    line-height: 10px;\n    background-color: #f86c6b !important;\n    color:#ffffff !important;\n    border-radius: 5px;\n    border: none;\n    padding: 0;\n}\n.button-primary {\n    display: inline-block;\n    width: 80px;\n    height: 20px;\n    line-height: 10px;\n    background-color: #63c2de !important;\n    color: #fff;\n    border: none;\n    border-radius: 5px;\n}\n.lock-my-car {\n    .modal-header {\n        .modal-title {\n            width: 100%;\n            text-align: center;\n        }\n    }\n    .modal-footer {\n        justify-content: center;\n    }\n}\n.btn-bottom-detail {\n    display: inline-block;\n    // margin: 20px auto;\n}\n.badge-red {\n    background-color: #f63c3a;\n    color: #fff;\n}\n.online-success {\n    background: #4dbd74;\n    padding: 0 10px;\n    border-radius: 10px;\n    font-weight: bold;\n    color: #ffffff;\n}\n.online-danger {\n    background-color: #f86c6b;\n    padding: 0 10px;\n    border-radius: 10px;\n    font-weight: bold;\n    color: #ffffff;\n}\n.online-gray {\n    background-color: #c8ced3;\n    padding: 0 10px;\n    border-radius: 10px;\n    color: #23282c;\n    font-weight: bold;\n}\n</style>\n"]}]}