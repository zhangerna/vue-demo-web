{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testUserDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testUserDetail.vue","mtime":1576031701000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from \"@/utils/httpclient\";\nimport {formatUserBirthDate,formatUserIdcardExpireDate,formatUserLicenseBirthDate,formatUserLicenseExpireDate,getDateStringEnglish } from \"@/utils/date\";\nimport {rotateImage} from '../../../utils/db'\nimport '../../../utils/viewer'\n\nexport default {\n    name: \"testUserDetail\",\n    inject: ['reload'],\n    data() {\n        return {\n            data: {},\n            showMap: false,\n            map:{},\n            show: false,\n            updateInfo: '',\n            markedAt:'',\n            table: null,\n            tableFields: {\n                orderId: {\n                    label: this.$t('m.cloud.order_id'),\n                    class: \"text-center\"\n                },\n                vehicleInfo: {\n                    label: this.$t('m.cloud.vehicle_info'),\n                    class: \"text-center\"\n                },\n                testInfo: {\n                    label: this.$t('m.dashboard.test_point'),\n                    class: \"text-center\"\n                },\n                pointTime: {\n                    label: this.$t('m.cloud.rese_test_drive'),\n                    class: \"text-center\"\n                },\n                status: {\n                    label: this.$t('m.cloud.status'),\n                    class: \"text-center\"\n                }\n            },\n            idcardVerifyTime:null,\n            driverLicenseverifyTime:null,\n            currentPage:1,\n            totalPages:0,\n            total:0,\n            idcardBirthDate:null,\n            idcardExpireDate:null,\n            licenseBirthDate:null,\n            licenceFristGetTime:null,\n            licenseExpireDate:null,\n            licenseFirstPage:'',\n            licenseFirstWidth:'',\n            licenseSecondPage:'',\n            licenseSecondWidth:'',\n            idCardFront:'',\n            idcardFirstWidth:'',\n            idCardBack:'',\n            idcardSecondWidth:'',\n        }\n    },\n    mounted() {\n        httpClient.get('/api/v1/clouddrive/user/detail?userId='+this.$route.params.id)\n            .then(response => {\n            if (response.data.code == 200) {\n                this.data = response.data.data;\n                let res = response.data.data;\n                this.idcardVerifyTime = res.idCardResponse.certificationTime ? getDateStringEnglish(res.idCardResponse.certificationTime) : '';\n                this.driverLicenseverifyTime = res.driveLicenseResponse.certificationTime ? getDateStringEnglish(res.driveLicenseResponse.certificationTime) : '';\n                this.idcardBirthDate = res.idCardResponse.birthDate? formatUserBirthDate(res.idCardResponse.birthDate,this):'N/A';\n                this.idcardExpireDate = res.idCardResponse.expireDate? formatUserIdcardExpireDate(res.idCardResponse.expireDate):'N/A';\n                this.licenseBirthDate = res.driveLicenseResponse.birthDate ? formatUserLicenseBirthDate(res.driveLicenseResponse.birthDate) : 'N/A';\n                this.licenceFristGetTime = res.driveLicenseResponse.initialDrivingLicenseDate ? formatUserLicenseBirthDate(res.driveLicenseResponse.initialDrivingLicenseDate) : 'N/A';\n                this.licenseExpireDate = res.driveLicenseResponse.expireDate ? formatUserLicenseExpireDate(res.driveLicenseResponse.initialDrivingLicenseDate+res.driveLicenseResponse.expireDate,this) : 'N/A';\n\n                if(res.driveLicenseResponse){\n                    let myData = res.driveLicenseResponse;\n                    this.transformImage(myData.driveLicenseAuxiUrl,'driveLicenseAuxiUrl');\n                    this.transformImage(myData.driveLicensePrimeUrl,'driveLicensePrimeUrl');\n                }\n                if(res.idCardResponse){\n                    let myData = res.idCardResponse;\n                    this.transformImage(myData.idcardFrontUrl,'idcardFrontUrl');\n                    this.transformImage(myData.idcardBackUrl,'idcardBackUrl');\n                }\n\n            }\n        });\n        this.getUserOrderList(1);\n    },\n    methods: {\n        getUserOrderList(page){\n            let _page = page ? page:1;\n            httpClient.get('/api/v1/clouddrive/order/pagelistbyuser?duserid='+ this.$route.params.id+\"&pageNo=\"+_page)\n                .then(res => {\n                    if (res.data.code == 200) {\n                        this.filterData(res.data.data.datas ? res.data.data.datas : []);\n                        this.total = res.data.data.rowCount;\n                        this.totalPages = res.data.data.totalPages\n                    }\n                })\n        },\n        cb(rotate,type,rate){\n            if(rotate === 1){\n                if(type === 'driveLicenseAuxiUrl'){\n                    let w = document.getElementById('licenseSecondImg').clientWidth;\n                    this.licenseSecondWidth = w/rate +'px';\n                    this.licenseSecondPage = 'true'\n                }else if(type === 'driveLicensePrimeUrl'){\n                    let w = document.getElementById('licenseFirstImg').clientWidth;\n                    this.licenseFirstWidth = w/rate +'px';\n                    this.licenseFirstPage = 'true'\n                }else if(type === 'idcardFrontUrl'){\n                    let w = document.getElementById('idcardFirstImg').clientWidth;\n                    this.idcardFirstWidth = w/rate +'px';\n                    this.idCardFront = 'true'\n                }else if(type === 'idcardBackUrl'){\n                    let w = document.getElementById('idcardSecondImg').clientWidth;\n                    this.idcardSecondWidth = w/rate +'px';\n                    this.idCardBack = 'true'\n                }\n            }\n        },\n        transformImage(links,type){\n            return rotateImage(links,type,this.cb)\n        },\n        filterData(data) {\n            this.table = data.map((item) => {\n                let _status;\n                if(item.orderStatus){\n                    if(item.orderStatus === 10){\n                        _status = this.$t('m.cloud.wait_pick_up')\n                    }else if(item.orderStatus === 20){\n                        _status = this.$t('m.cloud.wait_return')\n                    }else if(item.orderStatus === 30){\n                        _status = this.$t('m.cloud.returned_vehicle')\n                    }else if(item.orderStatus === 40){\n                        _status = this.$t('m.cloud.complete')\n                    }else if(item.orderStatus === 50){\n                        _status = this.$t('m.cloud.canceled')\n                    }\n                }\n\n                return {\n                    orderId: item.orderServiceNum,\n                    vehicleInfo:item.vehicleYear+ \" \"+item.vehicleMake+ \" \"+ item.vehicleModel+\" \"+item.vehicleStockNum+\" \"+item.vehiclePlate,\n                    id: item.orderId,\n                    phone: item.phone,\n                    color: item.vehicleColor,\n                    alias: item.vehicleAlias,\n                    trim: item.vehicleTrim,\n                    plat: item.vehiclePlate,\n                    num: item.vehicleStockNum, // 库存编号\n                    testInfo: item.parkingName,\n                    pointTime: getDateStringEnglish(item.appointmentStartTime),\n                    status: _status\n                }\n            });\n        },\n    }\n}\n",{"version":3,"sources":["testUserDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8RA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"testUserDetail.vue","sourceRoot":"src/views/dashboard/testDrive","sourcesContent":["<template>\n    <div class=\"animated fadeIn user-detail\">\n        <b-card class=\"custom-header\">\n            <div slot=\"header\">\n                {{ $t('m.report.user') }}{{ data.phone ? data.phone : '' }}\n                <span v-if=\"data.checkStatus && data.checkStatus === 50\" class=\"text-right float-right\">\n                    <span class=\"badge badge-success\">{{$t('m.cloud.verify_success')}}</span>\n                </span>\n                <span v-if=\"data.checkStatus && data.checkStatus === 40\" class=\"text-right float-right\">\n                    <span class=\"badge badge-danger\">{{$t('m.cloud.verify_failed')}}</span>\n                </span>\n                <span v-if=\"data.checkStatus && (data.checkStatus === 20 || data.checkStatus === 30) \" class=\"text-right float-right\">\n                    <span class=\"badge badge-warning\">{{$t('m.cloud.wait_verify')}}</span>\n                </span>\n                <span v-if=\"data.checkStatus && data.checkStatus === 10\" class=\"text-right float-right\">\n                   <span class=\"badge badge-pill btn-secondary\">{{$t('m.cloud.unsubmit_verify')}}</span>\n                </span>\n            </div>\n            <div class=\"content\">\n                <b-card>\n                    <div slot=\"header\">\n                        {{ $t('m.cloud.idcheck_info') }}\n                    </div>\n                    <div class=\"content\">\n                        <div class=\"row\">\n                            <div class=\"col-sm-6\">\n                                <b-list-group>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.admin.name') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse ?  data.idCardResponse.userName : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.gender') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse && data.idCardResponse.gender ?\n                                            (data.idCardResponse.gender === 1 ? $t('m.common.boy') :$t('m.common.girl')) : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.nation') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse && data.idCardResponse.ethnicGroup ?\n                                            data.idCardResponse.ethnicGroup : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.birth_day') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ idcardBirthDate }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.address') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse && data.idCardResponse.address ?\n                                            data.idCardResponse.address : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.id_type') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.idCard') }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.id_number') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse && data.idCardResponse.idcardNumber ?\n                                            data.idCardResponse.idcardNumber : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.issure_auth') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse && data.idCardResponse.issuingOrganization ?\n                                            data.idCardResponse.issuingOrganization : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.valid_day') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ idcardExpireDate }}\n                                        </div>\n                                    </div>\n                                </b-list-group>\n                            </div>\n                            <div class=\"col-sm-6\">\n                                <div class=\"col-sm-12 text-center\">\n                                    <viewer>\n                                        <img id=\"idcardFirstImg\" :src=\"data.idCardResponse ? data.idCardResponse.idcardFrontUrl : '@/assets/pages-img/placeholder.svg'\"\n                                             :width=\"idcardFirstWidth !== ''? idcardFirstWidth :'100%'\"\n                                             :style=\"idCardFront === 'true'? 'transform: rotate(-90deg)' :''\">\n                                    </viewer>\n\n                                </div>\n                                <div class=\"col-sm-12 text-center\">\n                                    <viewer>\n                                        <img id=\"idcardSecondImg\" :src=\"data.idCardResponse ? data.idCardResponse.idcardBackUrl : '@/assets/pages-img/placeholder.svg'\"\n                                             :width=\"idcardSecondWidth !== ''? idcardSecondWidth :'100%'\"\n                                             :style=\"idCardBack === 'true'? 'transform: rotate(-90deg)' :''\" >\n                                    </viewer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </b-card>\n                <b-card>\n                    <div slot=\"header\">\n                        {{ $t('m.cloud.drive_card_info') }}\n                    </div>\n                    <div class=\"content\">\n                        <div class=\"row\">\n                            <div class=\"col-sm-6\">\n                                <b-list-group>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.admin.name') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.idCardResponse ?  data.idCardResponse.userName : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.gender') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.driveLicenseResponse && data.driveLicenseResponse.gender ?\n                                            (data.driveLicenseResponse.gender === 1 ? $t('m.common.boy') :$t('m.common.girl')) : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.country') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.driveLicenseResponse && data.driveLicenseResponse.nationality ?\n                                            data.driveLicenseResponse.nationality : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.address') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.driveLicenseResponse && data.driveLicenseResponse.address ?\n                                            data.driveLicenseResponse.address : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.birth_day') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ licenseBirthDate }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.init_driving_license') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ licenceFristGetTime }}{{data.driveLicenseResponse && data.driveLicenseResponse.driveAge == 0 ? $t('m.cloud.drive_license_in_one_year'):'' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.vehicle_class') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.driveLicenseResponse && data.driveLicenseResponse.quasiDrivingModel ?\n                                            data.driveLicenseResponse.quasiDrivingModel : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.id_type') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.drive_type') }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.id_number') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ data.driveLicenseResponse && data.driveLicenseResponse.drivingLicenseNumber ?\n                                            data.driveLicenseResponse.drivingLicenseNumber : 'N/A' }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.valid_day') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{ licenseExpireDate }}\n                                        </div>\n                                    </div>\n                                    <div class=\"row list-group-item d-flex justify-content-between align-items-center\">\n                                        <div class=\"col-sm-6\">\n                                            {{ $t('m.cloud.verify_time') }}\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            {{driverLicenseverifyTime}}\n                                        </div>\n                                    </div>\n                                </b-list-group>\n                            </div>\n                            <div class=\"col-sm-6\">\n                                <div class=\"col-sm-12 text-center\" style=\"overflow: hidden;\">\n                                    <viewer>\n                                        <img id=\"licenseFirstImg\" :src=\"data.driveLicenseResponse ? data.driveLicenseResponse.driveLicensePrimeUrl : '@/assets/pages-img/placeholder.svg'\"\n                                             :width=\"licenseFirstWidth !== ''? licenseFirstWidth :'100%'\" alt=\"\" :style=\"licenseFirstPage === 'true'? 'transform: rotate(-90deg)' :''\" >\n                                    </viewer>\n\n                                </div>\n                                <div class=\"col-sm-12 text-center\">\n                                    <viewer>\n                                        <img id=\"licenseSecondImg\" :src=\"data.driveLicenseResponse ? data.driveLicenseResponse.driveLicenseAuxiUrl : '@/assets/pages-img/placeholder.svg'\"\n                                             :width=\"licenseSecondWidth !== ''? licenseSecondWidth :'100%'\" :style=\"licenseSecondPage === 'true'? 'transform: rotate(-90deg)' :''\" >\n                                    </viewer>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>'\n                </b-card>\n                <b-card>\n                    <div slot=\"header\">\n                        {{ $t('m.cloud.appoint_history') }}\n                    </div>\n                    <div class=\"content\">\n                        <b-table class=\"mb-0 table-outline table-responsive-sm\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                            <template slot=\"orderId\" slot-scope=\"data\">\n                                <div style=\"cursor: pointer;color: #20a8d8;\" class=\"\" @click=\"$router.push('/test-drive/reservation-order/detail/' + data.item.id)\">{{data.item.orderId}}</div>\n                            </template>\n                        </b-table>\n                    </div>\n                    <b-row style=\"margin-top: 20px\">\n                        <b-col sm=\"4\" lg=\"4\">\n                            <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                                {{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? total :currentPage * 10 }} {{ $t('m.common.of') }} {{total}} {{ $t('m.common.entries') }}\n                            </div>\n                        </b-col>\n                        <b-col sm=\"8\" lg=\"8\">\n                            <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"10\" @input=\" getUserOrderList(currentPage)\"></b-pagination>\n                        </b-col>\n                    </b-row>\n                </b-card>\n            </div>\n        </b-card>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .user-detail {\n        .content {\n            .row {\n                margin: auto 0;\n            }\n        }\n    }\n</style>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import {formatUserBirthDate,formatUserIdcardExpireDate,formatUserLicenseBirthDate,formatUserLicenseExpireDate,getDateStringEnglish } from \"@/utils/date\";\n    import {rotateImage} from '../../../utils/db'\n    import '../../../utils/viewer'\n\n    export default {\n        name: \"testUserDetail\",\n        inject: ['reload'],\n        data() {\n            return {\n                data: {},\n                showMap: false,\n                map:{},\n                show: false,\n                updateInfo: '',\n                markedAt:'',\n                table: null,\n                tableFields: {\n                    orderId: {\n                        label: this.$t('m.cloud.order_id'),\n                        class: \"text-center\"\n                    },\n                    vehicleInfo: {\n                        label: this.$t('m.cloud.vehicle_info'),\n                        class: \"text-center\"\n                    },\n                    testInfo: {\n                        label: this.$t('m.dashboard.test_point'),\n                        class: \"text-center\"\n                    },\n                    pointTime: {\n                        label: this.$t('m.cloud.rese_test_drive'),\n                        class: \"text-center\"\n                    },\n                    status: {\n                        label: this.$t('m.cloud.status'),\n                        class: \"text-center\"\n                    }\n                },\n                idcardVerifyTime:null,\n                driverLicenseverifyTime:null,\n                currentPage:1,\n                totalPages:0,\n                total:0,\n                idcardBirthDate:null,\n                idcardExpireDate:null,\n                licenseBirthDate:null,\n                licenceFristGetTime:null,\n                licenseExpireDate:null,\n                licenseFirstPage:'',\n                licenseFirstWidth:'',\n                licenseSecondPage:'',\n                licenseSecondWidth:'',\n                idCardFront:'',\n                idcardFirstWidth:'',\n                idCardBack:'',\n                idcardSecondWidth:'',\n            }\n        },\n        mounted() {\n            httpClient.get('/api/v1/clouddrive/user/detail?userId='+this.$route.params.id)\n                .then(response => {\n                if (response.data.code == 200) {\n                    this.data = response.data.data;\n                    let res = response.data.data;\n                    this.idcardVerifyTime = res.idCardResponse.certificationTime ? getDateStringEnglish(res.idCardResponse.certificationTime) : '';\n                    this.driverLicenseverifyTime = res.driveLicenseResponse.certificationTime ? getDateStringEnglish(res.driveLicenseResponse.certificationTime) : '';\n                    this.idcardBirthDate = res.idCardResponse.birthDate? formatUserBirthDate(res.idCardResponse.birthDate,this):'N/A';\n                    this.idcardExpireDate = res.idCardResponse.expireDate? formatUserIdcardExpireDate(res.idCardResponse.expireDate):'N/A';\n                    this.licenseBirthDate = res.driveLicenseResponse.birthDate ? formatUserLicenseBirthDate(res.driveLicenseResponse.birthDate) : 'N/A';\n                    this.licenceFristGetTime = res.driveLicenseResponse.initialDrivingLicenseDate ? formatUserLicenseBirthDate(res.driveLicenseResponse.initialDrivingLicenseDate) : 'N/A';\n                    this.licenseExpireDate = res.driveLicenseResponse.expireDate ? formatUserLicenseExpireDate(res.driveLicenseResponse.initialDrivingLicenseDate+res.driveLicenseResponse.expireDate,this) : 'N/A';\n\n                    if(res.driveLicenseResponse){\n                        let myData = res.driveLicenseResponse;\n                        this.transformImage(myData.driveLicenseAuxiUrl,'driveLicenseAuxiUrl');\n                        this.transformImage(myData.driveLicensePrimeUrl,'driveLicensePrimeUrl');\n                    }\n                    if(res.idCardResponse){\n                        let myData = res.idCardResponse;\n                        this.transformImage(myData.idcardFrontUrl,'idcardFrontUrl');\n                        this.transformImage(myData.idcardBackUrl,'idcardBackUrl');\n                    }\n\n                }\n            });\n            this.getUserOrderList(1);\n        },\n        methods: {\n            getUserOrderList(page){\n                let _page = page ? page:1;\n                httpClient.get('/api/v1/clouddrive/order/pagelistbyuser?duserid='+ this.$route.params.id+\"&pageNo=\"+_page)\n                    .then(res => {\n                        if (res.data.code == 200) {\n                            this.filterData(res.data.data.datas ? res.data.data.datas : []);\n                            this.total = res.data.data.rowCount;\n                            this.totalPages = res.data.data.totalPages\n                        }\n                    })\n            },\n            cb(rotate,type,rate){\n                if(rotate === 1){\n                    if(type === 'driveLicenseAuxiUrl'){\n                        let w = document.getElementById('licenseSecondImg').clientWidth;\n                        this.licenseSecondWidth = w/rate +'px';\n                        this.licenseSecondPage = 'true'\n                    }else if(type === 'driveLicensePrimeUrl'){\n                        let w = document.getElementById('licenseFirstImg').clientWidth;\n                        this.licenseFirstWidth = w/rate +'px';\n                        this.licenseFirstPage = 'true'\n                    }else if(type === 'idcardFrontUrl'){\n                        let w = document.getElementById('idcardFirstImg').clientWidth;\n                        this.idcardFirstWidth = w/rate +'px';\n                        this.idCardFront = 'true'\n                    }else if(type === 'idcardBackUrl'){\n                        let w = document.getElementById('idcardSecondImg').clientWidth;\n                        this.idcardSecondWidth = w/rate +'px';\n                        this.idCardBack = 'true'\n                    }\n                }\n            },\n            transformImage(links,type){\n                return rotateImage(links,type,this.cb)\n            },\n            filterData(data) {\n                this.table = data.map((item) => {\n                    let _status;\n                    if(item.orderStatus){\n                        if(item.orderStatus === 10){\n                            _status = this.$t('m.cloud.wait_pick_up')\n                        }else if(item.orderStatus === 20){\n                            _status = this.$t('m.cloud.wait_return')\n                        }else if(item.orderStatus === 30){\n                            _status = this.$t('m.cloud.returned_vehicle')\n                        }else if(item.orderStatus === 40){\n                            _status = this.$t('m.cloud.complete')\n                        }else if(item.orderStatus === 50){\n                            _status = this.$t('m.cloud.canceled')\n                        }\n                    }\n\n                    return {\n                        orderId: item.orderServiceNum,\n                        vehicleInfo:item.vehicleYear+ \" \"+item.vehicleMake+ \" \"+ item.vehicleModel+\" \"+item.vehicleStockNum+\" \"+item.vehiclePlate,\n                        id: item.orderId,\n                        phone: item.phone,\n                        color: item.vehicleColor,\n                        alias: item.vehicleAlias,\n                        trim: item.vehicleTrim,\n                        plat: item.vehiclePlate,\n                        num: item.vehicleStockNum, // 库存编号\n                        testInfo: item.parkingName,\n                        pointTime: getDateStringEnglish(item.appointmentStartTime),\n                        status: _status\n                    }\n                });\n            },\n        }\n    }\n</script>\n\n"]}]}