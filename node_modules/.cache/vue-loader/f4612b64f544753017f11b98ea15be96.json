{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/userInviteRegist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/userInviteRegist.vue","mtime":1561097596000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\timport httpClient from '@/utils/httpclient';\n  import Alert from '@components/model';\n  import registerStatus from '@components/registStatus'\n\texport default {\n\t\t  name: 'userInviteRegister',\n      components:{\n          Alert,registerStatus\n      },\n      data() {\n          return {\n              firstName:'',\n              lastName:'',\n              setPassWord:'',\n              confirmPassWord:'',\n              phone:'',\n              status:'accepted',\n              showResult:false,\n              showAlerts:{\n                  title:'',\n                  show:false,\n                  content:'',\n                  buttonText:''\n              },\n              user:{\n                  name:'',\n                  lot:'',\n                  email:'',\n              },\n              btnGroup:{\n                  btnFirst:'Login',\n                  btnSecond:'Homepage'\n              },\n              errInfo:'',\n              succInfo:'',\n              icon:'',\n              valueLength:''\n          }\n      },\n      mounted(){\n\t\t      let token = window.location.search.split('token=')[1];\n\t\t      //let token = 'eyJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRJZCI6ImJkMzM1MGJhMWRmZDQ4Njg5MTc5MTE3YWExNTY5ZTk5IiwiZW1haWwiOiJ3ZWltaW5Abm9uZGEudXMiLCJzdWIiOiJiZDMzNTBiYTFkZmQ0ODY4OTE3OTExN2FhMTU2OWU5OV93ZWltaW5Abm9uZGEudXMiLCJleHAiOjE1NjI4Mzc0ODN9.DDntzh__-hj25PHzpazZCm9iUyFR-yv2VPUdbgmBQpU';\n          this.inviteRegister(token).then((res)=>{\n              if(res.data.code === 200){\n                  let data = res.data.data;\n                  this.user.name=data.firstName +' '+data.lastName;\n                  this.user.lot = data.storeName;\n                  this.user.email = data.inviteEmail\n              }else if(res.data.code === 400){\n                  let passData = {\n                      title: 'Register',\n                      show: true,\n                      content: 'Verify Failed!',\n                      buttonText: {\n                          btnFirst: '',\n                          btnSecond: 'OK'\n                      }\n                  };\n                  this.closeRemind(passData);\n              }\n          }).catch((err)=>{\n              console.log(err)\n          })\n      },\n      computed: {\n          firstNameState() {\n              return this.firstName.length > 0\n          },\n          lastNameState() {\n              return this.lastName.length > 0\n          },\n          setPassWordState() {\n              return this.setPassWord.length > 5\n          },\n          confirmPassWordState() {\n              return this.confirmPassWord.length > 5\n          },\n          phoneState() {\n              return this.phone.length > 7\n          }\n      },\n      methods:{\n          inviteRegister(token) {\n              return httpClient.post('/api/v1/user/inviteLinkVerification', {\n                  token:token\n              });\n          },\n          GetRequest() {\n              var url = location.search; //获取url中\"?\"符后的字串\n              var theRequest = {};\n              if (url.indexOf(\"?\") !== -1) {\n                  var str = url.substr(1);\n                  var strs = str.split(\"&\");\n                  for (var i = 0; i < strs.length; i++) {\n                      theRequest[strs[i].split(\"=\")[0]] = (strs[i].split(\"=\")[1]);\n                  }\n              }\n              return theRequest;\n          },\n          saveInviteData(){\n              this.checkThePassWord(this.postData)\n          },\n          checkThePassWord(cb){//检验两次密码，是否勾选\n              if(this.firstName === '' || this.lastName === ''|| this.setPassWord === '' || this.confirmPassWord === '' || this.phone === ''){\n                  let passData = {\n                      title: 'Register',\n                      show: true,\n                      content: 'Please Fill In All Info!',\n                      buttonText: {\n                          btnFirst: '',\n                          btnSecond: 'OK'\n                      }\n                  };\n                  this.closeRemind(passData);\n              }else if(this.confirmPassWord !== this.setPassWord){\n                  let passData = {\n                      title: 'Register',\n                      show: true,\n                      content: 'Password confirm error',\n                      buttonText: {\n                          btnFirst: '',\n                          btnSecond: 'OK'\n                      }\n                  };\n                  this.closeRemind(passData);\n                  this.confirmPassWord = ''\n              }else if(this.status !== 'accepted'){\n                  let passData = {\n                      title: 'Register',\n                      show: true,\n                      content: 'Please Check Our Privacy Policy and Terms of Service',\n                      buttonText: {\n                          btnFirst: '',\n                          btnSecond: 'OK'\n                      }\n                  };\n                  this.closeRemind(passData);\n              }else{\n                  cb()\n              }\n          },\n          postData(){\n              let data = {\n                  firstName: this.firstName,\n                  lastName: this.lastName,\n                  password:this.confirmPassWord,\n                  phone: this.phone,\n                  userEmail:this.user.email\n              };\n              let token = this.GetRequest().token;\n              let link = '/api/v1/user/reg?token='+ token;\n              httpClient.post(link,data).then((res)=>{\n                  if( res && res.data.code === 400){\n                      this.showResult = !this.showResult;\n                      this.errInfo='Sorry , you have already been the user of ZUS.ai';\n                      this.succInfo='';\n                      this.icon='fa fa-close'\n                  }else{\n                      this.showResult = !this.showResult;\n                      this.errInfo='';\n                      this.succInfo='Congratulations, you have joined the store: Auto 3 Group. Log in or download the App to use the functions.';\n                      this.icon='cui cui-check'\n                  }\n              })\n          },\n          closeRemind(data){\n              this.showAlerts.show = data.show;\n              this.showAlerts.title = data.title;\n              this.showAlerts.content = data.content;\n              this.showAlerts.buttonText = data.buttonText;\n          },\n          closeBox(){//子组件来请求父组件关闭弹窗\n              this.showAlerts.show = !this.showAlerts.show;\n          },\n      }\n\t}\n",null]}