{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/profile.vue","mtime":1560753940000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpclient from \"@/utils/httpclient\"\nexport default {\n    name: \"profile\",\n    inject: ['reload'],\n    data() {\n        return {\n            data: null,\n            email: '',\n            firstname: '',\n            lastname: '',\n            phone: '',\n            role: '',\n            dealGroup: '',\n            dealship: '',\n            img: '',\n            showTip: false,\n            showETip: false\n        }\n    },\n    mounted() {\n        this.img = this.$store.state.userInfo.avatarUrl;\n        console.log(this.$store.state.userInfo.avatarUrl);\n        httpclient.post(\"/api/v1/getUserById\", {\n            userId: this.$store.state.userInfo.userId\n        }).then(response => {\n            this.email = response.data.data.userEmail ? response.data.data.userEmail : '';\n            this.firstname = response.data.data.firstName;\n            this.lastname = response.data.data.lastName;\n            this.phone = response.data.data.phone;\n            this.role = response.data.data.role;\n            this.dealship = response.data.data.storeName;\n            this.dealGroup = response.data.data.tenantName;\n        })\n    },\n    methods: {\n        savefile(event) {\n            let file = event.target.files;\n            let fb = new FormData();\n            fb.append(\"image\", file[0]);\n            httpclient.post('/api/v1/user/updateAvatar', fb).then(response => {\n                if (response.data.code === 200) {\n                    this.img = response.data.data.avatarUrl;\n                    // this.$store.state.user_info.avatarUrl = this.img;\n                    this.showTip = true;\n                    let userPersonInfo = {\n                        avatarUrl:this.img,\n                        firstName:this.firstname,\n                        lastName:this.lastname\n                    };\n                    this.$store.dispatch('user_Personal_Info',userPersonInfo)\n                } else {\n                    this.showETip = true;\n                }\n            })\n        },\n        saveUserInfo() {\n            if (this.firstname && this.lastname && this.phone) {\n                httpclient.post('/api/v1/updateUserDetail',{\n                    firstName: this.firstname,\n                    lastName: this.lastname,\n                    userPhone: this.phone\n                }).then((res) => {\n                     if(res.data.code === 200){\n                        let userPersonInfo = {\n                            avatarUrl:this.img,\n                            firstName:this.firstname,\n                            lastName:this.lastname\n                        };\n                        console.log(userPersonInfo)\n                        this.$store.dispatch('user_Personal_Info',userPersonInfo);\n                         this.showTip = true;\n                     }\n                })\n            }\n        }\n    }\n}\n",{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"profile.vue","sourceRoot":"src/views/dashboard/dashboardMain","sourcesContent":["<template>\n    <div class=\"animated fadeIn profile-content\">\n        <b-card header=\"Profile\" class=\"profile\">\n            <div class=\"content\">\n                <div class=\"group-img\">\n                    <img :src=\"img\" width=\"160px\" height=\"160px\">\n                    <input type=\"file\" id=\"uploadAvatar\" @change=\"savefile($event)\" accept=\"image/jpeg,image/png,image/jpg\" ref=\"upload\">\n                </div>\n                <b-form>\n                    <b-form-group>\n                        <label for=\"email\">Email</label>\n                        <b-form-input v-model=\"email\" id=\"email\" type=\"email\" required disabled autocomplete=\"email\"></b-form-input>\n                    </b-form-group>\n                    <b-row>\n                        <b-col sm=\"6\">\n                            <b-form-group>\n                                <label for=\"firstname\">Firstname</label>\n                                <b-form-input v-model=\"firstname\" id=\"firstname\" type=\"text\" placeholder=\"Enter Firstname..\" required></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                        <b-col>\n                            <b-form-group>\n                                <label for=\"lastname\">Lastname</label>\n                                <b-form-input v-model=\"lastname\" id=\"lastname\" type=\"text\" placeholder=\"Enter Lastname..\" required></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                    </b-row>\n                    <b-form-group>\n                        <label for=\"phone\">Phone</label>\n                        <b-form-input v-model=\"phone\" id=\"phone\" type=\"text\" placeholder=\"Enter Lastname..\" required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label for=\"Role\">Role</label>\n                        <b-form-input v-model=\"role\" id=\"role\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label>Dealership</label>\n                        <b-form-input v-model=\"dealship\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label>Dealership Group</label>\n                        <b-form-input v-model=\"dealGroup\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <button class=\"btn btn-primary\" @click=\"saveUserInfo\">\n                            Save\n                        </button>\n                        <button class=\"btn btn-ghost-danger\" @click=\"$router.push('/change-password')\">\n                            Change Password\n                        </button>\n                    </b-form-group>\n                </b-form>\n            </div>\n        </b-card>\n        <b-modal ref=\"my-modal\" title=\"Profile Saved Successfully\" v-model=\"showTip\" @ok=\"showTip = false\">\n        </b-modal>\n        <b-modal ref=\"my-modal\" title=\"Profile Saved Failed\" v-model=\"showETip\" @ok=\"showETip = false\">\n        </b-modal>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .profile {\n        .content {\n            max-width: 600px;\n            margin: 0 auto;\n            img {\n                border-radius: 50%;\n                cursor: pointer;\n            }\n            .group-img {\n                position: relative;\n                margin-bottom: 20px;\n                text-align: center;\n                input {\n                    opacity: 0;\n                    height: 160px;\n                    width: 160px;\n                    position: absolute;\n                    z-index: 1;\n                    margin-left: -160px;\n                }\n            }\n            .btn-ghost-danger {\n                margin-left: 20px;\n            }\n        }\n    }\n    .profile-content {\n        .modal-body {\n            display: none;\n        }\n        .modal-footer {\n            .btn-secondary {\n                display: none;\n            }\n        }\n    }\n</style>\n\n<script>\n    import httpclient from \"@/utils/httpclient\"\n    export default {\n        name: \"profile\",\n        inject: ['reload'],\n        data() {\n            return {\n                data: null,\n                email: '',\n                firstname: '',\n                lastname: '',\n                phone: '',\n                role: '',\n                dealGroup: '',\n                dealship: '',\n                img: '',\n                showTip: false,\n                showETip: false\n            }\n        },\n        mounted() {\n            this.img = this.$store.state.userInfo.avatarUrl;\n            console.log(this.$store.state.userInfo.avatarUrl);\n            httpclient.post(\"/api/v1/getUserById\", {\n                userId: this.$store.state.userInfo.userId\n            }).then(response => {\n                this.email = response.data.data.userEmail ? response.data.data.userEmail : '';\n                this.firstname = response.data.data.firstName;\n                this.lastname = response.data.data.lastName;\n                this.phone = response.data.data.phone;\n                this.role = response.data.data.role;\n                this.dealship = response.data.data.storeName;\n                this.dealGroup = response.data.data.tenantName;\n            })\n        },\n        methods: {\n            savefile(event) {\n                let file = event.target.files;\n                let fb = new FormData();\n                fb.append(\"image\", file[0]);\n                httpclient.post('/api/v1/user/updateAvatar', fb).then(response => {\n                    if (response.data.code === 200) {\n                        this.img = response.data.data.avatarUrl;\n                        // this.$store.state.user_info.avatarUrl = this.img;\n                        this.showTip = true;\n                        let userPersonInfo = {\n                            avatarUrl:this.img,\n                            firstName:this.firstname,\n                            lastName:this.lastname\n                        };\n                        this.$store.dispatch('user_Personal_Info',userPersonInfo)\n                    } else {\n                        this.showETip = true;\n                    }\n                })\n            },\n            saveUserInfo() {\n                if (this.firstname && this.lastname && this.phone) {\n                    httpclient.post('/api/v1/updateUserDetail',{\n                        firstName: this.firstname,\n                        lastName: this.lastname,\n                        userPhone: this.phone\n                    }).then((res) => {\n                         if(res.data.code === 200){\n                            let userPersonInfo = {\n                                avatarUrl:this.img,\n                                firstName:this.firstname,\n                                lastName:this.lastname\n                            };\n                            console.log(userPersonInfo)\n                            this.$store.dispatch('user_Personal_Info',userPersonInfo);\n                             this.showTip = true;\n                         }\n                    })\n                }\n            }\n        }\n    }\n</script>"]}]}