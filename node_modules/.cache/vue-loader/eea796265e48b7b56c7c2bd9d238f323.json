{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/soldManager/soldVehicle.vue?vue&type=style&index=0&id=073c3b86&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/soldManager/soldVehicle.vue","mtime":1576640270000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.card {\n    width: 100%;\n}\n.show-map {\n    .modal-dialog {\n        max-width: 80%;\n    }\n}\n.lots {\n    .margin-right-4 {\n        margin-right: 4px;\n    }\n    .margin-top-2 {\n        margin-top: 2%;\n    }\n    .photo {\n        object-fit: cover;\n        border-radius: 4px;\n    }\n    .cursor-point {\n        cursor: pointer;\n    }\n    .card-header span {\n        margin-left: 10px;\n    }\n    .card-header {\n        .add-lot {\n            float: right;\n        }\n    }\n    th, td {\n        height: 44px;\n        line-height: 44px;\n    }\n}\n",{"version":3,"sources":["soldVehicle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"soldVehicle.vue","sourceRoot":"src/views/dashboard/soldManager","sourcesContent":["<template>\n    <div class=\"animated fadeIn lots\">\n        <b-card>\n            <div slot=\"header\">\n                {{ $t('m.dashboard.vehicles') }}\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"photo\" slot-scope=\"data\">\n                        <img :src=\"data.item.photo + '?width=300&height=300'\" class=\"photo\" width=\"100px\" height=\"100px\">\n                    </template>\n                    <template slot-scope=\"data\" slot=\"info\">\n                        <div class=\"cursor-point\" @click=\"$router.push('/sold-manager/detail/' + data.item.id)\" v-html=\"data.item.info\"></div>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <div class=\"mapLocation d-inline-block margin-right-4\"\n                             @click=\"showMapTip(data.item.lat, data.item.lng)\"><i\n                                class=\"cui cui-location-pin btn btn-sm btn-secondary color-white\"\n                                :class=\"data.item.lat || data.item.lng ? 'btn-success' : '' \"></i></div>\n                        <div class=\"btn btn-sm btn-info vehicledetail color-white d-inline-block\"\n                             @click=\"$router.push('/sold-manager/detail/' + data.item.id)\"><i class=\"fa fa-eye\"></i></div>\n                    </template>\n                </b-table>\n            </div>\n            <b-row v-if=\"total > 0\" class=\"margin-top-2\">\n                <b-col sm=\"4\" lg=\"4\">\n                    <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                        {{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? total :currentPage * 10 }} {{ $t('m.common.of') }} {{total}} {{ $t('m.common.entries') }}\n                    </div>\n                </b-col>\n                <b-col sm=\"8\" lg=\"8\">\n                    <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"pageSize\" @input=\" changePage(currentPage)\"></b-pagination>\n                </b-col>\n            </b-row>\n        </b-card>\n\n        <b-modal ref=\"my-modal\" :title=\"tipTitle\" :ok-title=\"$t('m.tip.b_ok')\" v-model=\"showMap\" @ok=\"showMap = false\" class=\"show-map\" ok-only>\n            <myMap :map=\"map\"></myMap>\n        </b-modal>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n    .card {\n        width: 100%;\n    }\n    .show-map {\n        .modal-dialog {\n            max-width: 80%;\n        }\n    }\n    .lots {\n        .margin-right-4 {\n            margin-right: 4px;\n        }\n        .margin-top-2 {\n            margin-top: 2%;\n        }\n        .photo {\n            object-fit: cover;\n            border-radius: 4px;\n        }\n        .cursor-point {\n            cursor: pointer;\n        }\n        .card-header span {\n            margin-left: 10px;\n        }\n        .card-header {\n            .add-lot {\n                float: right;\n            }\n        }\n        th, td {\n            height: 44px;\n            line-height: 44px;\n        }\n    }\n</style>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import myMap from '@/components/map';\n    export default {\n        name: 'lots',\n        inject: ['reload'],\n        components: {\n            myMap,\n        },\n        data() {\n            return {\n                currentPage: 1,\n                pageSize: 10,\n                table: null,\n                curDel: null,\n                show: false,\n                btnGroup: {\n                    btnFirst: this.$t('m.tip.b_cancel'),\n                    btnSecond: this.$t('m.tip.b_ok')\n                },\n                tableFields: {\n                    serviceNum: {\n                        label: this.$t('m.sold_vehicle.sold_vehicle_id'),\n                        class: \"text-center\"\n                    },\n                    photo: {\n                        label: this.$t('m.vehicle.photo'),\n                        class: \"text-center\"\n                    },\n                    info: {\n                        label: this.$t('m.sold_vehicle.info'),\n                        class: \"text-center\"\n                    },\n                    mileage: {\n                        label: this.$t('m.sold_vehicle.mileage'),\n                        class: \"text-center\"\n                    },\n                    days: {\n                        label: this.$t('m.sold_vehicle.sold_days'),\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: this.$t('m.vehicle.actions'),\n                        class: \"text-center\"\n                    }\n                },\n                total: 0,\n                totalPages:0,\n                tipTitle: '',\n                showMap: false,\n                map: {}\n\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage);\n        },\n        methods: {\n            initData(page) {\n                httpClient.get(`/api/v1/saledvehicle/list?pageNo=${page}`).then(response => {\n                    if (response.data.data && response.data.code == 200) {\n                        this.total = response.data.data ? response.data.data.rowCount : 0;\n                        this.filterData(response.data.data);\n                        this.totalPages = response.data.data.totalPages;\n                    }\n                })\n            },\n            filterData(data){\n                this.table = data.datas.map(item => {\n                    let year = item.vehicleYear ? item.vehicleYear : 'N/A';\n                    let make = item.vehicleMake ? item.vehicleMake : 'N/A';\n                    let model = item.vehicleModel ? item.vehicleModel : 'N/A';\n                    let alias = item.alias ? \"-\" + item.alias : '';\n                    let color = item.color ? item.color : 'N/A';\n                    let trim = item.trim ? item.trim : 'N/A';\n                    let stock = item.stockNumber ? item.stockNumber : 'N/A';\n                    let mile = \"N/A\";\n                    if (this.$i18n.locale === 'en-US') {\n                        mile = (item.odbmeter * 0.0006214).toFixed(0)\n                    } else {\n                        mile = (item.odbmeter / 1000).toFixed(0)\n                    }\n                    return {\n                        serviceNum: item.vehicleServiceNum,\n                        photo: item.vehicleUrl ? item.vehicleUrl : require(\"@/assets/pages-img/placeholder.svg\"),\n                        info: `<p style=\"margin-bottom: 0px;line-height: 32px;\"><span style=\"color:rgb(32, 168, 216);font-weight: bolder; \">${year} ${make} ${model} ${alias}</span></p><p style=\"line-height: 14px;margin-bottom: 6px;\">${color}„ÄÅ${trim}</p> <p style=\"line-height: 14px;margin-bottom: 6px;\"> ${stock}</p> `,\n                        stock: item.stockNumber,\n                        mileage: mile,\n                        lat: item.lastLocationLat,\n                        lng: item.lastLocationLng,\n                        days: item.saledDays ? item.saledDays : 0,\n                        id: item.id,\n                    }\n                });\n            },\n            prevPage(){\n                this.initData(this.currentPage > 1  ? this.currentPage - 1 : 1)\n            },\n            nextPage(){\n                this.initData(this.currentPage >= this.pageCount  ? this.currentPage : this.currentPage + 1)\n            },\n            changePage(page) {\n                this.initData(page);\n            },\n            showMapTip(lat, lng) {\n                if (lat) {\n                    this.map = {\n                        lat: lat,\n                        lng: lng,\n                        area: [],\n                        info: \"\"\n                    };\n                    this.showMap = true;\n                }\n            },\n        }\n    }\n</script>\n"]}]}