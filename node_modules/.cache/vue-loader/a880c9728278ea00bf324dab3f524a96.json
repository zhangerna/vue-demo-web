{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/components/reportAll/orderAnalysis.vue?vue&type=style&index=0&id=2808909b&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/components/reportAll/orderAnalysis.vue","mtime":1576562643000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.margin20 {\n    margin-top: 20px;\n}\n.width20 {\n    width: 20%;\n    margin-right: 10px;\n}\n.margin-b-4 {\n    margin-bottom: 4px;\n}\n#order-line, #order-status, #drive-duration {\n    height: 260px;\n}\n.test-number {\n    color: #20a8d8;\n}\n.blue-interval {\n    width: 10px;\n    height: 10px;\n    background: #20a8d8;\n    display: inline-block;\n    margin-right: 10px;\n}\n",{"version":3,"sources":["orderAnalysis.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderAnalysis.vue","sourceRoot":"src/views/dashboard/testDrive/components/reportAll","sourcesContent":["<template>\n    <div class=\"order-analysis\">\n        <b-card>\n            <div slot=\"header\">\n                {{ $t('m.report_all.appoint_order_analysis') }}\n                <div class=\"float-right\">\n                    {{ $t('m.report.create_time') }}:{{ data.createTime ? getDateString(data.createTime) : '' }}\n                </div>\n            </div>\n            <div class=\"content\">\n                <div class=\"filter-module\">\n                    <b-form-select v-model=\"vehicleId\" class=\"width20\" @change=\"changeOrderType()\">\n                        <option value=\"\">{{ $t('m.report_all.whole_vehicle') }}</option>\n                        <option v-for=\"(item, key) in vehicleList\" :key=\"key\" :value=\"key + 1\">\n                            {{ item.vehicleYear\t }}{{ item.vehicleMake\t }}{{ item.vehicleModel\t }}\n                        </option>\n                    </b-form-select>\n<!--                    二级联动-->\n                    <b-form-select v-model=\"provinceId\" class=\"width20\" @change=\"changeOrderType()\">\n                        <option value=\"\">{{ $t('m.report_all.whole_state') }}</option>\n                        <option v-for=\"(item, key) in provinceList\" :key=\"key + 1\" :value=\"key + 1\">\n                            {{ item.provinceName }}\n                        </option>\n                    </b-form-select>\n                    <b-form-select v-model=\"cityId\" class=\"width20\" @change=\"changeOrderType()\">\n                        <option value=\"\">{{ $t('m.add_shop.please_select') }}</option>\n                        <option v-for=\"(item, key) in provinceId ? (provinceList[provinceId - 1]['cityLevelResponseList']) : []\" :key=\"key\" :value=\"key + 1\">\n                            {{ item.cityName }}\n                        </option>\n                    </b-form-select>\n\n                    <b-form-select v-model=\"userTime\" class=\"width20\" @change=\"changeOrderType()\">\n                        <option v-for=\"(item, key) in timeList\" :key=\"key\" :value=\"item.val\">\n                            {{ item.name }}\n                        </option>\n                    </b-form-select>\n                </div>\n                <b-card class=\"margin20\">\n                    <div slot=\"header\">\n                        {{ $t('m.report_all.appoint_order_trend') }}\n                    </div>\n                    <div class=\"content\">\n                        <p>{{ $t('m.report_all.appoint_order') }}：{{ data.orderTotalNum }}</p>\n                        <div class=\"text-center\">\n                            <label class=\"btn-primary btn\">{{ $t('m.report_all.new_appoint_order') }} {{ data.orderChangeTotalNum }}</label>\n                        </div>\n                        <div class=\"test-number text-center margin20\">\n                            <i class=\"blue-interval\"></i><span>{{ $t('m.report_all.appoint_order_count') }}</span>\n                        </div>\n                        <div class=\"echart-line\">\n                            <div id=\"order-line\"></div>\n                        </div>\n                    </div>\n                </b-card>\n                <b-row>\n                    <b-col sm=\"6\">\n                        <b-card>\n                            <div slot=\"header\">\n                                {{ $t('m.cloud.appoint_order_status') }}\n                            </div>\n                            <div class=\"content\">\n                                <div id=\"order-status\"></div>\n                            </div>\n                        </b-card>\n                    </b-col>\n                    <b-col sm=\"6\">\n                        <b-card>\n                            <div slot=\"header\">\n                                {{ $t('m.cloud.drive_time') }}\n                            </div>\n                            <div class=\"content\">\n                                <div id=\"drive-duration\"></div>\n                            </div>\n                        </b-card>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"6\">\n                        <b-card>\n                            <div slot=\"header\">\n                                {{ $t('m.report_all.appoint_area') }}\n                            </div>\n                            <div class=\"content\">\n                                <div class=\"area-block\" v-for=\"(item, key) in data.lotAreaMap\" :key=\"key\">\n                                    <p class=\"margin-b-4\">\n                                        <span>{{ item.parkingLotAreaName }}</span>\n                                        <span class=\"float-right\">{{ item.orderNum }}</span>\n                                    </p>\n                                    <b-progress height=\"2px\" :value=\"item.orderNum\"></b-progress>\n                                </div>\n                            </div>\n                        </b-card>\n                    </b-col>\n                    <b-col sm=\"6\">\n                        <b-card>\n                            <div slot=\"header\">\n                                {{ $t('m.cloud.order_drive_store') }}\n                            </div>\n                            <div class=\"content\">\n                                <div class=\"drive-block\" v-for=\"(item, key) in data.orderLotReportMap\" :key=\"key\">\n                                    <p class=\"margin-b-4\">\n                                        <span>{{ item.parkingLotName }}</span>\n                                        <span class=\"float-right\">{{ item.orderNum }}</span>\n                                    </p>\n                                    <b-progress height=\"2px\" :value=\"item.orderNum\"></b-progress>\n                                </div>\n                            </div>\n                        </b-card>\n                    </b-col>\n                </b-row>\n            </div>\n        </b-card>\n    </div>\n</template>\n\n<script>\n    import httpClient from '@/utils/httpclient';\n    import echarts from 'echarts';\n    import { getDateString } from '@/utils/date';\n    export default {\n        name: \"orderAnalysis\",\n        data() {\n            return {\n                vehicleId: '',\n                provinceId: '',\n                cityId: '',\n                timeList: [\n                    {\n                        name: this.$t('m.report_all.day10'),\n                        val: \"7\"\n                    },\n                    {\n                        name: this.$t('m.report_all.day30'),\n                        val: \"30\"\n                    },\n                    {\n                        name: this.$t('m.report_all.day90'),\n                        val: \"90\"\n                    }\n                ],\n                userTime: '30',\n                orderLine: {\n                    tooltip: {\n                        trigger: 'axis'\n                    },\n                    xAxis: {\n                        show: true,\n                        data: [],\n                        axisLabel: {\n                            interval: 0\n                        },\n                        axisLine: {\n                            show: true,\n                        },\n                        axisTick: {\n                            show: true\n                        }\n                    },\n                    yAxis: {\n                        splitLine: {\n                            show: false\n                        },\n                        type: 'value',\n                        show: true,\n                        minInterval: 1,\n                        name: ''\n                    },\n                    series: {\n                        type: \"line\",\n                        data: [],\n                        animation: true,\n                        itemStyle: {\n                            normal: {\n                                color: \"#20a8d8\",\n                            }\n                        },\n                        name: this.$t('m.report_all.appoint_order_count')\n                    },\n                    grid: {\n                        x: 30,\n                        y: 40,\n                        x2: 20,\n                        y2: 80\n                    }\n                },\n                data: {},\n                orderStatus: {\n                    tooltip: {\n                        trigger: 'item'\n                    },\n                    legend: {\n                        y: \"20px\",\n                        data:[this.$t('m.report_all.no_drive'), this.$t('m.report_all.had_drive')]\n                    },\n                    series: {\n                        type:'pie',\n                        label: {\n                            show: false\n                        },\n                        labelLine: {\n                            show: false\n                        },\n                        radius : '68%',\n                        center: ['50%', '60%'],\n                        data:[],\n                        color: ['rgb(54, 162, 235)','rgb(255,99,132)']\n                    }\n                },\n                driveDuration: {\n                    tooltip: { trigger: 'item' },\n                    legend: {\n                        y: \"20px\",\n                        data:[this.$t('m.report_all.time_less10'), this.$t('m.report_all.time_1020'), this.$t('m.report_all.time_2030'), this.$t('m.report_all.time_3040'), this.$t('m.report_all.time_more40')]\n                    },\n                    series: {\n                        label: {\n                            show: false\n                        },\n                        labelLine: {\n                            show: false\n                        },\n                        type:'pie',\n                        radius : '68%',\n                        center: ['50%', '60%'],\n                        data: [],\n                        color: ['rgb(32, 168, 216)', 'rgb(232, 62, 140)', 'rgb(248, 203, 0)', 'rgb(77, 189, 116)', 'rgb(99, 194, 222)']\n                    }\n                },\n                vehicleList: [],\n                provinceList: []\n            }\n        },\n        mounted() {\n            httpClient.get('/api/v1/clouddrive/order/vehicletypelist').then(response => {\n                if (response.data.code == 200) {\n                    this.vehicleList = response.data.data.vehicleSelectDetailResponseList;\n                }\n            });\n            httpClient.get('/api/v1/clouddrive/order/provincialLevellist').then(response => {\n                if (response.data.code == 200) {\n                    this.provinceList = response.data.data;\n                }\n            });\n            this.initData();\n        },\n        methods: {\n            getDateString,\n            changeOrderType() {\n                this.initData();\n            },\n            initData() {\n                httpClient.post(`/api/v1/clouddrive/manyreport/ordermanyreport`, {\n                    timeRange: this.userTime,\n                    vehicleMake: this.vehicleId ? this.vehicleList[this.vehicleId-1].vehicleMake : '',\n                    vehicleYear: this.vehicleId ? this.vehicleList[this.vehicleId-1].vehicleYear : '',\n                    vehicleModel: this.vehicleId ? this.vehicleList[this.vehicleId-1].vehicleModel : '',\n                    parkingStateCode: this.provinceId ? this.provinceList[this.provinceId - 1]['provinceId'] : '',\n                    parkingCityCode: this.cityId && this.provinceId ? this.provinceList[this.provinceId - 1]['cityLevelResponseList'][this.cityId - 1]['cityId'] : ''\n                }).then(response => {\n                    if (response.data.code == 200){\n                        this.data = response.data.data;\n                        this.getOrder(response.data.data.reportChangeDTOList);\n                        this.getOrderStatus(response.data.data);\n                        this.getDriveDuration(response.data.data);\n                    }\n                });\n            },\n            getOrder(data) {\n                let xList = [];\n                let yList = [];\n                data.map((item) => {\n                    xList.push(item.orderDate);\n                    yList.push(item.orderTotal);\n                });\n                if (this.userTime == 7) {\n                    this.orderLine.xAxis.axisLabel.interval = 0;\n                } else {\n                    this.orderLine.xAxis.axisLabel.interval = 6;\n                }\n                this.orderLine.xAxis.data = xList;\n                this.orderLine.series.data = yList;\n                echarts.init(document.getElementById('order-line')).setOption(this.orderLine)\n            },\n            getOrderStatus(data) {\n                this.orderStatus.series.data = [\n                    {value: data.notTestDriveNum, name:this.$t('m.report_all.no_drive')},\n                    {value: data.testDriveNum, name:this.$t('m.report_all.had_drive')}\n                ];\n                echarts.init(document.getElementById('order-status')).setOption(this.orderStatus);\n            },\n            getDriveDuration(data) {\n                this.driveDuration.series.data = [\n                    {value: data.lessTenMinute, name:this.$t('m.report_all.time_less10')},\n                    {value: data.betweenTenAndTwentyMin, name:this.$t('m.report_all.time_1020')},\n                    {value: data.betweenTwentyAndThirtyMin, name:this.$t('m.report_all.time_2030')},\n                    {value: data.betweenThirtyAndFortyMin, name:this.$t('m.report_all.time_3040')},\n                    {value: data.moreFortyMin, name:this.$t('m.report_all.time_more40')}\n                ];\n                echarts.init(document.getElementById('drive-duration')).setOption(this.driveDuration)\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .margin20 {\n        margin-top: 20px;\n    }\n    .width20 {\n        width: 20%;\n        margin-right: 10px;\n    }\n    .margin-b-4 {\n        margin-bottom: 4px;\n    }\n    #order-line, #order-status, #drive-duration {\n        height: 260px;\n    }\n    .test-number {\n        color: #20a8d8;\n    }\n    .blue-interval {\n        width: 10px;\n        height: 10px;\n        background: #20a8d8;\n        display: inline-block;\n        margin-right: 10px;\n    }\n</style>\n"]}]}