{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/alertDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/alertDetail.vue","mtime":1562055511000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from \"@/utils/httpclient\";\nimport { getDateString } from \"@/utils/date\";\nimport googleMap from \"@/components/googleMap\";\nimport model from \"@/components/model\"\n\nexport default {\n    name: \"alertDetail\",\n    components: {\n        googleMap,\n        model\n    },\n    inject: ['reload'],\n    data() {\n        return {\n            data: {},\n            showMap: false,\n            map:{},\n            show: false,\n            updateInfo: '',\n            btnGroup: {btnFirst:this.$t('m.tip.b_cancel'), btnSecond: this.$t('m.tip.b_ok')},\n            markedAt:'',\n        }\n    },\n    mounted() {\n        httpClient.post('/api/v1/alert/detail',{\n            alertId: this.$route.params.id\n        }).then(response => {\n            this.data = response.data.data;\n            this.markedAt = response.data.data.markedAt? getDateString(response.data.data.markedAt) : 'N/A';\n            let year = this.data.year ? this.data.year : 'N/A';\n            let make = this.data.make ? this.data.make : 'N/A';\n            let model = this.data.model ? this.data.model : 'N/A';\n            let info = (year == 'N/A' && make == 'N/A' && model == 'N/A') ? 'N/A' : year + ' ' + make + ' ' + model;\n            this.map = {\n                lat: this.data.lat ? this.data.lat : 0,\n                lng: this.data.lng ? this.data.lng : 0,\n                area: this.data.areaCoordinates ? this.data.areaCoordinates : [],\n                vehicleInfo: info\n            }\n        })\n    },\n    methods: {\n        filterTime (time) {\n            return getDateString(time);\n        },\n        showM() {\n            if (this.map.lat && this.map.lng) {\n                this.showMap = true;\n            }\n        },\n        updateStatus() {\n            httpClient.post('/api/v1/alert/update/status', {\n                alertId: this.data.id\n            }).then(response => {\n                if (response.data.code == 200) {\n                    this.reload();\n                } else {\n                    this.reload();\n                }\n            }).catch(error => {\n            })\n        }\n    }\n}\n",{"version":3,"sources":["alertDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"alertDetail.vue","sourceRoot":"src/views/dashboard/dashboardMain","sourcesContent":["<template>\n    <div class=\"animated fadeIn alert-detail\">\n        <b-card>\n            <div slot=\"header\">\n                <i class=\"fa fa-plus-square-o\"></i>\n                {{ $t('m.alert_detail.title') }}\n            </div>\n            <div class=\"content\">\n                <b-list-group>\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.alert.type') }}\n                        <div>{{ data.alertTypeName }}</div>\n                    </b-list-group-item>\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.alert.desc') }}\n                        <div>{{ data.description }}</div>\n                    </b-list-group-item>\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.alert.time') }}\n                        <div>{{ filterTime(data.createTime) }}</div>\n                    </b-list-group-item>\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.alert.status') }}\n                        <div>\n                            <template v-if=\"data.alertStatus == 1\">\n                                <span class=\"badge badge-pill badge-success\">{{ data.alertMarkAction == 'Read' ? 'Read' : 'Solved'}}</span>\n                            </template>\n                            <template v-else>\n                                <span class=\"badge badge-pill badge-danger\">{{ data.alertMarkAction == 'Read' ? 'Unread' : 'Unsolved'}}</span>\n                            </template>\n                        </div>\n                    </b-list-group-item>\n\n\n                    <b-list-group-item v-if=\"data.alertStatus === 1\" class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.alert.make_by') }}\n                        <div>{{ data.markedBy ? data.markedBy : 'N/A' }}</div>\n                    </b-list-group-item>\n\n                    <b-list-group-item v-if=\"data.alertStatus === 1\" class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.alert.make_at') }}\n                        <div>{{ markedAt }}</div>\n                    </b-list-group-item>\n\n\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.common.stock_num2') }}\n                        <div>{{ data.stockNum ? data.stockNum : 'N/A' }}</div>\n                    </b-list-group-item>\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\">\n                        {{ $t('m.vehicle.vehicle') }}\n                        <div>\n                            <span class=\"btn btn-sm btn-ghost-info\" @click=\"showM\">\n                                <i class=\"cui cui-location-pin\"></i>\n                            </span>\n                            <template v-if=\"!data.year && !data.make && !data.model\">\n                                N/A\n                            </template>\n                            <template v-else>\n                                {{ data.year ? data.year : 'N/A' }} {{ data.make ? data.make : 'N/A' }} {{ data.model ? data.model : 'N/A' }}\n                            </template>\n                        </div>\n                    </b-list-group-item>\n                    <b-list-group-item class=\"d-flex justify-content-between align-items-center\" style=\"color: #20a8d8;cursor: pointer\" @click=\"$router.push('/vehicle/detail/'+ data.vehicleId)\">\n                        {{ $t('m.common.detail') }}\n                        <div> > </div>\n                    </b-list-group-item>\n                </b-list-group>\n                <div class=\"butt-group\">\n                    <template v-if=\"data.alertStatus == 1\">\n                        <b-button class=\"btn mt-2 btn-secondary\" disabled>\n                            {{ $t('m.alert.b_make') }}\n                        </b-button>\n                    </template>\n                    <template v-else>\n                        <b-button class=\"btn mt-2 btn-success\" @click=\"updateStatus\">\n                            {{ $t('m.alert.b_make') }}\n                        </b-button>\n                    </template>\n                </div>\n            </div>\n        </b-card>\n        <b-modal ref=\"my-modal\" :title=\"map.info\" v-model=\"showMap\" @ok=\"showMap = false\">\n            <google-map :map=\"map\"></google-map>\n        </b-modal>\n        <model\n               :show=\"show\"\n               :title=\"'Warn'\"\n               :content=\"updateInfo\"\n               :buttonText=\"btnGroup\"\n               @closeRemindBox=\"show = false\"\n        ></model>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .alert-detail {\n        .content {\n            max-width: 900px;\n            margin: 4% auto;\n            .value {\n                text-align: right;\n            }\n            .row {\n                height: 46px;\n                border-top: 1px solid #cccccc;\n            }\n            .butt-group {\n                margin-top: 1%;\n            }\n        }\n        @media (min-width: 576px) {\n            .modal-dialog {\n                max-width: 80%;\n            }\n        }\n    }\n</style>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import { getDateString } from \"@/utils/date\";\n    import googleMap from \"@/components/googleMap\";\n    import model from \"@/components/model\"\n\n    export default {\n        name: \"alertDetail\",\n        components: {\n            googleMap,\n            model\n        },\n        inject: ['reload'],\n        data() {\n            return {\n                data: {},\n                showMap: false,\n                map:{},\n                show: false,\n                updateInfo: '',\n                btnGroup: {btnFirst:this.$t('m.tip.b_cancel'), btnSecond: this.$t('m.tip.b_ok')},\n                markedAt:'',\n            }\n        },\n        mounted() {\n            httpClient.post('/api/v1/alert/detail',{\n                alertId: this.$route.params.id\n            }).then(response => {\n                this.data = response.data.data;\n                this.markedAt = response.data.data.markedAt? getDateString(response.data.data.markedAt) : 'N/A';\n                let year = this.data.year ? this.data.year : 'N/A';\n                let make = this.data.make ? this.data.make : 'N/A';\n                let model = this.data.model ? this.data.model : 'N/A';\n                let info = (year == 'N/A' && make == 'N/A' && model == 'N/A') ? 'N/A' : year + ' ' + make + ' ' + model;\n                this.map = {\n                    lat: this.data.lat ? this.data.lat : 0,\n                    lng: this.data.lng ? this.data.lng : 0,\n                    area: this.data.areaCoordinates ? this.data.areaCoordinates : [],\n                    vehicleInfo: info\n                }\n            })\n        },\n        methods: {\n            filterTime (time) {\n                return getDateString(time);\n            },\n            showM() {\n                if (this.map.lat && this.map.lng) {\n                    this.showMap = true;\n                }\n            },\n            updateStatus() {\n                httpClient.post('/api/v1/alert/update/status', {\n                    alertId: this.data.id\n                }).then(response => {\n                    if (response.data.code == 200) {\n                        this.reload();\n                    } else {\n                        this.reload();\n                    }\n                }).catch(error => {\n                })\n            }\n        }\n    }\n</script>\n\n"]}]}