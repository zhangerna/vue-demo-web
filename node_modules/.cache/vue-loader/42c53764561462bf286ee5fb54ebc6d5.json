{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/bindVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/bindVehicle.vue","mtime":1561029772000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport httpClient from \"@/utils/httpclient\";\nimport VehicleForm from \"@/components/vehicleForm\";\nexport default {\n    name: \"bindVehicle\",\n    inject: [\"reload\"],\n    components: {\n        VehicleForm\n    },\n    data() {\n        return {\n            step1: true,\n            step2: false,\n            step3: false,\n            deviceId: null,\n            step1Button: true,\n            imeiIsVaild: false,\n            imeiSuccess: false,\n            imeiDisable: false,\n            step2Button: true,\n            title: '',\n            data1: {},\n            data2: null,\n            showTip: false,\n            vin: '',\n            vinDisable: false,\n            vinIsVaild: false,\n            vinSuccess: false,\n            isClickStep2: false,\n            vehicleId: ''\n        }\n    },\n    watch: {\n        deviceId(newV) {\n            if (newV.length == 15) {\n                this.deviceId = newV;\n                this.imeiDisable = true;\n                this.imeiIsVaild = false;\n                this.imeiSuccess = true;\n                this.step1Button = false;\n            } else {\n                this.imeiIsVaild = true;\n            }\n        },\n        vin(newV) {\n            if (newV.length == 17) {\n                this.vin = newV;\n                this.vinDisable = true;\n                this.vinIsVaild = false;\n                this.vinSuccess = false;\n                this.step2Button = false;\n                this.clickStep2();\n            } else {\n                this.vinIsVaild = true;\n            }\n        }\n    },\n    mounted() {\n        this.step1 = false;\n        this.step2 = true;\n        this.deviceId = this.$route.query.deviceMac;\n    },\n    methods: {\n        reloadPage() {\n            window.location.reload();\n        },\n        unbind() {\n            httpClient.post('/api/v1/vehicle/unbind/device', {\n                deviceMac: this.deviceId,\n                vin: this.vin\n            }).then(response => {\n                if (response.data.code == 200) {\n                    this.vin = '';\n                    this.vinDisable = false;\n                    this.vinIsVaild = false;\n                    this.vinSuccess = false;\n                    this.step2Button = true;\n                    this.showTip = false;\n                    this.step1 = false;\n                    this.step2 = true;\n                } else {\n                    window.location.reload();\n                }\n            })\n        },\n        clickStep2() {\n            httpClient.get('/api/v1/vehicle/detail/vin?vin=' + this.vin, {\n            }).then(response => {\n                this.data2 = response.data.data;\n                this.data2.mac = this.deviceId;\n                if (this.data2.deviceMac == '') {\n                    this.isClickStep2 = true;\n                    this.vinSuccess = false;\n                } else {\n\n                }\n            })\n        },\n        showStep3(data) {\n            this.step1 = false;\n            this.step2 = false;\n            this.step3 = true;\n            this.vehicleId = data.vehicleId;\n        },\n        clickStep1() {\n            httpClient.post('/api/v1/device/vehiceldetail/mac', {\n                deviceMac: this.deviceId\n            }).then(response => {\n                this.data1 = response.data.data;\n                if (this.data1.vin == ''){\n                    this.step1 = false;\n                    this.step2 = true;\n                } else {\n                    this.vin = response.data.data.vin;\n                    this.title = `This device is currently paired with ${response.data.data.year} ${response.data.data.make} ${response.data.data.model} vin:${response.data.data.vin}`\n                    this.showTip = true;\n                }\n            }).catch(err => {\n                console.log(err);\n                this.vin = err.response.data.data.vin;\n                this.data1 = err.response.data.data;\n                this.title = `This device is currently paired with ${this.data1.year} ${this.data1.make} ${this.data1.model} vin:${this.data1.vin}`;\n                this.showTip = true;\n            })\n        }\n    }\n}\n",{"version":3,"sources":["bindVehicle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bindVehicle.vue","sourceRoot":"src/views/dashboard/dashboardMain","sourcesContent":["<template>\n    <div class=\"animated fadeIn bind-vehicle\">\n        <b-card>\n            <div slot=\"header\">\n                <i class=\"fa fa-plus-square\"></i>\n                Device Installation\n            </div>\n            <div class=\"content\">\n                <b-row class=\"step\" style=\"margin-left: -28px\">\n                    <b-col sm=\"4\">\n                        <button class=\"btn mx-3 px-4\" :class=\"step1 ? 'btn-success' : 'btn-secondary'\" style=\"padding-left: 0px;padding-right: 0px\">\n                            <strong>Step 1</strong><br />\n                            Input Device ID (IMEI)\n                        </button>\n                    </b-col>\n                    <b-col sm=\"4\">\n                        <button class=\"btn mx-3 px-4\" :class=\"step2 ? 'btn-success' : 'btn-secondary'\">\n                            <strong>Step 2</strong><br />\n                            Input Vehicle Info\n                        </button>\n                    </b-col>\n                    <b-col sm=\"4\">\n                        <button class=\"btn mx-3 px-4\" :class=\"step3 ? 'btn-success' : 'btn-secondary'\">\n                            <strong>Step 3</strong><br />\n                            Complete\n                        </button>\n                    </b-col>\n                </b-row>\n                <div class=\"step-info step1\" v-if=\"step1\">\n                    <b-form-group>\n                        <label>Device ID (IMEI)</label>\n                        <b-form-input type=\"text\" v-model=\"deviceId\" placeholder=\"Enter Device ID (IMEI)\" :class=\"imeiIsVaild ? 'is-invalid' : ''\" :disabled=\"imeiDisable\" maxlength=\"15\"></b-form-input>\n                        <p v-show=\"imeiIsVaild\" class=\"warn-imei\">{{ 'IMEI is Invalid' }}</p>\n                        <p v-show=\"imeiSuccess\" class=\"primary-imei\">{{ 'IMEI is Valid' }}</p>\n                    </b-form-group>\n                    <b-button type=\"submit\" :disabled=\"step1Button\" class=\"btn-success\" @click=\"clickStep1\">Next Step</b-button>\n                </div>\n                <div class=\"step-info step2\" v-if=\"step2\">\n                    <b-row>\n                        <b-col sm=\"6\">\n                            <b-form-group>\n                                <label>Device ID (IMEI)</label>\n                                <b-form-input type=\"text\" v-model=\"deviceId\" placeholder=\"Enter Device ID (IMEI)\" disabled maxlength=\"15\"></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                        <b-col sm=\"6\">\n                            <b-form-group>\n                                <label>VIN</label>\n                                <b-form-input type=\"text\" v-model=\"vin\" placeholder=\"Enter VIN\" maxlength=\"17\" :class=\"vinIsVaild ? 'is-invalid' : ''\" :disabled=\"vinDisable\"></b-form-input>\n                                <p v-show=\"vinIsVaild\" class=\"warn-imei\">{{ 'VIN is Invalid' }}</p>\n                                <p v-show=\"vinSuccess\" class=\"primary-imei\">{{ 'VIN is Valid' }}</p>\n                            </b-form-group>\n                        </b-col>\n                    </b-row>\n                    <vehicle-form\n                            v-if=\"isClickStep2\"\n                            :vehicleInfo=\"data2\"\n                            @showStep3=\"showStep3\"\n                    >\n                    </vehicle-form>\n                    <div class=\"text-center\" v-if=\"!isClickStep2\">\n                        <b-button type=\"submit\" :disabled=\"step2Button\" class=\"btn-success\">Submit</b-button>\n                    </div>\n                </div>\n                <div class=\"step-info step3\" v-if=\"step3\">\n                    <b-row class=\"justify-content-center\">\n                        <span style=\"font-size: 144px\">\n                            <i class=\"cui cui-check\"></i>\n                        </span>\n                    </b-row>\n                    <p class=\"text-center\">Installation Completed</p>\n                    <b-row class=\"justify-content-center\">\n                        <b-col sm=\"4\" md=\"4\" xs=\"12\">\n                            <button class=\"btn btn-block btn-outline-success\" @click=\"$router.push('/index')\">Dashboard</button>\n                        </b-col>\n                        <b-col sm=\"4\" md=\"4\" xs=\"12\">\n                            <button class=\"btn btn-block btn-outline-success\" @click=\"reloadPage()\">Continue</button>\n                        </b-col>\n                        <b-col sm=\"4\" md=\"4\" xs=\"12\">\n                            <button class=\"btn btn-block btn-outline-success\" @click=\"$router.push('/vehicle/detail/' + vehicleId)\">View Detail</button>\n                        </b-col>\n                    </b-row>\n                </div>\n            </div>\n        </b-card>\n        <b-modal ref=\"my-modal\" hide-footer :title=\"title\" v-model=\"showTip\" @ok=\"showTip = false\" class=\"mo-module\">\n            <div class=\"modal-footer\">\n                <b-button @click=\"showTip = false\">\n                    Cancel\n                </b-button>\n                <button @click=\"unbind\" class=\"btn btn-primary\">\n                    Unpair\n                </button>\n            </div>\n        </b-modal>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .bind-vehicle {\n        .content > .row {\n            margin-left: 0px!important;\n        }\n        .modal {\n            .modal-footer {\n                border-top: 0;\n            }\n        }\n        .content {\n            max-width: 600px;\n            margin: 0 auto;\n            .step {\n                button {\n                    width: 100%;\n                }\n                button:first-child {\n                    margin-left: 0px!important;\n                }\n            }\n            .step1 {\n                max-width: 300px;\n                margin: 10% auto 0;\n                input {\n                    max-width: 300px;\n                }\n            }\n            .step2 {\n                margin-top: 6%;\n                .row {\n                    margin-left: 0px!important;\n                }\n                button {\n                    margin-left: 15px;\n                }\n            }\n            .warn-imei {\n                color: #f86c6b;\n                font-size: 12px;\n                margin-top: 4px;\n            }\n            .primary-imei {\n                color: #4dbd74;\n                font-size: 12px;\n                margin-top: 4px;\n            }\n        }\n    }\n</style>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import VehicleForm from \"@/components/vehicleForm\";\n    export default {\n        name: \"bindVehicle\",\n        inject: [\"reload\"],\n        components: {\n            VehicleForm\n        },\n        data() {\n            return {\n                step1: true,\n                step2: false,\n                step3: false,\n                deviceId: null,\n                step1Button: true,\n                imeiIsVaild: false,\n                imeiSuccess: false,\n                imeiDisable: false,\n                step2Button: true,\n                title: '',\n                data1: {},\n                data2: null,\n                showTip: false,\n                vin: '',\n                vinDisable: false,\n                vinIsVaild: false,\n                vinSuccess: false,\n                isClickStep2: false,\n                vehicleId: ''\n            }\n        },\n        watch: {\n            deviceId(newV) {\n                if (newV.length == 15) {\n                    this.deviceId = newV;\n                    this.imeiDisable = true;\n                    this.imeiIsVaild = false;\n                    this.imeiSuccess = true;\n                    this.step1Button = false;\n                } else {\n                    this.imeiIsVaild = true;\n                }\n            },\n            vin(newV) {\n                if (newV.length == 17) {\n                    this.vin = newV;\n                    this.vinDisable = true;\n                    this.vinIsVaild = false;\n                    this.vinSuccess = false;\n                    this.step2Button = false;\n                    this.clickStep2();\n                } else {\n                    this.vinIsVaild = true;\n                }\n            }\n        },\n        mounted() {\n            this.step1 = false;\n            this.step2 = true;\n            this.deviceId = this.$route.query.deviceMac;\n        },\n        methods: {\n            reloadPage() {\n                window.location.reload();\n            },\n            unbind() {\n                httpClient.post('/api/v1/vehicle/unbind/device', {\n                    deviceMac: this.deviceId,\n                    vin: this.vin\n                }).then(response => {\n                    if (response.data.code == 200) {\n                        this.vin = '';\n                        this.vinDisable = false;\n                        this.vinIsVaild = false;\n                        this.vinSuccess = false;\n                        this.step2Button = true;\n                        this.showTip = false;\n                        this.step1 = false;\n                        this.step2 = true;\n                    } else {\n                        window.location.reload();\n                    }\n                })\n            },\n            clickStep2() {\n                httpClient.get('/api/v1/vehicle/detail/vin?vin=' + this.vin, {\n                }).then(response => {\n                    this.data2 = response.data.data;\n                    this.data2.mac = this.deviceId;\n                    if (this.data2.deviceMac == '') {\n                        this.isClickStep2 = true;\n                        this.vinSuccess = false;\n                    } else {\n\n                    }\n                })\n            },\n            showStep3(data) {\n                this.step1 = false;\n                this.step2 = false;\n                this.step3 = true;\n                this.vehicleId = data.vehicleId;\n            },\n            clickStep1() {\n                httpClient.post('/api/v1/device/vehiceldetail/mac', {\n                    deviceMac: this.deviceId\n                }).then(response => {\n                    this.data1 = response.data.data;\n                    if (this.data1.vin == ''){\n                        this.step1 = false;\n                        this.step2 = true;\n                    } else {\n                        this.vin = response.data.data.vin;\n                        this.title = `This device is currently paired with ${response.data.data.year} ${response.data.data.make} ${response.data.data.model} vin:${response.data.data.vin}`\n                        this.showTip = true;\n                    }\n                }).catch(err => {\n                    console.log(err);\n                    this.vin = err.response.data.data.vin;\n                    this.data1 = err.response.data.data;\n                    this.title = `This device is currently paired with ${this.data1.year} ${this.data1.make} ${this.data1.model} vin:${this.data1.vin}`;\n                    this.showTip = true;\n                })\n            }\n        }\n    }\n</script>\n\n"]}]}