{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js!/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/components/amap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/components/amap.vue","mtime":1569392859000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { wgs84ToGcjo2 } from \"@/utils/coordtransform\";\nimport AMap from 'AMap';\nexport default {\n  name: \"amap\",\n  props: [\"map\", \"elId\"],\n  data: function data() {\n    return {\n      mapInfo: null,\n      mapObj: null,\n      marker: null,\n      polygon: null,\n      markers: [],\n      lat: \"\",\n      lng: \"\",\n      infoWindow: null,\n      safeLayer: null,\n      roadLayer: null\n    };\n  },\n  watch: {\n    map: function map(newVal) {\n      this.mapInfo = newVal;\n      this.initMap();\n    }\n  },\n  methods: {\n    addMarker: function addMarker(position, title, contentString) {\n      var marker = new AMap.Marker({\n        position: position,\n        map: this.mapObj,\n        icon: new AMap.Icon({\n          image: \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\",\n          size: new AMap.Size(60, 60),\n          imageSize: new AMap.Size(20, 30)\n        })\n      });\n\n      if (contentString) {\n        var infoWindow = new AMap.InfoWindow({\n          isCustom: true,\n          content: contentString,\n          offset: new AMap.Pixel(16, -45)\n        });\n        marker.on('click', function (e) {\n          infoWindow.open(window.mapObj, e.target.getPosition());\n        });\n      }\n    },\n    changeMapType: function changeMapType(type) {\n      if (type == 'default') {\n        this.roadLayer.hide();\n        this.safeLayer.hide();\n      } else {\n        this.roadLayer.show();\n        this.safeLayer.show();\n      }\n    },\n    initMap: function initMap() {\n      var _this = this;\n\n      var lnglat = wgs84ToGcjo2(this.mapInfo.lng, this.mapInfo.lat);\n      this.mapObj = new AMap.Map(this.elId ? this.elId : 'map', {\n        center: lnglat,\n        zoom: 17\n      });\n      this.safeLayer = new AMap.TileLayer.Satellite({});\n      this.roadLayer = new AMap.TileLayer.RoadNet({});\n      this.mapObj.add(this.safeLayer);\n      this.mapObj.add(this.roadLayer);\n      window.mapObj = this.mapObj;\n      var area2 = [];\n      this.mapInfo['area'] ? this.mapInfo['area'].map(function (item) {\n        var temp = item.split(\",\");\n        area2.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1])));\n      }) : '';\n      var polygon = new AMap.Polygon({\n        path: area2,\n        strokeColor: '#FF0000',\n        strokeOpacity: 0.8,\n        strokeWeight: 2,\n        fillColor: '#FF0000',\n        fillOpacity: 0.35\n      });\n      this.mapObj.add(polygon);\n\n      if (this.mapInfo.showMult) {\n        this.mapInfo.vehicleInfo.map(function (item) {\n          var temp = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n          var title = \"\".concat(item.year ? item.year : 'N/A', \" \").concat(item.make ? item.make : 'N/A', \" \").concat(item.model ? item.model : 'N/A');\n          var contentString = \"<a href='/vehicle/detail/\".concat(item.vehicleId, \"'>\\n                        <img style=\\\"background: #3a4149\\\" src=\\\"\").concat(item.photoPath ? item.photoPath : '/img/placeholder.5367544d.svg', \"\\\" width=\\\"100%\\\">\\n                        <h5 id=\\\"firstHeading\\\" class=\\\"firstHeading\\\">\").concat(item.year ? item.year : 'N/A', \" \").concat(item.make ? item.make : 'N/A', \" \").concat(item.model ? item.model : 'N/A', \"</h5>\\n                        </a>\");\n\n          _this.addMarker(temp, title, contentString);\n        });\n      } else {\n        this.addMarker(lnglat, this.mapInfo.vehicleInfo, null);\n      }\n\n      this.mapObj.setFitView();\n    }\n  }\n};",null]}