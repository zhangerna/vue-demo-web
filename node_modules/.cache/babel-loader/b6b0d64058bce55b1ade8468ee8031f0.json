{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js!/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testUserVerify.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testUserVerify.vue","mtime":1570770081000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport { getDateString } from \"@/utils/date\";\nexport default {\n  name: \"testUserVerify\",\n  inject: ['reload'],\n  data: function data() {\n    return {\n      data: {},\n      showMap: false,\n      updateUserStatus: false,\n      updateUserText: '',\n      map: {},\n      show: false,\n      updateInfo: '',\n      markedAt: '',\n      table: null,\n      idcardVerifyTime: null,\n      driverLicenseverifyTime: null,\n      idcardName: 'N/A',\n      idcardGender: 'N/A',\n      idcardNation: 'N/A',\n      idcardBirthDate: 'N/A',\n      idcardAddress: 'N/A',\n      idcardNumber: 'N/A',\n      idcardOrganization: 'N/A',\n      idcardExpireDate: 'N/A',\n      licenseNumber: 'N/A',\n      licenseName: 'N/A',\n      licenseGender: 'N/A',\n      licenseCountry: 'N/A',\n      licenseAddress: 'N/A',\n      licenseBirthDate: 'N/A',\n      licenseInitDate: 'N/A',\n      licenseCarClass: 'N/A',\n      licenseExpireDate: 'N/A',\n      selected_reason: 'null',\n      submitAuthTime: null,\n      reasonList: [{\n        value: 'null',\n        text: this.$t('m.add_shop.please_select')\n      }, {\n        value: 1,\n        text: this.$t('m.cloud.verify_success')\n      }, {\n        value: 2,\n        text: this.$t('m.cloud.idcard_verify_failed')\n      }, {\n        value: 3,\n        text: this.$t('m.cloud.license_verify_failed')\n      }, {\n        value: 4,\n        text: this.$t('m.cloud.difference_idcard_license')\n      }]\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    httpClient.get('/api/v1/clouddrive/user/detail?userId=' + this.$route.params.id).then(function (response) {\n      if (response.data.code == 200) {\n        _this.data = response.data.data;\n        _this.idcardVerifyTime = getDateString(_this.data.idCardResponse.certificationTime);\n        _this.driverLicenseverifyTime = getDateString(_this.data.driveLicenseResponse.certificationTime);\n        _this.submitAuthTime = _this.data.submitAuthTime ? getDateString(_this.data.submitAuthTime) : 0;\n\n        if (response.data.data.idCardResponse) {\n          var data = response.data.data.idCardResponse;\n          _this.idcardName = data.userName;\n          _this.idcardGender = data.gender ? data.gender === 1 ? _this.$t('m.common.boy') : data.gender === 2 ? _this.$t('m.common.girl') : 'N/A' : '';\n          _this.idcardNation = data.ethnicGroup;\n          _this.idcardBirthDate = data.birthDate;\n          _this.idcardAddress = data.address;\n          _this.idcardNumber = data.idcardNumber;\n          _this.idcardOrganization = data.issuingOrganization;\n          _this.idcardExpireDate = data.expireDate;\n        }\n\n        if (response.data.data.driveLicenseResponse) {\n          var _data = response.data.data.driveLicenseResponse;\n          _this.licenseNumber = _data.drivingLicenseNumber;\n          _this.licenseName = _data.userName;\n          _this.licenseGender = _data.gender ? _data.gender === 1 ? _this.$t('m.common.boy') : _this.$t('m.common.girl') : '';\n          _this.licenseCountry = _data.nationality;\n          _this.licenseAddress = _data.address;\n          _this.licenseBirthDate = _data.birthDate;\n          _this.licenseInitDate = _data.initialDrivingLicenseDate;\n          _this.licenseCarClass = _data.quasiDrivingModel;\n          _this.licenseExpireDate = _data.expireDate;\n        }\n      }\n    });\n  },\n  methods: {\n    filterData: function filterData(data) {\n      this.table = data.map(function (item) {\n        return {\n          orderId: item.orderServiceNum,\n          id: item.orderId,\n          phone: item.phone,\n          year: item.vehicleYear,\n          make: item.vehicleMake,\n          model: item.vehicleModel,\n          color: item.vehicleColor,\n          alias: item.vehicleAlias,\n          trim: item.vehicleTrim,\n          plat: item.vehiclePlate,\n          num: item.vehiclePlate,\n          // 库存编号\n          testInfo: item.parkingName,\n          pointTime: item.appointmentStartTime + \"~\" + item.appointmentEndTime,\n          status: item.orderStatus\n        };\n      });\n    },\n    saveUserInfo: function saveUserInfo() {\n      var _this2 = this;\n\n      //提交用户的信息\n      var driveLicenseResponse = {\n        address: this.licenseAddress,\n        birthDate: this.licenseBirthDate,\n        drivingLicenseNumber: this.licenseNumber,\n        userName: this.licenseName,\n        gender: this.licenseGender === '男' ? 1 : 2,\n        nationality: this.licenseCountry,\n        initialDrivingLicenseDate: this.licenseInitDate,\n        quasiDrivingModel: this.licenseCarClass,\n        expireDate: this.licenseExpireDate\n      };\n      var idCardResponse = {\n        userName: this.idcardName,\n        gender: this.idcardGender === '男' ? 1 : 2,\n        ethnicGroup: this.idcardNation,\n        birthDate: this.idcardBirthDate,\n        address: this.idcardAddress,\n        idcardNumber: this.idcardNumber,\n        issuingOrganization: this.idcardOrganization,\n        expireDate: this.idcardExpireDate\n      };\n      var verifyStatus = this.selected_reason;\n      var data = {\n        idCardResponse: idCardResponse,\n        driveLicenseResponse: driveLicenseResponse,\n        check: verifyStatus,\n        dUserId: this.$route.params.id\n      };\n      console.log(data);\n      httpClient.post('/api/v1/clouddrive/user/checkcard', data).then(function (res) {\n        if (res.data.code === 200 && res.data.data.result === true) {\n          _this2.updateUserStatus = true;\n          _this2.updateUserText = _this2.$t('m.tip.update_succ');\n        } else {\n          _this2.updateUserStatus = true;\n          _this2.updateUserText = _this2.$t('m.tip.update_failed');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }\n};",null]}