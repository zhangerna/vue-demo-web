{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/lots.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/lots.vue","mtime":1576755060000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport myMap from '@/components/map';\nimport model from \"@/components/model\";\nexport default {\n  name: 'lots',\n  inject: ['reload'],\n  components: {\n    myMap: myMap,\n    model: model\n  },\n  data: function data() {\n    return {\n      currentPage: 1,\n      pageSize: 10,\n      table: null,\n      curDel: null,\n      show: false,\n      show2: false,\n      btnGroup: {\n        btnFirst: this.$t('m.tip.b_cancel'),\n        btnSecond: this.$t('m.tip.confirm')\n      },\n      btnGroup2: {\n        btnFirst: '',\n        btnSecond: this.$t('m.tip.b_ok')\n      },\n      tableFields: {\n        parkingNum: {\n          label: this.$t('m.lots.parkingNum'),\n          class: \"text-center\"\n        },\n        name: {\n          label: this.$t('m.lots.name'),\n          class: \"text-center\"\n        },\n        address: {\n          label: this.$t('m.lots.address'),\n          class: \"text-center\"\n        },\n        storeName: {\n          label: this.$t('m.lots.store_name'),\n          class: \"text-center\"\n        },\n        dealership: {\n          label: this.$t('m.common.dealership'),\n          class: \"text-center\"\n        },\n        vehicles: {\n          label: this.$t('m.lots.all_vehicle'),\n          class: \"text-center\"\n        },\n        battery: {\n          label: this.$t('m.alert.alert_type_1'),\n          class: \"text-center\"\n        },\n        offline: {\n          label: this.$t('m.common.offline'),\n          class: \"text-center\"\n        },\n        actions: {\n          label: this.$t('m.vehicle.actions'),\n          class: \"text-center\"\n        }\n      },\n      total: 0,\n      totalPages: 0,\n      tipTitle: '',\n      showMap: false,\n      map: {}\n    };\n  },\n  mounted: function mounted() {\n    this.initData(this.currentPage);\n  },\n  methods: {\n    initData: function initData(page) {\n      var _this = this;\n\n      httpClient.get(\"/api/v1/lot/page?pageNo=\".concat(page)).then(function (response) {\n        if (response.data.data) {\n          _this.total = response.data.data ? response.data.data.rowCount : 0;\n\n          _this.filterData(response.data.data);\n\n          _this.totalPages = response.data.data.totalPages;\n        }\n      });\n    },\n    filterData: function filterData(data) {\n      this.table = data.datas.map(function (item) {\n        return {\n          name: item.parkingName,\n          address: item.address,\n          storeName: item.storeName,\n          dealership: item.tenantName,\n          vehicles: item.vehicleFilter.num,\n          battery: item.lowBatteryFilter.num,\n          offline: item.offLineFilter.num,\n          country: item.parkingCountryName,\n          state: item.parkingStateName,\n          city: item.parkingCityName,\n          area: item.parkingAreaName,\n          id: item.id,\n          parkingNum: item.parkingServiceNum\n        };\n      });\n    },\n    delId: function delId(id) {\n      this.curDel = id;\n      this.show = true;\n    },\n    hideTip: function hideTip(type) {\n      var _this2 = this;\n\n      if (type) {\n        httpClient.post('/api/v1/lot/delete', {\n          id: this.curDel\n        }).then(function () {\n          window.location.reload();\n        }).catch(function () {\n          _this2.show = false;\n          _this2.show2 = true;\n        });\n      } else {\n        this.show = false;\n      } // this.show = false;\n\n    },\n    hideTip2: function hideTip2() {\n      this.show2 = false;\n    },\n    linkVehicles: function linkVehicles(id) {\n      var filter = \"[{\\\"key\\\":\\\"parking\\\",\\\"value\\\":[\\\"\".concat(id, \"\\\"]}]\");\n      this.$router.push({\n        name: 'VehicleList',\n        query: {\n          filters: filter\n        }\n      });\n    },\n    linkBattery: function linkBattery(id) {\n      this.$router.push({\n        name: 'VehicleList',\n        query: {\n          filters: \"[{\\\"key\\\":\\\"parking\\\",\\\"value\\\":[\\\"\".concat(id, \"\\\"]},{\\\"key\\\":\\\"battery\\\",\\\"value\\\":[\\\"1\\\"]}]\")\n        }\n      });\n    },\n    linkSecondary: function linkSecondary(id) {\n      this.$router.push({\n        name: 'VehicleList',\n        query: {\n          filters: \"[{\\\"key\\\":\\\"parking\\\",\\\"value\\\":[\\\"\".concat(id, \"\\\"]},{\\\"key\\\":\\\"online\\\",\\\"value\\\":[\\\"2\\\"]}]\")\n        }\n      });\n    },\n    prevPage: function prevPage() {\n      this.initData(this.currentPage > 1 ? this.currentPage - 1 : 1);\n    },\n    nextPage: function nextPage() {\n      this.initData(this.currentPage >= this.pageCount ? this.currentPage : this.currentPage + 1);\n    },\n    changePage: function changePage(page) {\n      this.initData(page);\n    },\n    getVehicleList: function getVehicleList(id, area, centerCoor, packingName) {\n      var _this3 = this;\n\n      httpClient.get('/api/v1/inlotvehiclelist', {\n        params: {\n          parkingId: id\n        }\n      }).then(function (response) {\n        var latlng = centerCoor.split(\" \");\n        _this3.map = {\n          lat: Number(latlng[1]),\n          lng: Number(latlng[0]),\n          area: area,\n          vehicleInfo: response.data.data,\n          showMult: true\n        };\n        _this3.tipTitle = packingName;\n        _this3.showMap = true;\n      });\n    },\n    mapInfo: function mapInfo(id) {\n      var _this4 = this;\n\n      httpClient.get(\"/api/v1/lot/detail\", {\n        params: {\n          id: id\n        }\n      }).then(function (response) {\n        var data = response.data.data;\n\n        _this4.getVehicleList(id, data.areaCoordinate, data.centerCoordinate, data.parkingName);\n      });\n    }\n  }\n};",{"version":3,"sources":["lots.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,OAAA,UAAA,MAAA,oBAAA;AACA,OAAA,KAAA,MAAA,kBAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,MAAA,EAAA,CAAA,QAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA,KADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAHA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,CADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,MAAA,EAAA,IAJA;AAKA,MAAA,IAAA,EAAA,KALA;AAMA,MAAA,KAAA,EAAA,KANA;AAOA,MAAA,QAAA,EAAA;AACA,QAAA,QAAA,EAAA,KAAA,EAAA,CAAA,gBAAA,CADA;AAEA,QAAA,SAAA,EAAA,KAAA,EAAA,CAAA,eAAA;AAFA,OAPA;AAWA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,SAAA,EAAA,KAAA,EAAA,CAAA,YAAA;AAFA,OAXA;AAeA,MAAA,WAAA,EAAA;AACA,QAAA,UAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,mBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SADA;AAKA,QAAA,IAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,aAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SALA;AASA,QAAA,OAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,gBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SATA;AAaA,QAAA,SAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,mBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SAbA;AAiBA,QAAA,UAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,qBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SAjBA;AAqBA,QAAA,QAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,oBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SArBA;AAyBA,QAAA,OAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,sBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SAzBA;AA6BA,QAAA,OAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,kBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA,SA7BA;AAiCA,QAAA,OAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,EAAA,CAAA,mBAAA,CADA;AAEA,UAAA,KAAA,EAAA;AAFA;AAjCA,OAfA;AAqDA,MAAA,KAAA,EAAA,CArDA;AAsDA,MAAA,UAAA,EAAA,CAtDA;AAuDA,MAAA,QAAA,EAAA,EAvDA;AAwDA,MAAA,OAAA,EAAA,KAxDA;AAyDA,MAAA,GAAA,EAAA;AAzDA,KAAA;AA4DA,GApEA;AAqEA,EAAA,OArEA,qBAqEA;AACA,SAAA,QAAA,CAAA,KAAA,WAAA;AACA,GAvEA;AAwEA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,IADA,EACA;AAAA;;AACA,MAAA,UAAA,CAAA,GAAA,mCAAA,IAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,GAAA,CAAA;;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA;AACA;AACA,OANA;AAOA,KATA;AAUA,IAAA,UAVA,sBAUA,IAVA,EAUA;AACA,WAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA;AACA,UAAA,IAAA,EAAA,IAAA,CAAA,WADA;AAEA,UAAA,OAAA,EAAA,IAAA,CAAA,OAFA;AAGA,UAAA,SAAA,EAAA,IAAA,CAAA,SAHA;AAIA,UAAA,UAAA,EAAA,IAAA,CAAA,UAJA;AAKA,UAAA,QAAA,EAAA,IAAA,CAAA,aAAA,CAAA,GALA;AAMA,UAAA,OAAA,EAAA,IAAA,CAAA,gBAAA,CAAA,GANA;AAOA,UAAA,OAAA,EAAA,IAAA,CAAA,aAAA,CAAA,GAPA;AAQA,UAAA,OAAA,EAAA,IAAA,CAAA,kBARA;AASA,UAAA,KAAA,EAAA,IAAA,CAAA,gBATA;AAUA,UAAA,IAAA,EAAA,IAAA,CAAA,eAVA;AAWA,UAAA,IAAA,EAAA,IAAA,CAAA,eAXA;AAYA,UAAA,EAAA,EAAA,IAAA,CAAA,EAZA;AAaA,UAAA,UAAA,EAAA,IAAA,CAAA;AAbA,SAAA;AAeA,OAhBA,CAAA;AAiBA,KA5BA;AA6BA,IAAA,KA7BA,iBA6BA,EA7BA,EA6BA;AACA,WAAA,MAAA,GAAA,EAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KAhCA;AAiCA,IAAA,OAjCA,mBAiCA,IAjCA,EAiCA;AAAA;;AACA,UAAA,IAAA,EAAA;AACA,QAAA,UAAA,CAAA,IAAA,CAAA,oBAAA,EAAA;AACA,UAAA,EAAA,EAAA,KAAA;AADA,SAAA,EAEA,IAFA,CAEA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,SAJA,EAIA,KAJA,CAIA,YAAA;AACA,UAAA,MAAA,CAAA,IAAA,GAAA,KAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA,SAPA;AASA,OAVA,MAUA;AACA,aAAA,IAAA,GAAA,KAAA;AACA,OAbA,CAcA;;AACA,KAhDA;AAiDA,IAAA,QAjDA,sBAiDA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,KAnDA;AAoDA,IAAA,YApDA,wBAoDA,EApDA,EAoDA;AACA,UAAA,MAAA,gDAAA,EAAA,UAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,aAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,OAAA,EAAA;AAAA;AAAA,OAAA;AACA,KAvDA;AAwDA,IAAA,WAxDA,uBAwDA,EAxDA,EAwDA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,aAAA;AAAA,QAAA,KAAA,EAAA;AACA,UAAA,OAAA,+CAAA,EAAA;AADA;AAAA,OAAA;AAGA,KA5DA;AA6DA,IAAA,aA7DA,yBA6DA,EA7DA,EA6DA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,aAAA;AAAA,QAAA,KAAA,EAAA;AACA,UAAA,OAAA,+CAAA,EAAA;AADA;AAAA,OAAA;AAGA,KAjEA;AAkEA,IAAA,QAlEA,sBAkEA;AACA,WAAA,QAAA,CAAA,KAAA,WAAA,GAAA,CAAA,GAAA,KAAA,WAAA,GAAA,CAAA,GAAA,CAAA;AACA,KApEA;AAqEA,IAAA,QArEA,sBAqEA;AACA,WAAA,QAAA,CAAA,KAAA,WAAA,IAAA,KAAA,SAAA,GAAA,KAAA,WAAA,GAAA,KAAA,WAAA,GAAA,CAAA;AACA,KAvEA;AAwEA,IAAA,UAxEA,sBAwEA,IAxEA,EAwEA;AACA,WAAA,QAAA,CAAA,IAAA;AACA,KA1EA;AA2EA,IAAA,cA3EA,0BA2EA,EA3EA,EA2EA,IA3EA,EA2EA,UA3EA,EA2EA,WA3EA,EA2EA;AAAA;;AACA,MAAA,UAAA,CAAA,GAAA,CAAA,0BAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,SAAA,EAAA;AADA;AADA,OAAA,EAIA,IAJA,CAIA,UAAA,QAAA,EAAA;AACA,YAAA,MAAA,GAAA,UAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,QAAA,MAAA,CAAA,GAAA,GAAA;AACA,UAAA,GAAA,EAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CADA;AAEA,UAAA,GAAA,EAAA,MAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAFA;AAGA,UAAA,IAAA,EAAA,IAHA;AAIA,UAAA,WAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAJA;AAKA,UAAA,QAAA,EAAA;AALA,SAAA;AAOA,QAAA,MAAA,CAAA,QAAA,GAAA,WAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA,OAfA;AAgBA,KA5FA;AA6FA,IAAA,OA7FA,mBA6FA,EA7FA,EA6FA;AAAA;;AACA,MAAA,UAAA,CAAA,GAAA,CAAA,oBAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,EAAA,EAAA;AADA;AADA,OAAA,EAIA,IAJA,CAIA,UAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,cAAA,CAAA,EAAA,EAAA,IAAA,CAAA,cAAA,EAAA,IAAA,CAAA,gBAAA,EAAA,IAAA,CAAA,WAAA;AACA,OAPA;AAQA;AAtGA;AAxEA,CAAA","sourcesContent":["<template>\n    <div class=\"animated fadeIn lots\">\n        <b-card class=\"custom-header\">\n            <div slot=\"header\">\n                {{ $t('m.dashboard.lots') }}\n                <span class=\"float-right\">\n                      <button class=\"btn btn-sm btn-primary\" @click=\"$router.push('/inventory/lots/add')\">\n                        <i class=\"fa fa-plus-square\"></i>\n                        {{ $t('m.lots.b_add') }}\n                    </button>\n                </span>\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline my-table\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"parkingNum\" slot-scope=\"data\">\n                        {{ data.item.parkingNum | checkNan }}\n                    </template>\n                    <template slot=\"address\" slot-scope=\"data\">\n                        {{ data.item.country | checkNan }},{{ data.item.state | checkNan }},{{ data.item.city | checkNan }},{{ data.item.area && GLOBAL.APP_ENV == 'cn' ? data.item.area + ',' : '' }}{{ data.item.address | checkNan }}\n                    </template>\n                    <template slot=\"vehicles\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-success\" @click=\"linkVehicles(data.item.id)\">{{ data.item.vehicles }}</span>\n                    </template>\n                    <template slot=\"battery\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-danger\" @click=\"linkBattery(data.item.id)\">{{ data.item.battery }}</span>\n                    </template>\n                    <template slot=\"offline\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-secondary\" @click=\"linkSecondary(data.item.id)\">{{ data.item.offline }}</span>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <button v-b-tooltip.hover :title=\"$t('m.common.position_detail')\" class=\"btn btn-sm btn-success m-1 cursor\" @click=\"mapInfo(data.item.id)\">\n                            <i class=\"cui cui-location-pin\"></i>\n                        </button>\n                        <button v-b-tooltip.hover :title=\"$t('m.tooltip.check_detail')\" class=\"btn btn-sm btn-info cursor\" @click=\"$router.push('/inventory/lots/detail/' + data.item.id)\">\n                            <i class=\"fa fa-eye\"></i>\n                        </button>\n                        <button v-b-tooltip.hover :title=\"$t('m.common.edit')\" class=\"btn btn-sm btn-info  m-1\" @click=\"$router.push('/inventory/lots/edit/' + data.item.id)\">\n                            <i class=\"fa fa-edit\"></i>\n                        </button>\n                        <button v-b-tooltip.hover :title=\"$t('m.detail_shop.del_b')\" class=\"btn btn-sm btn-danger btn-del\" @click=\"delId(data.item.id)\">\n                            <i class=\"cui cui-trash\"></i>\n                        </button>\n                    </template>\n                </b-table>\n            </div>\n            <b-row v-if=\"total > 0\" class=\"margin2\">\n                <b-col sm=\"4\" lg=\"4\">\n                    <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                        {{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? total :currentPage * 10 }} {{ $t('m.common.of') }} {{total}} {{ $t('m.common.entries') }}\n                    </div>\n                </b-col>\n                <b-col sm=\"8\" lg=\"8\">\n                    <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"pageSize\" @input=\" changePage(currentPage)\"></b-pagination>\n                </b-col>\n            </b-row>\n        </b-card>\n\n        <b-modal ref=\"my-modal\" :title=\"tipTitle\" :ok-title=\"$t('m.tip.b_ok')\" v-model=\"showMap\" @ok=\"showMap = false\" class=\"show-map\" ok-only>\n            <myMap :map=\"map\" type=\"model\"></myMap>\n        </b-modal>\n        <model\n               :show=\"show\"\n               :title=\"$t('m.vehicle.actions_remind')\"\n               :content=\"$t('m.tip.confirm_del_lot')\"\n               :buttonText=\"btnGroup\"\n               @closeRemindBox=\"hideTip\"\n        ></model>\n        <model\n               :show=\"show2\"\n               :title=\"$t('m.vehicle.actions_remind')\"\n               :content=\"$t('m.vehicle.file_remind')\"\n               :buttonText=\"btnGroup2\"\n               @closeRemindBox=\"hideTip2\"\n        ></model>\n    </div>\n</template>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import myMap from '@/components/map';\n    import model from \"@/components/model\";\n    export default {\n        name: 'lots',\n        inject: ['reload'],\n        components: {\n            myMap,\n            model,\n        },\n        data() {\n            return {\n                currentPage: 1,\n                pageSize: 10,\n                table: null,\n                curDel: null,\n                show: false,\n                show2: false,\n                btnGroup: {\n                    btnFirst: this.$t('m.tip.b_cancel'),\n                    btnSecond: this.$t('m.tip.confirm')\n                },\n                btnGroup2: {\n                    btnFirst: '',\n                    btnSecond: this.$t('m.tip.b_ok')\n                },\n                tableFields: {\n                    parkingNum: {\n                        label: this.$t('m.lots.parkingNum'),\n                        class: \"text-center\"\n                    },\n                    name: {\n                        label: this.$t('m.lots.name'),\n                        class: \"text-center\"\n                    },\n                    address: {\n                        label: this.$t('m.lots.address'),\n                        class: \"text-center\"\n                    },\n                    storeName: {\n                        label: this.$t('m.lots.store_name'),\n                        class: \"text-center\"\n                    },\n                    dealership: {\n                        label: this.$t('m.common.dealership'),\n                        class: \"text-center\"\n                    },\n                    vehicles: {\n                        label: this.$t('m.lots.all_vehicle'),\n                        class: \"text-center\"\n                    },\n                    battery: {\n                        label: this.$t('m.alert.alert_type_1'),\n                        class: \"text-center\"\n                    },\n                    offline: {\n                        label: this.$t('m.common.offline'),\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: this.$t('m.vehicle.actions'),\n                        class: \"text-center\"\n                    }\n                },\n                total: 0,\n                totalPages:0,\n                tipTitle: '',\n                showMap: false,\n                map: {}\n\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage);\n        },\n        methods: {\n            initData(page) {\n                httpClient.get(`/api/v1/lot/page?pageNo=${page}`).then(response => {\n                    if (response.data.data) {\n                        this.total = response.data.data ? response.data.data.rowCount : 0;\n                        this.filterData(response.data.data);\n                        this.totalPages = response.data.data.totalPages;\n                    }\n                })\n            },\n            filterData(data){\n                this.table = data.datas.map(item => {\n                    return {\n                        name: item.parkingName,\n                        address: item.address,\n                        storeName: item.storeName,\n                        dealership: item.tenantName,\n                        vehicles: item.vehicleFilter.num,\n                        battery: item.lowBatteryFilter.num,\n                        offline: item.offLineFilter.num,\n                        country: item.parkingCountryName,\n                        state: item.parkingStateName,\n                        city: item.parkingCityName,\n                        area: item.parkingAreaName,\n                        id: item.id,\n                        parkingNum: item.parkingServiceNum\n                    }\n                });\n            },\n            delId(id) {\n                this.curDel = id;\n                this.show = true;\n            },\n            hideTip(type) {\n                if (type) {\n                    httpClient.post('/api/v1/lot/delete', {\n                        id: this.curDel\n                    }).then(() => {\n                        window.location.reload();\n                    }).catch(()=>{\n                        this.show = false;\n                        this.show2 = true;\n                    })\n\n                }else {\n                    this.show = false;\n                }\n                // this.show = false;\n            },\n            hideTip2 () {\n                this.show2 = false;\n            },\n            linkVehicles(id) {\n                let filter = `[{\"key\":\"parking\",\"value\":[\"${id}\"]}]`;\n                this.$router.push({name: 'VehicleList', query: {filters: filter}});\n            },\n            linkBattery(id) {\n                this.$router.push({name: 'VehicleList', query: {\n                    filters: `[{\"key\":\"parking\",\"value\":[\"${id}\"]},{\"key\":\"battery\",\"value\":[\"1\"]}]`\n                }});\n            },\n            linkSecondary(id) {\n                this.$router.push({name: 'VehicleList', query: {\n                    filters: `[{\"key\":\"parking\",\"value\":[\"${id}\"]},{\"key\":\"online\",\"value\":[\"2\"]}]`\n                }});\n            },\n            prevPage(){\n                this.initData(this.currentPage > 1  ? this.currentPage - 1 : 1)\n            },\n            nextPage(){\n                this.initData(this.currentPage >= this.pageCount  ? this.currentPage : this.currentPage + 1)\n            },\n            changePage(page) {\n                this.initData(page);\n            },\n            getVehicleList(id, area, centerCoor, packingName) {\n                httpClient.get('/api/v1/inlotvehiclelist', {\n                    params: {\n                        parkingId: id\n                    }\n                }).then(response => {\n                    let latlng = centerCoor.split(\" \");\n                    this.map = {\n                        lat: Number(latlng[1]),\n                        lng: Number(latlng[0]),\n                        area: area,\n                        vehicleInfo: response.data.data,\n                        showMult: true\n                    };\n                    this.tipTitle = packingName;\n                    this.showMap = true;\n                })\n            },\n            mapInfo(id) {\n                httpClient.get(\"/api/v1/lot/detail\", {\n                    params: {\n                        id: id\n                    }\n                }).then(response => {\n                    let data = response.data.data;\n                    this.getVehicleList(id, data.areaCoordinate, data.centerCoordinate, data.parkingName);\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .margin2 {\n        margin-top: 2%;\n    }\n    .card {\n        width: 100%;\n    }\n    .my-table{\n        margin-bottom: 0;\n    }\n    .show-map {\n        .modal-dialog {\n            max-width: 80%;\n        }\n    }\n    .lots {\n        .card-header span {\n            margin-left: 10px;\n        }\n        .card-header {\n\n        }\n        th, td {\n            height: 44px;\n            line-height: 20px;\n        }\n    }\n</style>\n"],"sourceRoot":"src/views/dashboard/inventory"}]}