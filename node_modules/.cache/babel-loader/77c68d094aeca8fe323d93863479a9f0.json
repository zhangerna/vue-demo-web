{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/components/amap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/components/amap.vue","mtime":1577101399000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { wgs84ToGcjo2 } from \"@/utils/coordtransform\";\nimport AMap from \"AMap\";\nexport default {\n  name: \"amap\",\n  props: [\"map\", \"elId\", \"type\"],\n  data: function data() {\n    return {\n      mapInfo: null,\n      mapObj: null,\n      marker: null,\n      polygon: null,\n      markers: [],\n      lat: \"\",\n      lng: \"\",\n      infoWindow: null,\n      roadLayer: null,\n      safeLayer: null\n    };\n  },\n  watch: {\n    map: function map(newVal) {\n      this.mapInfo = newVal;\n      this.initMap();\n      console.log(2333);\n    }\n  },\n  methods: {\n    addMarker: function addMarker(position, title, contentString) {\n      var marker = new AMap.Marker({\n        position: position,\n        map: this.mapObj,\n        icon: new AMap.Icon({\n          image: \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\",\n          size: new AMap.Size(60, 60),\n          imageSize: new AMap.Size(20, 30)\n        })\n      });\n\n      if (contentString) {\n        var infoWindow = new AMap.InfoWindow({\n          isCustom: true,\n          content: contentString,\n          offset: new AMap.Pixel(16, -45)\n        });\n        marker.on(\"click\", function (e) {\n          infoWindow.open(window.mapObj, e.target.getPosition());\n        });\n      }\n    },\n    initMap: function initMap() {\n      var _this = this;\n\n      var lnglat = wgs84ToGcjo2(this.mapInfo.lng, this.mapInfo.lat);\n      this.mapObj = new AMap.Map(this.elId ? this.elId : \"map\", {\n        center: lnglat,\n        zoom: 17\n      });\n      this.roadLayer = new AMap.TileLayer.RoadNet({});\n      this.safeLayer = new AMap.TileLayer.Satellite({});\n      this.mapObj.add(this.roadLayer);\n      this.mapObj.add(this.safeLayer);\n      this.safeLayer.hide();\n      this.roadLayer.hide();\n      window.mapObj = this.mapObj;\n      var area2 = [];\n      this.mapInfo[\"area\"] ? this.mapInfo[\"area\"].map(function (item) {\n        var temp = item.split(\",\");\n        area2.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1])));\n      }) : \"\";\n      var polygon = new AMap.Polygon({\n        path: area2,\n        strokeColor: \"#FF0000\",\n        strokeOpacity: 0.8,\n        strokeWeight: 2,\n        fillColor: \"#FF0000\",\n        fillOpacity: 0.35\n      });\n      this.mapObj.add(polygon);\n\n      if (this.mapInfo.showMult) {\n        this.mapInfo.vehicleInfo.map(function (item) {\n          var temp = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n          var title = \"\".concat(item.year ? item.year : \"N/A\", \" \").concat(item.make ? item.make : \"N/A\", \" \").concat(item.model ? item.model : \"N/A\");\n          var contentString = \"<a href='/inventory/vehicle/detail/\".concat(item.vehicleId, \"'>\\n                            <img style=\\\"background: #3a4149\\\" src=\\\"\").concat(item.photoPath ? item.photoPath : \"/img/placeholder.5367544d.svg\", \"\\\" width=\\\"100%\\\">\\n                            <h5 id=\\\"firstHeading\\\" class=\\\"firstHeading\\\">\").concat(item.year ? item.year : \"N/A\", \" \").concat(item.make ? item.make : \"N/A\", \" \").concat(item.model ? item.model : \"N/A\", \"</h5>\\n                            </a>\");\n\n          _this.addMarker(temp, title, contentString);\n        });\n      } else {\n        this.addMarker(lnglat, this.mapInfo.vehicleInfo, null);\n      }\n\n      this.mapObj.setFitView();\n    },\n    changeMapType: function changeMapType(type) {\n      if (type == \"default\") {\n        this.roadLayer.hide();\n        this.safeLayer.hide();\n      } else {\n        this.roadLayer.show();\n        this.safeLayer.show();\n      }\n    }\n  }\n};",{"version":3,"sources":["amap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAaA,SAAA,YAAA,QAAA,wBAAA;AACA,OAAA,IAAA,MAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,KAAA,EAAA,CAAA,KAAA,EAAA,MAAA,EAAA,MAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,IADA;AAEA,MAAA,MAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA,IAHA;AAIA,MAAA,OAAA,EAAA,IAJA;AAKA,MAAA,OAAA,EAAA,EALA;AAMA,MAAA,GAAA,EAAA,EANA;AAOA,MAAA,GAAA,EAAA,EAPA;AAQA,MAAA,UAAA,EAAA,IARA;AASA,MAAA,SAAA,EAAA,IATA;AAUA,MAAA,SAAA,EAAA;AAVA,KAAA;AAYA,GAhBA;AAiBA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA,aAAA,MAAA,EAAA;AACA,WAAA,OAAA,GAAA,MAAA;AACA,WAAA,OAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA;AALA,GAjBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,QADA,EACA,KADA,EACA,aADA,EACA;AACA,UAAA,MAAA,GAAA,IAAA,IAAA,CAAA,MAAA,CAAA;AACA,QAAA,QAAA,EAAA,QADA;AAEA,QAAA,GAAA,EAAA,KAAA,MAFA;AAGA,QAAA,IAAA,EAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,UAAA,KAAA,EAAA,6GADA;AAEA,UAAA,IAAA,EAAA,IAAA,IAAA,CAAA,IAAA,CAAA,EAAA,EAAA,EAAA,CAFA;AAGA,UAAA,SAAA,EAAA,IAAA,IAAA,CAAA,IAAA,CAAA,EAAA,EAAA,EAAA;AAHA,SAAA;AAHA,OAAA,CAAA;;AASA,UAAA,aAAA,EAAA;AACA,YAAA,UAAA,GAAA,IAAA,IAAA,CAAA,UAAA,CAAA;AACA,UAAA,QAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA,aAFA;AAGA,UAAA,MAAA,EAAA,IAAA,IAAA,CAAA,KAAA,CAAA,EAAA,EAAA,CAAA,EAAA;AAHA,SAAA,CAAA;AAKA,QAAA,MAAA,CAAA,EAAA,CAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AACA,UAAA,UAAA,CAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,CAAA,CAAA,MAAA,CAAA,WAAA,EAAA;AACA,SAFA;AAGA;AACA,KArBA;AAsBA,IAAA,OAtBA,qBAsBA;AAAA;;AACA,UAAA,MAAA,GAAA,YAAA,CAAA,KAAA,OAAA,CAAA,GAAA,EAAA,KAAA,OAAA,CAAA,GAAA,CAAA;AACA,WAAA,MAAA,GAAA,IAAA,IAAA,CAAA,GAAA,CAAA,KAAA,IAAA,GAAA,KAAA,IAAA,GAAA,KAAA,EAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA,CAAA;AAIA,WAAA,SAAA,GAAA,IAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CAAA,EAAA,CAAA;AACA,WAAA,SAAA,GAAA,IAAA,IAAA,CAAA,SAAA,CAAA,SAAA,CAAA,EAAA,CAAA;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,KAAA,SAAA;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,KAAA,SAAA;AACA,WAAA,SAAA,CAAA,IAAA;AACA,WAAA,SAAA,CAAA,IAAA;AAEA,MAAA,MAAA,CAAA,MAAA,GAAA,KAAA,MAAA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,MAAA,IACA,KAAA,OAAA,CAAA,MAAA,EAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,YAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACA,OAHA,CADA,GAKA,EALA;AAMA,UAAA,OAAA,GAAA,IAAA,IAAA,CAAA,OAAA,CAAA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,WAAA,EAAA,SAFA;AAGA,QAAA,aAAA,EAAA,GAHA;AAIA,QAAA,YAAA,EAAA,CAJA;AAKA,QAAA,SAAA,EAAA,SALA;AAMA,QAAA,WAAA,EAAA;AANA,OAAA,CAAA;AAQA,WAAA,MAAA,CAAA,GAAA,CAAA,OAAA;;AACA,UAAA,KAAA,OAAA,CAAA,QAAA,EAAA;AACA,aAAA,OAAA,CAAA,WAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,GAAA,YAAA,CAAA,IAAA,CAAA,eAAA,EAAA,IAAA,CAAA,eAAA,CAAA;AACA,cAAA,KAAA,aAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,GAAA,KAAA,cAAA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,GAAA,KAAA,cAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,GAAA,KAAA,CAAA;AACA,cAAA,aAAA,gDAAA,IAAA,CAAA,SAAA,sFACA,IAAA,CAAA,SAAA,GAAA,IAAA,CAAA,SAAA,GAAA,+BADA,4GAEA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,GAAA,KAFA,cAEA,IAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,GAAA,KAFA,cAEA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,GAAA,KAFA,4CAAA;;AAIA,UAAA,KAAA,CAAA,SAAA,CAAA,IAAA,EAAA,KAAA,EAAA,aAAA;AACA,SARA;AASA,OAVA,MAUA;AACA,aAAA,SAAA,CAAA,MAAA,EAAA,KAAA,OAAA,CAAA,WAAA,EAAA,IAAA;AACA;;AACA,WAAA,MAAA,CAAA,UAAA;AACA,KAlEA;AAmEA,IAAA,aAnEA,yBAmEA,IAnEA,EAmEA;AACA,UAAA,IAAA,IAAA,SAAA,EAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA,OAHA,MAGA;AACA,aAAA,SAAA,CAAA,IAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA;AACA;AA3EA;AAxBA,CAAA","sourcesContent":["<template>\n    <div class=\"maps\">\n        <div class=\"map-btn-group\">\n            <ul>\n                <li @click=\"changeMapType('default')\">地图 |</li>\n                <li @click=\"changeMapType('sate')\">&nbsp;卫星图像</li>\n            </ul>\n        </div>\n        <div class=\"amap my-map\" :id=\"elId ? elId : 'map'\" ></div>\n    </div>\n</template>\n\n<script>\nimport { wgs84ToGcjo2 } from \"@/utils/coordtransform\";\nimport AMap from \"AMap\";\nexport default {\n    name: \"amap\",\n    props: [\"map\", \"elId\", \"type\"],\n    data() {\n        return {\n            mapInfo: null,\n            mapObj: null,\n            marker: null,\n            polygon: null,\n            markers: [],\n            lat: \"\",\n            lng: \"\",\n            infoWindow: null,\n            roadLayer: null,\n            safeLayer: null\n        };\n    },\n    watch: {\n        map: function(newVal) {\n            this.mapInfo = newVal;\n            this.initMap();\n            console.log(2333)\n        }\n    },\n    methods: {\n        addMarker(position, title, contentString) {\n            let marker = new AMap.Marker({\n                position: position,\n                map: this.mapObj,\n                icon: new AMap.Icon({\n                    image: \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\",\n                    size: new AMap.Size(60, 60),\n                    imageSize: new AMap.Size(20, 30)\n                })\n            });\n            if (contentString) {\n                let infoWindow = new AMap.InfoWindow({\n                    isCustom: true,\n                    content: contentString,\n                    offset: new AMap.Pixel(16, -45)\n                });\n                marker.on(\"click\", function(e) {\n                    infoWindow.open(window.mapObj, e.target.getPosition());\n                });\n            }\n        },\n        initMap() {\n            let lnglat = wgs84ToGcjo2(this.mapInfo.lng, this.mapInfo.lat);\n            this.mapObj = new AMap.Map(this.elId ? this.elId : \"map\", {\n                center: lnglat,\n                zoom: 17\n            });\n            this.roadLayer = new AMap.TileLayer.RoadNet({});\n            this.safeLayer = new AMap.TileLayer.Satellite({});\n            this.mapObj.add(this.roadLayer);\n            this.mapObj.add(this.safeLayer);\n            this.safeLayer.hide();\n            this.roadLayer.hide();\n\n            window.mapObj = this.mapObj;\n            let area2 = [];\n            this.mapInfo[\"area\"]\n                ? this.mapInfo[\"area\"].map(function(item) {\n                      let temp = item.split(\",\");\n                      area2.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1])));\n                  })\n                : \"\";\n            let polygon = new AMap.Polygon({\n                path: area2,\n                strokeColor: \"#FF0000\",\n                strokeOpacity: 0.8,\n                strokeWeight: 2,\n                fillColor: \"#FF0000\",\n                fillOpacity: 0.35\n            });\n            this.mapObj.add(polygon);\n            if (this.mapInfo.showMult) {\n                this.mapInfo.vehicleInfo.map(item => {\n                    let temp = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n                    let title = `${item.year ? item.year : \"N/A\"} ${item.make ? item.make : \"N/A\"} ${item.model ? item.model : \"N/A\"}`;\n                    let contentString = `<a href='/inventory/vehicle/detail/${item.vehicleId}'>\n                            <img style=\"background: #3a4149\" src=\"${item.photoPath ? item.photoPath : \"/img/placeholder.5367544d.svg\"}\" width=\"100%\">\n                            <h5 id=\"firstHeading\" class=\"firstHeading\">${item.year ? item.year : \"N/A\"} ${item.make ? item.make : \"N/A\"} ${item.model ? item.model : \"N/A\"}</h5>\n                            </a>`;\n                    this.addMarker(temp, title, contentString);\n                });\n            } else {\n                this.addMarker(lnglat, this.mapInfo.vehicleInfo, null);\n            }\n            this.mapObj.setFitView();\n        },\n        changeMapType(type) {\n            if (type == \"default\") {\n                this.roadLayer.hide();\n                this.safeLayer.hide();\n            } else {\n                this.roadLayer.show();\n                this.safeLayer.show();\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.maps {\n    .map-btn-group {\n        position: absolute;\n        margin-top: 10px;\n        z-index: 1;\n        margin-left: 20px;\n        ul {\n            color: grey;\n            padding: 0 20px;\n            height: 40px;\n            line-height: 40px;\n            background: #ffffff;\n            font-size: 18px;\n            li {\n                cursor: pointer;\n                display: inline-block;\n            }\n        }\n    }\n    #map,\n    #model-map {\n        height: 70vh;\n        width: 100%;\n    }\n    .my-map {\n        height: 400px;\n        width: 100%;\n        .amap-info {\n            width: 200px;\n        }\n        .amap-info-contentContainer {\n            background: #ffffff;\n            border-radius: 10px;\n            h5 {\n                padding-left: 10px;\n            }\n        }\n    }\n}\n.maps {\n    .modal-dialog {\n        max-width: 90%;\n        width: 90%;\n    }\n}\n</style>\n"],"sourceRoot":"src/components"}]}