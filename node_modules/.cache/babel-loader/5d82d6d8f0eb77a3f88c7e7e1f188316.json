{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/vehicleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/vehicleDetail.vue","mtime":1562139924000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpclient from '@/utils/httpclient';\nimport { getDateString as _getDateString, getDaysBetweenDate as _getDaysBetweenDate } from \"@/utils/date\";\nimport googleMap from '@/components/googleMap';\nexport default {\n  name: \"vehicleDetail\",\n  components: {\n    googleMap: googleMap\n  },\n  data: function data() {\n    return {\n      data: {},\n      showMap: false,\n      map: null,\n      tipTitle: '',\n      fields: {\n        operation: {\n          key: 'operationType',\n          label: this.$t('m.vehicle_detail.operation')\n        },\n        vehicle: {\n          key: 'vehicle',\n          label: this.$t('m.vehicle_detail.operator')\n        },\n        time: {\n          key: 'time',\n          label: this.$t('m.common.time')\n        }\n      },\n      items: [],\n      totalPages: 1,\n      currentPage: 1,\n      perPage: 10,\n      rows: 1\n    };\n  },\n  mounted: function mounted() {\n    var self = this;\n    httpclient.get(\"/api/v1/vehicle/detail/id?vehicleId=\" + this.$route.params.id, {}).then(function (response) {\n      self.data = response.data.data;\n      var year = self.data.year ? self.data.year : 'N/A';\n      var make = self.data.make ? self.data.make : 'N/A';\n      var model = self.data.model ? self.data.model : 'N/A';\n      var info = year == 'N/A' && make == 'N/A' && model == 'N/A' ? 'N/A' : year + ' ' + make + ' ' + model;\n      self.tipTitle = info;\n      self.map = {\n        lat: self.data.lastLocationLat ? self.data.lastLocationLat : 0,\n        lng: self.data.lastLocationLng ? self.data.lastLocationLng : 0,\n        area: self.data.areaCoordinates ? self.data.areaCoordinates : [],\n        vehicleInfo: info\n      };\n    }).catch(function (err) {\n      alert(err);\n    });\n    this.getVehicleOperatorList(1);\n  },\n  methods: {\n    getDateString: function getDateString(data) {\n      return _getDateString(data);\n    },\n    getDaysBetweenDate: function getDaysBetweenDate(data, time) {\n      return _getDaysBetweenDate(data, time);\n    },\n    getVehicleOperatorList: function getVehicleOperatorList(page) {\n      var _this = this;\n\n      var myVehicleId = this.$route.params.id;\n      var myLink = '/api/v1/operationlog/listbyvehicleid?pageNo=' + page + '&vehicleId=' + myVehicleId;\n      httpclient.get(myLink).then(function (res) {\n        var myData = res.data.data.datas;\n        _this.items = myData; // this.currentPage = res.data.data.pageNo;\n\n        _this.perPage = res.data.data.pageSize;\n        _this.totalPages = res.data.data.totalPages;\n        _this.rows = res.data.data.rowCount;\n        var myArr = [];\n        myData.map(function (item) {\n          myArr.push({\n            operationType: item.operationType,\n            operator: item.userName,\n            time: _this.getDateString(item.createTime),\n            userId: item.userId\n          });\n        });\n        _this.items = myArr;\n      });\n    },\n    turnToPage: function turnToPage(p) {\n      this.getVehicleOperatorList(p ? p : 1);\n    }\n  }\n};",{"version":3,"sources":["vehicleDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"animated fadeIn vehicle-detail\">\n    <b-card>\n      <div slot=\"header\">\n        {{ $t('m.common.detail') }}\n        <button class=\"btn btn-outline-info btn-block active float-right font-weight-bold\" style=\"width: 50px;font-size: 12px;padding: 0px;color: #fff\" @click=\"$router.push('/vehicle/edit/' + $route.params.id)\">{{ $t('m.common.edit') }}</button>\n      </div>\n      <b-row style=\"padding-left: 0.6rem;\">\n        <b-col sm=\"6\" class=\"left\">\n          <div class=\"border-dark border\" v-if=\"data\">\n            <b-row>\n              <b-col sm=\"12\" lg=\"12\" class=\"title\">\n                {{ data.year && data.year != 'null' ? data.year : \"N/A\" }} {{ data.make && data.make != 'null' ? data.make :\n                'N/A' }} {{ data.model && data.model != 'null' ? data.model : 'N/A' }} - {{ data.alias && data.alias != 'null' ? data.alias : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.last_location') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.lastLocation ? data.lastLocation : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.last_update') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.lastUpdateTime ? getDateString(data.lastUpdateTime ) : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.lot') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.parkingLot ? data.parkingLot : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row v-if=\"data.checkedInBy\">\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.vehicle_detail.check_by') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{data.checkedInBy}}\n              </b-col>\n            </b-row>\n            <b-row v-if=\"data.checkedInAt\">\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.vehicle_detail.check_at') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{this.getDateString(data.checkedInAt)}}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.line_status') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                <span class=\"badge badge-pill mx-2\" :class=\"data.adapter == 'Online' ? 'badge-success' : 'badge-secondary'\" v-if=\"data.isOnline\">{{ data.isOnline == 1 ? 'Online' : (data.isOnline == 3 ? 'N/A' : 'Offline') }}</span>\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.voltage') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                  <template v-if=\"data.currentVoltage\">\n                      <span v-if=\"data.currentVoltage && Number(data.currentVoltage.toFixed(1)) <= 11.7\" class=\"mx-2 badge-danger badge-pill currentVoltage\">\n                      {{ data.currentVoltage.toFixed(1) + 'V'}}\n                    </span>\n                      <span v-else-if=\"data.currentVoltage && Number(data.currentVoltage.toFixed(1)) > 11.7 && Number(data.currentVoltage.toFixed(1)) <= 12.1\" class=\"badge-warning mx-2 badge-pill\">\n                      {{ data.currentVoltage.toFixed(1) + 'V'}}\n                    </span>\n                      <span v-else class=\"badge-success mx-2 badge-pill \">\n                      {{ data.currentVoltage.toFixed(1) + 'V'}}\n                    </span>\n                  </template>\n                  <template v-else>\n                      <span  class=\"mx-2 badge badge-pill badge-secondary\">N/A</span>\n                  </template>\n              </b-col>\n            </b-row>\n            <b-row v-if=\"data.available === 1\">\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.use_status') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                <span class=\"mx-2 badge badge-pill btn-danger\">In Use</span>\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.imei') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.deviceMac && data.deviceMac != 'null' ? data.deviceMac : \"N/A\" }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.vin') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.vin ? data.vin : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.year') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.year ? data.year : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.make') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.make ? data.make : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.model') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.model ? data.model : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.alias') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.alias ? data.alias : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.trim') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.trim ? data.trim : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.engine') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.engineType ? data.engineType : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.color') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.color ? data.color : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.price') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.thousandsPrice ?  \"$\" + data.thousandsPrice : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.stock_num') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.stockNumber ? data.stockNumber : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.inv_age') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.inventoryTime ? getDaysBetweenDate(data.inventoryTime, new Date().getTime()) + 'Days' :\n                'N/A' }}\n              </b-col>\n            </b-row>\n<!--            <b-row>-->\n<!--              <b-col sm=\"4\" lg=\"4\">-->\n<!--                Days Idle-->\n<!--              </b-col>-->\n<!--              <b-col sm=\"8\" lg=\"8\">-->\n\n<!--              </b-col>-->\n<!--            </b-row>-->\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.condition') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.vehicleType ? data.vehicleType : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.common.odometer') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.currentMileage ? Math.round(data.currentMileage * 0.0006214) : 'N/A' }}\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.vehicle_detail.plat') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{ data.plate ? data.plate : 'N/A' }}\n              </b-col>\n            </b-row>\n<!--            <b-row>-->\n<!--              <b-col sm=\"4\" lg=\"4\">-->\n<!--                Created at-->\n<!--              </b-col>-->\n<!--              <b-col sm=\"8\" lg=\"8\">-->\n<!--                {{ data.plate ? data.plate : 'N/A' }}-->\n<!--              </b-col>-->\n<!--            </b-row>-->\n            <b-row>\n              <b-col sm=\"4\" lg=\"4\">\n                {{ $t('m.vehicle_detail.notes') }}\n              </b-col>\n              <b-col sm=\"8\" lg=\"8\">\n                {{data.notes? data.notes :'N/A'}}\n              </b-col>\n            </b-row>\n          </div>\n\n        </b-col>\n        <b-col sm=\"6\" class=\"right\">\n            <div class=\"text-center img-box\">\n              <img v-if=\"data.vin\" :src=\"data.photoPath ? data.photoPath : '/img/placeholder.5367544d.svg' \" style=\"border-radius: 5px 5px 5px 5px;box-shadow: 0px 0px 4px 1px #000;margin-bottom: 10px;\" width=\"100%\" alt=\"\">\n            </div>\n          <div class=\"map\" style=\"position: relative\">\n              <google-map :map=\"map\" :class=\"map && (map.lat != 0 || map.area.length > 0) ? '': 'hidden'\"></google-map>\n              <div class=\"img text-center\" v-if=\"map && (map.lat == 0 && map.area == 0)\" style=\"height: 40vh;margin-top: 15vh;\">\n                <img src=\"@/assets/pages-img/Location_not_available.svg\" width=\"100px\">\n                <p style=\"margin-top: 14px\">{{ $t('m.vehicle_detail.no_map') }}</p>\n              </div>\n          </div>\n          <b-row style=\"border-bottom: 0px;\">\n            <b-table class=\"user-table-list\" hover :items=\"items\" :fields=\"fields\">\n              <template slot=\"operation\" slot-scope=\"items\">\n                <span>{{ items.item.type}}</span>\n              </template>\n              <template slot=\"vehicle\" slot-scope=\"items\">\n                <a v-if=\"items.item.operator\" class=\"btn-md link-detail\" @click=\"$router.push('/admin/detail/' + items.item.userId)\">\n                  {{items.item.operator}}\n                </a>\n                <span v-else>N/A</span>\n              </template>\n              <template slot=\"time\" slot-scope=\"items\">\n                <div class=\"btn-md\">{{items.item.time}}</div>\n              </template>\n            </b-table>\n          </b-row>\n\n          <b-pagination align=\"right\" :total-rows=\"rows\" v-model=\"currentPage\" :per-page=\"perPage\"\n                            @input=\" turnToPage(currentPage)\"></b-pagination>\n          <div class=\"dataTables_info text-right\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n            <span v-if=\"totalPages > 0 \">{{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? rows :currentPage * 10 }} {{ $t('m.common.of') }} {{rows}} {{ $t('m.common.entries') }}</span>\n            <span v-else>{{ $t('m.common.show') }} 0 {{ $t('m.common.to') }} 0 {{ $t('m.common.of') }} {{rows}} {{ $t('m.common.entries') }}</span>\n          </div>\n        </b-col>\n      </b-row>\n\n    </b-card>\n\n  </div>\n</template>\n\n\n<script>\n    import httpclient from '@/utils/httpclient';\n    import {getDateString, getDaysBetweenDate} from \"@/utils/date\";\n    import googleMap from '@/components/googleMap';\n\n    export default {\n        name: \"vehicleDetail\",\n        components: {\n            googleMap\n        },\n        data() {\n            return {\n                data: {},\n                showMap: false,\n                map: null,\n                tipTitle: '',\n                fields: {\n                    operation: {\n                        key: 'operationType',\n                        label: this.$t('m.vehicle_detail.operation')\n                    },\n                    vehicle: {\n                        key: 'vehicle',\n                        label: this.$t('m.vehicle_detail.operator')\n                    },\n                    time: {\n                        key: 'time',\n                        label: this.$t('m.common.time')\n                    },\n                },\n                items: [],\n                totalPages: 1,\n                currentPage: 1,\n                perPage: 10,\n                rows: 1,\n            }\n        },\n        mounted() {\n            let self = this;\n            httpclient.get(\"/api/v1/vehicle/detail/id?vehicleId=\" + this.$route.params.id, {}).then((response) => {\n                self.data = response.data.data;\n                let year = self.data.year ? self.data.year : 'N/A';\n                let make = self.data.make ? self.data.make : 'N/A';\n                let model = self.data.model ? self.data.model : 'N/A';\n                let info = (year == 'N/A' && make == 'N/A' && model == 'N/A') ? 'N/A' : year + ' ' + make + ' ' + model;\n                self.tipTitle = info;\n                self.map = {\n                    lat: self.data.lastLocationLat ? self.data.lastLocationLat : 0,\n                    lng: self.data.lastLocationLng ? self.data.lastLocationLng : 0,\n                    area: self.data.areaCoordinates ? self.data.areaCoordinates : [],\n                    vehicleInfo: info\n                }\n            }).catch((err) => {\n                alert(err)\n            });\n\n            this.getVehicleOperatorList(1)\n\n        },\n        methods: {\n            getDateString(data) {\n                return getDateString(data)\n            },\n            getDaysBetweenDate(data, time) {\n                return getDaysBetweenDate(data, time)\n            },\n            getVehicleOperatorList(page) {\n                let myVehicleId = this.$route.params.id;\n                let myLink = '/api/v1/operationlog/listbyvehicleid?pageNo=' + page + '&vehicleId=' + myVehicleId;\n                httpclient.get(myLink).then((res) => {\n                    let myData = res.data.data.datas;\n                    this.items = myData;\n                    // this.currentPage = res.data.data.pageNo;\n                    this.perPage = res.data.data.pageSize;\n                    this.totalPages = res.data.data.totalPages;\n                    this.rows = res.data.data.rowCount;\n                    let myArr = [];\n                    myData.map((item) => {\n                        myArr.push({\n                            operationType: item.operationType,\n                            operator: item.userName,\n                            time: this.getDateString(item.createTime),\n                            userId: item.userId\n                        });\n                    });\n                    this.items = myArr;\n                })\n            },\n            turnToPage(p) {\n                this.getVehicleOperatorList(p ? p : 1);\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n  .vehicle-detail{\n    .row {\n      border-bottom: 1px solid #23282c;\n      padding: .75rem 1.25rem;\n      .img-box{\n        width: 100%;\n      }\n    }\n    .user-table-list {\n      margin-top: 20px;\n\n      .link-detail {\n        color: #20a8d8 !important;\n        cursor: pointer;\n\n        &:hover {\n          text-decoration: underline !important;\n          color: #167495 !important;\n        }\n      }\n    }\n  }\n\n  .vehicle-detail {\n    .card-body {\n      padding: 0 1.25rem;\n    }\n\n    .title {\n      font-size: 18px;\n      color: #63c2de;\n    }\n\n    .card {\n      margin: 0 auto;\n    }\n    .hidden {\n      display: none;\n    }\n    .left {\n      padding: 10px;\n      padding-top: 0;\n      .row {\n        margin: 0px;\n        border-bottom: 1px solid #23282c;\n        padding: 10px;\n      }\n      .row > div {\n        padding-left: 4px;\n      }\n    }\n    .right {\n      .table thead th {\n        color: grey;\n      }\n      #map {\n        height: 40vh;\n      }\n    }\n  }\n</style>"],"sourceRoot":"src/views/dashboard/dashboardMain"}]}