{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/vehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/vehicle.vue","mtime":1560932052000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpclient from '@/utils/httpclient';\nimport googleMap from '@components/googleMap';\nexport default {\n  name: \"vehicle\",\n  components: {\n    googleMap: googleMap\n  },\n  inject: [\"reload\"],\n  data: function data() {\n    return {\n      tableFields: {\n        photoUrl: {\n          label: 'Photo',\n          class: 'text-center'\n        },\n        vehicle: {\n          label: 'Vehicle',\n          class: 'text-center'\n        },\n        park: {\n          label: 'Lot',\n          class: 'text-center'\n        },\n        battery: {\n          label: 'Voltage',\n          class: 'text-center'\n        },\n        online: {\n          label: 'Online/Offline',\n          class: 'text-center'\n        },\n        use: {\n          label: 'Available/In Use',\n          class: 'text-center'\n        },\n        price: {\n          label: 'Price',\n          class: 'text-center'\n        },\n        inventory: {\n          label: 'Inventory Age',\n          class: 'text-center'\n        },\n        action: {\n          label: 'Actions',\n          class: 'text-center'\n        }\n      },\n      data: null,\n      table: null,\n      showMap: false,\n      map: {},\n      rows: 0,\n      currentPage: 1,\n      total: 0,\n      perPage: 10,\n      showDelMap: false,\n      delId: '',\n      showEtip: false,\n      pageCount: 0,\n      gFData: [],\n      search: '',\n      queryData: {}\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var self = this;\n    this.axiosApi(self, 1, this.$route.query.filters ? JSON.parse(this.$route.query.filters) : []);\n    this.getFilter(); //初始化checkbox勾选\n\n    var myData = this.$route.query.filters ? JSON.parse(this.$route.query.filters) : [];\n\n    if (myData.length) {\n      myData.map(function (item) {\n        _this.queryData[item.key] = item.value;\n      });\n    }\n  },\n  methods: {\n    getFilter: function getFilter() {\n      var _this2 = this;\n\n      httpclient.post('/api/v1/vehiclesearch/filter').then(function (response) {\n        _this2.gFData = response.data.data;\n      }).catch(function () {});\n    },\n    searchData: function searchData() {\n      var search = [];\n      var keys = [];\n      this.$refs.checkbox.forEach(function (item) {\n        if (item.is_Checked) {\n          if (keys.includes(item.name)) {\n            var _arr = search;\n\n            for (var _i = 0; _i < _arr.length; _i++) {\n              var it = _arr[_i];\n              if (it.key == item.name) it.value.push(item.value);\n            }\n          } else {\n            search.push({\n              key: item.name,\n              value: [item.value]\n            });\n            keys.push(item.name);\n          }\n        }\n      });\n      this.axiosApi(this, 1, search);\n    },\n    axiosApi: function axiosApi(self, page, obj) {\n      var _this3 = this;\n\n      httpclient.post(\"/api/v1/vehiclesearch/searchnew?searchText=\".concat(this.search, \"&source=&pageNo=\").concat(page, \"&pageSize=10\"), {\n        filters: obj\n      }).then(function (response) {\n        self.data = response.data.data;\n        self.total = response.data.data.rowCount ? response.data.data.rowCount : 0;\n        self.currentPage = response.data.data.pageNo ? response.data.data.pageNo : 0;\n        self.pageCount = response.data.data.pageCount ? response.data.data.pageCount : 0;\n\n        _this3.filterData(self.data.vehicles);\n      }).catch(function (err) {\n        alert(err);\n      });\n    },\n    formatNumber: function formatNumber(nStr) {\n      nStr += '';\n      var x = nStr.split('.');\n      var x1 = x[0];\n      var x2 = x.length > 1 ? '.' + x[1] : '';\n      var rgx = /(\\d+)(\\d{3})/;\n\n      while (rgx.test(x1)) {\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\n      }\n\n      return x1 + x2;\n    },\n    changePage: function changePage(page) {\n      var self = this;\n      this.axiosApi(self, page, []);\n    },\n    apiDel: function apiDel() {\n      var _this4 = this;\n\n      httpclient.post('/api/v1/vehicle/delete', {\n        vehicleId: this.delId\n      }).then(function (response) {\n        if (response.data.code == 200) {\n          _this4.reload();\n        } else {\n          _this4.showEtip = true;\n        }\n      }).catch(function () {\n        _this4.showEtip = true;\n      });\n    },\n    showMapTip: function showMapTip(lat, lng, area, info) {\n      if (lat || area) {\n        this.map = {\n          lat: lat,\n          lng: lng,\n          area: area,\n          vehicleInfo: info\n        };\n        this.showMap = true;\n      }\n    },\n    hideModal: function hideModal() {\n      this.$refs['my-modal'].hide();\n    },\n    delData: function delData(id) {\n      this.delId = id;\n      this.showDelMap = true;\n    },\n    filterData: function filterData(data) {\n      var self = this;\n      this.table = data.map(function (item) {\n        var pack = item.outStatus == 1 ? item.parkingName : \"N/A\";\n        var battery = null;\n        var batteryClass = null;\n\n        if (item.currentVoltage) {\n          var numBat = item.currentVoltage.toFixed(1);\n          battery = item.currentVoltage.toFixed(1) + ' V';\n          batteryClass = numBat <= 11.7 ? 'badge-danger' : numBat > 11.7 && numBat <= 12.1 ? 'badge-warning' : 'badge-success';\n        } else {\n          battery = \"N/A\";\n          batteryClass = 'badge-secondary';\n        }\n\n        var onlineStatus = item.isOnline == 1 ? \"Online\" : \"Offline\";\n        var year = item.year ? item.year : 'N/A';\n        var make = item.make ? item.make : 'N/A';\n        var model = item.model ? item.model : 'N/A';\n        var info = year == 'N/A' && make == 'N/A' && model == 'N/A' ? 'N/A' : year + ' ' + make + ' ' + model;\n        var color = item.color ? item.color : 'N/A';\n        var trim = item.trim ? item.trim : 'N/A';\n        var colorTrim = color == 'N/A' && trim == 'N/A' ? 'N/A' : color + ' , ' + trim;\n        return {\n          \"photoUrl\": item.photoUrl ? item.photoUrl : require(\"@/assets/pages-img/placeholder.svg\"),\n          \"vehicle\": info,\n          \"colorTrim\": colorTrim,\n          \"stock\": item.stockNumber ? item.stockNumber : 'N/A',\n          \"park\": pack,\n          \"battery\": battery,\n          \"batteryClass\": batteryClass,\n          \"online\": onlineStatus,\n          \"use\": item.available == 0 ? 'Available' : 'In Use',\n          \"price\": item.price ? item.priceUnit + ' ' + self.formatNumber(item.price) : 'N/A',\n          \"inventory\": item.inventoryDays ? item.inventoryDays + ' Days' : 'N/A',\n          \"action\": \"<span>action</span>\",\n          \"vehicleId\": item.vehicleId,\n          \"unboundStatus\": item.isOnline == 3 ? 'Unbound' : '',\n          \"info\": info,\n          \"lat\": item.lastLocationLat,\n          \"lng\": item.lastLocationLng,\n          \"area\": item.areaCoordinates\n        };\n      });\n    }\n  }\n};",{"version":3,"sources":["vehicle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"animated fadeIn vehicle\">\n\t\t<b-card style=\"width: 100%;\">\n\t\t\t<div slot=\"header\">\n\t\t\t\t<i class='fa fa-automobile'></i>\n\t\t\t\t<span>Vehicles</span>\n\t\t\t\t<div class=\"header-right\">\n\t\t\t\t\t<b-button class=\"btn btn-sm btn-primary mr-2\" @click=\"$router.push('/vehicle/add')\">\n\t\t\t\t\t\t<i class=\"fa fa-plus-square\"></i>\n\t\t\t\t\t\tAdd Inventory\n\t\t\t\t\t</b-button>\n\t\t\t\t\t<b-button class=\"btn btn-sm btn-primary mr-2\" @click=\"$router.push('/vehicle/bind')\">\n\t\t\t\t\t\t<i class=\"fa fa-wrench\"></i>\n\t\t\t\t\t\tDevice Installation\n\t\t\t\t\t</b-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<b-form-group label-for=\"elementsAppendButton\" class=\"search-group\">\n\t\t\t\t\t<b-input-group>\n\t\t\t\t\t\t<b-form-input type=\"text\" v-model=\"search\"></b-form-input>\n\t\t\t\t\t\t<b-input-group-append>\n\t\t\t\t\t\t\t<b-button variant=\"primary\" @click=\"searchData\"><i class=\"fa fa-search\"></i>Search</b-button>\n\t\t\t\t\t\t</b-input-group-append>\n\t\t\t\t\t</b-input-group>\n\t\t\t\t</b-form-group>\n\n\t\t\t\t<b-btn v-b-toggle.collapse class=\"m-1 btn btn-outline-info\">\n\t\t\t\t\t<i class=\"fa fa-filter\"></i>Filters\n\t\t\t\t</b-btn>\n\t\t\t</div>\n\t\t\t<b-collapse id=\"collapse\">\n\t\t\t\t<b-card class=\"collapse-m\" style=\"width: 100%\">\n\t\t\t\t\t<template v-for=\"item in gFData\">\n\t\t\t\t\t\t<b-row :key=\"item.label\">\n\t\t\t\t\t\t\t<b-col sm=\"2\" class=\"text-primary\">\n\t\t\t\t\t\t\t\t{{ item.label }}\n\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t\t<b-col sm=\"10\">\n\t\t\t\t\t\t\t\t<div v-for=\"it in item.filters\" :key=\"it.value\" class=\"filter-content\">\n\t\t\t\t\t\t\t\t\t<b-form-checkbox-group v-model=\"queryData[item.key]\">\n\t\t\t\t\t\t\t\t\t\t<b-form-checkbox  :value=\"it.value\" :name=\"item.key\" ref=\"checkbox\" :checked=\"queryData[item.key]\">\n\t\t\t\t\t\t\t\t\t\t\t{{ it.key }}\n\t\t\t\t\t\t\t\t\t\t</b-form-checkbox>\n\t\t\t\t\t\t\t\t\t</b-form-checkbox-group>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</b-col>\n\t\t\t\t\t\t</b-row>\n\t\t\t\t\t</template>\n\t\t\t\t</b-card>\n\t\t\t</b-collapse>\n\t\t\t<b-table class=\"mb-0 table-outline\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\" head-variant=\"light\">\n\t\t\t\t<template slot=\"photoUrl\" slot-scope=\"data\">\n\t\t\t\t\t<div class=\"photo-url\" @click=\"$router.push('/vehicle/detail/' + data.item.vehicleId)\">\n\t\t\t\t\t\t<span>{{ data.item.unboundStatus }}</span>\n\t\t\t\t\t\t<img :src=\"data.item.photoUrl\" width=\"100px\" height=\"100px\">\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template slot=\"battery\" slot-scope=\"data\">\n\t\t\t\t\t<span class=\"badge badge-pill\" :class=\"data.item.batteryClass ? data.item.batteryClass : '' \">{{ data.item.battery }}</span>\n\t\t\t\t</template>\n\t\t\t\t<template slot=\"vehicle\" slot-scope=\"data\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div @click=\"$router.push(`/vehicle/detail/${data.item.vehicleId}`)\"><strong class=\"link-to-detail\">{{data.item.vehicle}}</strong></div>\n\t\t\t\t\t\t<div>{{data.item.colorTrim}}</div>\n\t\t\t\t\t\t<div>{{data.item.stock}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template slot=\"online\" slot-scope=\"data\">\n\t\t\t\t\t<span class=\"badge badge-pill\" :class=\"data.item.online == 'Online' ? 'badge-success' : 'btn-secondary' \">{{ data.item.online }}</span>\n\t\t\t\t</template>\n\t\t\t\t<template slot=\"use\" slot-scope=\"data\">\n\t\t\t\t\t<span class=\"badge badge-pill\" :class=\"data.item.use == 'Available' ? 'badge-success' : 'btn-danger' \">{{ data.item.use }}</span>\n\t\t\t\t</template>\n\t\t\t\t<template slot=\"action\" slot-scope=\"data\">\n\t\t\t\t\t<div class=\"mapLocation\" @click=\"showMapTip(data.item.lat, data.item.lng, data.item.area, data.item.info)\"><i class=\"cui cui-location-pin btn btn-sm btn-secondary\" :class=\"data.item.lat || data.item.area ? 'btn-success' : '' \"></i></div>\n\t\t\t\t\t<div class=\"btn btn-sm btn-info vehicledetail\" @click=\"$router.push('/vehicle/detail/' + data.item.vehicleId)\"><i class=\"fa fa-eye\"></i></div>\n\t\t\t\t\t<div class=\"btn btn-sm btn-info vehicleedit\" @click=\"$router.push('/vehicle/edit/' + data.item.vehicleId)\"><i class=\"fa fa-edit\"></i></div>\n\t\t\t\t\t<div v-b-modal.del-1 class=\"btn btn-sm btn-danger btn-del\" @click=\"delData(data.item.vehicleId)\"><i class=\"cui cui-trash\"></i></div>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\t\t\t<b-row>\n\t\t\t\t<b-col sm=\"4\" lg=\"4\">\n\t\t\t\t\t<div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n\t\t\t\t\t\t<span v-if=\"total > 0\">\n\t\t\t\t\t\t\tShowing {{10 * (currentPage - 1) + 1 }} to {{currentPage === pageCount? total :currentPage * 10 }} of {{total}} entries\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-else>\n\t\t\t\t\t\t\tShowing 0 to 0 of {{total}} entries\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</b-col>\n\t\t\t\t<b-col sm=\"8\" lg=\"8\">\n\t\t\t\t\t<b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"perPage\" @input=\" changePage(currentPage)\"></b-pagination>\n\t\t\t\t</b-col>\n\t\t\t</b-row>\n\n\n\t\t</b-card>\n\t\t<div class=\"del-tip\">\n\t\t\t<b-modal ref=\"my-modal\" hide-footer title=\"Are you sure to delete the vehicles?\" v-model=\"showDelMap\" @ok=\"showDelMap = false\">\n\t\t\t\t<b-button @click=\"hideModal\">Cancel</b-button>\n\t\t\t\t<b-button class=\"btn btn-primary\" @click=\"apiDel\">Ok</b-button>\n\t\t\t</b-modal>\n\t\t</div>\n\n\t\t<b-modal ref=\"my-modal\" v-model=\"showMap\" @ok=\"showMap = false\">\n\t\t\t<google-map\n\t\t\t\t\t:map=\"map\"\n\t\t\t></google-map>\n\t\t</b-modal>\n\n\t\t<b-modal ref=\"my-modal\" v-model=\"showEtip\" @ok=\"showEtip = false\">\n\t\t\t<b-button>Cancel</b-button>\n\t\t\t<b-button class=\"btn btn-primary\">Ok</b-button>\n\t\t</b-modal>\n\t</div>\n</template>\n\n<style lang=\"scss\" scoped>\n\t.vehicle {\n\t\twidth: 100%;\n\t\t.link-to-detail{\n\t\t\tcursor: pointer;\n\t\t\tcolor: #20a8d8;\n\t\t\t&:hover{\n\t\t\t\ttext-decoration: underline;\n\t\t\t}\n\t\t}\n\n\t\t.search-group {\n\t\t\twidth: 40%;\n\t\t\tmargin-top: 2%;\n\t\t\tdisplay: inline-block;\n\t\t\tinput {\n\t\t\t\theight: 40px;\n\t\t\t}\n\t\t\tbutton {\n\t\t\t\tmargin-left: 0px;\n\t\t\t\theight: 36px;\n\t\t\t}\n\t\t\ta {\n\t\t\t\tmargin-left: 10%;\n\t\t\t}\n\t\t}\n\t\ti {\n\t\t\tmargin-right: 4px;\n\t\t}\n\t\t.collapse-m {\n\t\t\tborder-color: #1FA8D8;\n\t\t\tborder-style: dashed;\n\t\t}\n\t\t.table-outline {\n\t\t\tmargin-top: 2%;\n\t\t}\n\t\t.filter-content {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\t.header-right {\n\t\t\tfloat: right;\n\t\t\tbutton {\n\t\t\t\tbackground-color: #20a8d8!important;\n\t\t\t\tborder-color: #20a8d8!important;\n\t\t\t}\n\t\t}\n\t}\n\t.btn {\n\t\tmargin: 2px;\n\t}\n\t.mapLocation {\n\n\t}\n\t.photo-url {\n\t\timg {\n\t\t\tborder-radius: 4px;\n\t\t}\n\t\tspan {\n\t\t\tposition: absolute;\n\t\t\tbackground-color: #73818f;\n\t\t\tborder-radius: 4px;\n\t\t\tpadding: 0.25rem;\n\t\t\tfont-size: 12px;\n\t\t}\n\t\tstrong {\n\n\t\t}\n\t}\n</style>\n\n<script>\n\timport httpclient from '@/utils/httpclient';\n\timport googleMap from '@components/googleMap'\n\texport default {\n\t\tname: \"vehicle\",\n\t\tcomponents: {\n\t\t\tgoogleMap\n\t\t},\n\t\tinject: [\"reload\"],\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\ttableFields: {\n\t\t\t\t\tphotoUrl: {\n\t\t\t\t\t\tlabel: 'Photo',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tvehicle: {\n\t\t\t\t\t\tlabel: 'Vehicle',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tpark: {\n\t\t\t\t\t\tlabel: 'Lot',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tbattery: {\n\t\t\t\t\t\tlabel: 'Voltage',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tonline: {\n\t\t\t\t\t\tlabel: 'Online/Offline',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tuse: {\n\t\t\t\t\t\tlabel: 'Available/In Use',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tprice: {\n\t\t\t\t\t\tlabel: 'Price',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\tinventory: {\n\t\t\t\t\t\tlabel: 'Inventory Age',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t},\n\t\t\t\t\taction: {\n\t\t\t\t\t\tlabel: 'Actions',\n\t\t\t\t\t\tclass: 'text-center'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata: null,\n\t\t\t\ttable: null,\n\t\t\t\tshowMap: false,\n\t\t\t\tmap: {},\n\t\t\t\trows: 0,\n\t\t\t\tcurrentPage: 1,\n\t\t\t\ttotal: 0,\n\t\t\t\tperPage:10,\n\t\t\t\tshowDelMap: false,\n\t\t\t\tdelId: '',\n\t\t\t\tshowEtip: false,\n\t\t\t\tpageCount: 0,\n\t\t\t\tgFData: [],\n\t\t\t\tsearch: '',\n\t\t\t\tqueryData:{},\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tlet self = this;\n\t\t\tthis.axiosApi(self, 1, this.$route.query.filters ? JSON.parse(this.$route.query.filters) : []);\n\t\t\tthis.getFilter();\n\t\t\t//初始化checkbox勾选\n\t\t\tlet myData = this.$route.query.filters ? JSON.parse(this.$route.query.filters) : [];\n\t\t\tif(myData.length){\n\t\t\t\tmyData.map((item)=>{\n\t\t\t\t\tthis.queryData[item.key] = item.value;\n\t\t\t\t})\n\t\t\t}\n\n\t\t},\n\t\tmethods: {\n\t\t\tgetFilter() {\n\t\t\t\thttpclient.post('/api/v1/vehiclesearch/filter').then(response => {\n\t\t\t\t\tthis.gFData = response.data.data;\n\t\t\t\t}).catch(() => {\n\t\t\t\t});\n\t\t\t},\n\t\t\tsearchData() {\n\t\t\t\tlet search= [];\n\t\t\t\tlet keys = [];\n\t\t\t\tthis.$refs.checkbox.forEach((item) => {\n\t\t\t\t\tif (item.is_Checked) {\n\t\t\t\t\t\tif (keys.includes(item.name)) {\n\t\t\t\t\t\t\tfor (let it of search) {\n\t\t\t\t\t\t\t\tif (it.key == item.name) it.value.push(item.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch.push({\n\t\t\t\t\t\t\t\tkey: item.name,\n\t\t\t\t\t\t\t\tvalue: [item.value]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tkeys.push(item.name)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.axiosApi(this, 1, search);\n\n\t\t\t},\n\t\t\taxiosApi(self, page, obj){\n\t\t\t\thttpclient.post(`/api/v1/vehiclesearch/searchnew?searchText=${this.search}&source=&pageNo=${page}&pageSize=10`, {\n\t\t\t\t\tfilters: obj\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tself.data = response.data.data;\n\t\t\t\t\tself.total = response.data.data.rowCount ? response.data.data.rowCount : 0 ;\n\t\t\t\t\tself.currentPage = response.data.data.pageNo ? response.data.data.pageNo : 0;\n\t\t\t\t\tself.pageCount = response.data.data.pageCount ? response.data.data.pageCount : 0;\n\t\t\t\t\tthis.filterData(self.data.vehicles);\n\t\t\t\t}).catch((err) => {\n\t\t\t\t\talert(err)\n\t\t\t\t})\n\t\t\t},\n\t\t\tformatNumber(nStr){\n\t\t\t\tnStr += '';\n\t\t\t\tlet x = nStr.split('.');\n\t\t\t\tlet x1 = x[0];\n\t\t\t\tlet x2 = x.length > 1 ? '.' + x[1] : '';\n\t\t\t\tvar rgx = /(\\d+)(\\d{3})/;\n\t\t\t\twhile (rgx.test(x1)) {\n\t\t\t\t\tx1 = x1.replace(rgx, '$1' + ',' + '$2');\n\t\t\t\t}\n\t\t\t\treturn x1 + x2;\n\t\t\t},\n\t\t\tchangePage(page) {\n\t\t\t\tlet self = this;\n\t\t\t\tthis.axiosApi(self, page, []);\n\t\t\t},\n\t\t\tapiDel() {\n\t\t\t\thttpclient.post('/api/v1/vehicle/delete',{\n\t\t\t\t\tvehicleId: this.delId\n\t\t\t\t}).then(response => {\n\t\t\t\t\tif (response.data.code == 200) {\n\t\t\t\t\t\tthis.reload();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.showEtip = true;\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.showEtip = true;\n\t\t\t\t})\n\t\t\t},\n\t\t\tshowMapTip(lat, lng, area, info) {\n\t\t\t\tif (lat || area) {\n\t\t\t\t\tthis.map = {\n\t\t\t\t\t\tlat: lat,\n\t\t\t\t\t\tlng: lng,\n\t\t\t\t\t\tarea: area,\n\t\t\t\t\t\tvehicleInfo: info\n\t\t\t\t\t};\n\t\t\t\t\tthis.showMap = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\thideModal(){\n\t\t\t\tthis.$refs['my-modal'].hide();\n\t\t\t},\n\t\t\tdelData(id){\n\t\t\t\tthis.delId = id;\n\t\t\t\tthis.showDelMap = true;\n\t\t\t},\n\t\t\tfilterData(data){\n\n\t\t\t\tlet self = this;\n\t\t\t\tthis.table = data.map(function (item) {\n\t\t\t\t\tlet pack = item.outStatus == 1 ? item.parkingName : \"N/A\";\n\t\t\t\t\tlet battery = null;\n\t\t\t\t\tlet batteryClass = null;\n\t\t\t\t\tif (item.currentVoltage) {\n\t\t\t\t\t\tlet numBat = item.currentVoltage.toFixed(1);\n\t\t\t\t\t\tbattery = item.currentVoltage.toFixed(1) + ' V';\n\t\t\t\t\t\tbatteryClass = numBat <= 11.7 ? 'badge-danger' : (numBat > 11.7 && numBat <= 12.1 ? 'badge-warning' : 'badge-success' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbattery = \"N/A\";\n\t\t\t\t\t\tbatteryClass = 'badge-secondary';\n\t\t\t\t\t}\n\t\t\t\t\tlet onlineStatus = item.isOnline == 1 ? \"Online\" : \"Offline\";\n\t\t\t\t\tlet year = item.year ? item.year : 'N/A';\n\t\t\t\t\tlet make = item.make ? item.make : 'N/A';\n\t\t\t\t\tlet model = item.model ? item.model : 'N/A';\n\t\t\t\t\tlet info = (year == 'N/A' && make == 'N/A' && model == 'N/A') ? 'N/A' : year + ' ' + make + ' ' + model;\n\t\t\t\t\tlet color = item.color ? item.color : 'N/A';\n\t\t\t\t\tlet trim = item.trim ? item.trim : 'N/A';\n\t\t\t\t\tlet colorTrim = (color == 'N/A' && trim == 'N/A') ? 'N/A' : color + ' , ' + trim;\n\t\t\t\t\treturn {\n\t\t\t\t\t\t\"photoUrl\": item.photoUrl ? item.photoUrl : require(\"@/assets/pages-img/placeholder.svg\"),\n\t\t\t\t\t\t\"vehicle\": info,\n\t\t\t\t\t\t\"colorTrim\":colorTrim,\n\t\t\t\t\t\t\"stock\": item.stockNumber ? item.stockNumber : 'N/A',\n\t\t\t\t\t\t\"park\": pack,\n\t\t\t\t\t\t\"battery\": battery,\n\t\t\t\t\t\t\"batteryClass\": batteryClass,\n\t\t\t\t\t\t\"online\": onlineStatus,\n\t\t\t\t\t\t\"use\": item.available == 0 ? 'Available' : 'In Use',\n\t\t\t\t\t\t\"price\": item.price ? item.priceUnit + ' ' + self.formatNumber(item.price) : 'N/A',\n\t\t\t\t\t\t\"inventory\": item.inventoryDays ? item.inventoryDays + ' Days' : 'N/A',\n\t\t\t\t\t\t\"action\": \"<span>action</span>\",\n\t\t\t\t\t\t\"vehicleId\": item.vehicleId,\n\t\t\t\t\t\t\"unboundStatus\": item.isOnline == 3 ? 'Unbound' : '',\n\t\t\t\t\t\t\"info\": info,\n\t\t\t\t\t\t\"lat\": item.lastLocationLat,\n\t\t\t\t\t\t\"lng\": item.lastLocationLng,\n\t\t\t\t\t\t\"area\": item.areaCoordinates\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t}\n</script>"],"sourceRoot":"src/views/dashboard/dashboardMain"}]}