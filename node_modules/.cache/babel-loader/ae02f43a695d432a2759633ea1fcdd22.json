{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js!/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/adminEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/adminEdit.vue","mtime":1560421842000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from '@/utils/httpclient';\nimport Alert from '@components/model';\nexport default {\n  name: 'adminEdit',\n  components: {\n    Alert: Alert\n  },\n  data: function data() {\n    return {\n      id: this.$route.params.id,\n      userName: '',\n      firstName: '123',\n      lastName: '432',\n      userEmail: '82482@u8u28.com',\n      phone: '',\n      adminId: 0,\n      status: 1,\n      role: '',\n      options1: ['Dealership Staff', 'Dealership Manager', 'Dealership Group Administrator'],\n      selected1: '',\n      options2: ['Active', 'InActive'],\n      selected2: '',\n      showAlerts: {\n        title: '',\n        content: '',\n        show: false,\n        buttonText: ''\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.adminId = this.$store.state.userInfo.userId;\n    var url = 'https://api-saas-qa.zus.ai/api/v1/getUserById';\n    httpClient.post(url, {\n      userId: this.id\n    }).then(function (res) {\n      var data = res.data.data;\n      _this.userName = data.lastName + ' ' + data.firstName;\n      _this.firstName = data.firstName;\n      _this.lastName = data.lastName;\n      _this.userEmail = data.userEmail;\n      _this.phone = data.phone;\n      _this.status = data.status === 1 ? 'Active' : 'InActive';\n      _this.role = data.role; //初始化role 和 status的下拉选择\n\n      var i = _this.options1.findIndex(function (val) {\n        return val === _this.role;\n      });\n\n      _this.selected1 = _this.options1[i];\n\n      var j = _this.options2.findIndex(function (item) {\n        return item === _this.status;\n      });\n\n      _this.selected2 = _this.options2[j];\n    });\n  },\n  methods: {\n    saveData: function saveData() {\n      var _this2 = this;\n\n      var link = 'https://api-saas-qa.zus.ai/api/v1/updateUser';\n      var userRole;\n\n      if (this.selected1 === 'Dealership Staff') {\n        userRole = 'user';\n      } else if (this.selected1 === 'Dealership Manager') {\n        userRole = 'manager';\n      } else {\n        userRole = 'root';\n      }\n\n      var data = {\n        userId: this.id,\n        role: userRole,\n        status: this.selected2 === 'Active' ? 1 : 0\n      };\n      httpClient.post(link, data).then(function (res) {\n        if (res.data.code === 200) {\n          var passData = {\n            title: 'User Information Updated!',\n            show: true,\n            content: '',\n            buttonText: {\n              btnFirst: '',\n              btnSecond: 'OK',\n              userId: ''\n            }\n          };\n\n          _this2.closeRemind(passData);\n        }\n      });\n    },\n    closeBox: function closeBox() {\n      this.showAlerts.show = !this.showAlerts.show;\n    },\n    closeRemind: function closeRemind(data) {\n      this.showAlerts.show = data.show;\n      this.showAlerts.title = data.title;\n      this.showAlerts.content = data.content;\n      this.showAlerts.buttonText = data.buttonText;\n    }\n  }\n};",null]}