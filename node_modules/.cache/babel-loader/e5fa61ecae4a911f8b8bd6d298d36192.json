{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js!/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/components/vehicleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/components/vehicleForm.vue","mtime":1568630157000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n  name: \"vehicleForm\",\n  components: {\n    model: model\n  },\n  props: ['vehicleInfo'],\n  data: function data() {\n    return {\n      title: '',\n      content: '',\n      show: false,\n      showB: false,\n      vin: '',\n      data: {},\n      year: '',\n      make: '',\n      alias: '',\n      trim: '',\n      engine: '',\n      price: '',\n      stock: '',\n      condition: 'new',\n      odometer: '',\n      model: '',\n      color: 'Black',\n      date: '',\n      plate: '',\n      photo: '',\n      deviceMac: '',\n      changedLanguage: null,\n      colorList: [{\n        c: this.$t('m.colors.black'),\n        y: \"Black\"\n      }, {\n        c: this.$t('m.colors.white'),\n        y: 'White'\n      }, {\n        c: this.$t('m.colors.silver'),\n        y: 'Silver'\n      }, {\n        c: this.$t('m.colors.blue'),\n        y: 'Blue'\n      }, {\n        c: this.$t('m.colors.red'),\n        y: 'Red'\n      }, {\n        c: this.$t('m.colors.brown'),\n        y: 'Brown'\n      }, {\n        c: this.$t('m.colors.gold'),\n        y: 'Gold'\n      }, {\n        c: this.$t('m.colors.orange'),\n        y: 'Orange'\n      }, {\n        c: this.$t('m.colors.yellow'),\n        y: 'Yellow'\n      }, {\n        c: this.$t('m.colors.purple'),\n        y: 'Purple'\n      }, {\n        c: this.$t('m.colors.green'),\n        y: 'Green'\n      }, {\n        c: this.$t('m.colors.pink'),\n        y: 'Pink'\n      }, {\n        c: this.$t('m.colors.others'),\n        y: 'Others'\n      }],\n      conditionList: [{\n        c: this.$t('m.common.c_new'),\n        y: \"1\"\n      }, {\n        c: this.$t('m.common.c_used'),\n        y: \"3\"\n      }, {\n        c: this.$t('m.common.c_demo'),\n        y: \"2\"\n      }]\n    };\n  },\n  watch: {\n    'vehicleInfo': {\n      immediate: true,\n      handler: function handler(curVal) {\n        this.showB = false;\n        this.data = curVal;\n        this.year = this.data.year;\n        this.make = this.data.make;\n        this.model = this.data.model;\n        this.alias = this.data.alias;\n        this.trim = this.data.trim;\n        this.engine = this.data.engineType;\n        this.price = this.data.price;\n        this.color = this.data.color;\n        this.date = this.data.inventoryDays;\n        this.stock = this.data.stockNumber;\n        this.condition = this.data.vehicleType;\n        this.odometer = this.data.currentMileage * 0.0006214;\n        this.plate = this.data.plate;\n        this.photo = this.data.photoPath;\n        this.vin = this.data.vin;\n        this.deviceMac = this.data.mac;\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    if (this.$i18n.locale === 'en-US') {\n      this.changedLanguage = \"English\";\n    } else {\n      this.changedLanguage = 'Chinese';\n    }\n  },\n  methods: {\n    savefile: function savefile(event) {\n      var _this = this;\n\n      var file = event.target.files;\n      var fb = new FormData();\n      fb.append(\"image\", file[0]);\n      httpClient.post('/api/v1/uploadFile', fb).then(function (response) {\n        if (response.data.code == 200) {\n          _this.photo = response.data.data.path;\n          _this.title = _this.$t('m.tip.suc');\n          _this.content = _this.$t('m.tip.upload');\n          _this.show = true;\n          _this.showB = false;\n        }\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    saveData: function saveData() {\n      var _this2 = this;\n\n      var _mileage = null; //距离单位转换\n\n      if (this.odometer) {\n        if (this.changedLanguage === 'English') {\n          _mileage = (this.odometer * 1609.344).toFixed(0);\n        } else {\n          _mileage = (this.odometer * 1000).toFixed(0);\n        }\n      } else {\n        _mileage = 0;\n      }\n\n      httpClient.post('/api/v1/vehicle/bind/device', {\n        vin: this.vin,\n        year: this.year,\n        make: this.make,\n        deviceMac: this.deviceMac,\n        model: this.model,\n        alias: this.alias,\n        trim: this.trim,\n        engineType: this.engine,\n        color: this.color,\n        price: Number(this.price) ? this.price : '',\n        stockNumber: this.stock,\n        inventoryDate: new Date(this.date).getTime(),\n        vehicleTypeCode: Number(this.condition),\n        currentMileage: _mileage,\n        plate: this.plate,\n        photoPath: this.photo\n      }).then(function (response) {\n        _this2.$emit(\"showStep3\", response.data.data);\n      }).catch(function (err) {\n        console.log(\"server error\");\n      });\n    }\n  }\n};",null]}