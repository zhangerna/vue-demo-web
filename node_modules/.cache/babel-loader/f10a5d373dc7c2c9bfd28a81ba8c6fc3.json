{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/lots.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/lots.vue","mtime":1560923845000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport googleMap from '@/components/googleMap';\nimport model from \"@/components/model\";\nexport default {\n  name: 'lots',\n  inject: ['reload'],\n  components: {\n    googleMap: googleMap,\n    model: model\n  },\n  data: function data() {\n    return {\n      currentPage: 1,\n      pageSize: 10,\n      table: null,\n      curDel: null,\n      show: false,\n      btnGroup: {\n        btnFirst: 'Cancel',\n        btnSecond: 'OK'\n      },\n      tableFields: {\n        name: {\n          label: \"Lot Name\",\n          class: \"text-center\"\n        },\n        address: {\n          label: \"Lot Address\",\n          class: \"text-center\"\n        },\n        dealership: {\n          label: \"Dealership\",\n          class: \"text-center\"\n        },\n        vehicles: {\n          label: \"All Vehicles\",\n          class: \"text-center\"\n        },\n        battery: {\n          label: \"Low Battery\",\n          class: \"text-center\"\n        },\n        offline: {\n          label: \"Offline\",\n          class: \"text-center\"\n        },\n        actions: {\n          label: \"Actions\",\n          class: \"text-center\"\n        }\n      },\n      total: 0,\n      totalPages: 0,\n      tipTitle: '',\n      showMap: false,\n      map: {}\n    };\n  },\n  mounted: function mounted() {\n    this.initData(this.currentPage);\n  },\n  methods: {\n    initData: function initData(page) {\n      var _this = this;\n\n      httpClient.get(\"/api/v1/lot/page?pageNo=\".concat(page)).then(function (response) {\n        _this.currentPage = response.data.data.pageNo;\n        _this.total = response.data.data.rowCount;\n\n        _this.filterData(response.data.data);\n\n        _this.totalPages = response.data.data.totalPages;\n      });\n    },\n    filterData: function filterData(data) {\n      this.table = data.datas.map(function (item) {\n        return {\n          name: item.parkingName,\n          address: item.address,\n          dealership: item.storeName,\n          vehicles: item.vehicleFilter.num,\n          battery: item.lowBatteryFilter.num,\n          offline: item.offLineFilter.num,\n          id: item.id\n        };\n      });\n    },\n    delId: function delId(id) {\n      this.curDel = id;\n      this.show = true;\n    },\n    hideTip: function hideTip(type) {\n      var _this2 = this;\n\n      if (type) {\n        httpClient.post('/api/v1/lot/delete', {\n          id: this.curDel\n        }).then(function (response) {\n          _this2.reload();\n        });\n      }\n\n      this.show = false;\n    },\n    linkVehicles: function linkVehicles(id) {\n      var filter = \"[{\\\"key\\\":\\\"parking\\\",\\\"value\\\":[\\\"\".concat(id, \"\\\"]}]\");\n      this.$router.push({\n        name: 'vehicle',\n        query: {\n          filters: filter\n        }\n      });\n    },\n    linkBattery: function linkBattery(id) {\n      this.$router.push({\n        name: 'vehicle',\n        query: {\n          filters: \"[{\\\"key\\\":\\\"parking\\\",\\\"value\\\":[\\\"\".concat(id, \"\\\"]},{\\\"key\\\":\\\"battery\\\",\\\"value\\\":[\\\"1\\\"]}]\")\n        }\n      });\n    },\n    linkSecondary: function linkSecondary(id) {\n      this.$router.push({\n        name: 'vehicle',\n        query: {\n          filters: \"[{\\\"key\\\":\\\"parking\\\",\\\"value\\\":[\\\"\".concat(id, \"\\\"]},{\\\"key\\\":\\\"online\\\",\\\"value\\\":[\\\"2\\\"]}]\")\n        }\n      });\n    },\n    prevPage: function prevPage() {\n      this.initData(this.currentPage > 1 ? this.currentPage - 1 : 1);\n    },\n    nextPage: function nextPage() {\n      this.initData(this.currentPage >= this.pageCount ? this.currentPage : this.currentPage + 1);\n    },\n    changePage: function changePage(page) {\n      this.initData(page);\n    },\n    getVehicleList: function getVehicleList(id, area, centerCoor, packingName) {\n      var _this3 = this;\n\n      httpClient.get('/api/v1/inlotvehiclelist', {\n        params: {\n          parkingId: id\n        }\n      }).then(function (response) {\n        var latlng = centerCoor.split(\" \");\n        _this3.map = {\n          lat: Number(latlng[1]),\n          lng: Number(latlng[0]),\n          area: area,\n          vehicleInfo: response.data.data,\n          showMult: true\n        };\n        _this3.tipTitle = packingName;\n        _this3.showMap = true;\n      });\n    },\n    mapInfo: function mapInfo(id) {\n      var _this4 = this;\n\n      httpClient.get(\"/api/v1/lot/detail\", {\n        params: {\n          id: id\n        }\n      }).then(function (response) {\n        var data = response.data.data;\n\n        _this4.getVehicleList(id, data.areaCoordinate, data.centerCoordinate, data.parkingName);\n      });\n    }\n  }\n};",{"version":3,"sources":["lots.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn lots\">\n        <b-card>\n            <div slot=\"header\">\n                <i class=\"nav-icon cui-account-logout\"></i>\n                Lots\n                <button class=\"btn btn-sm btn-primary add-lot\" @click=\"$router.push('/lots/add')\">\n                    <i class=\"fa fa-plus-square\"></i>\n                    Add a New Lot\n                </button>\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"vehicles\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-success\" @click=\"linkVehicles(data.item.id)\">{{ data.item.vehicles }}</span>\n                    </template>\n                    <template slot=\"battery\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-danger\" @click=\"linkBattery(data.item.id)\">{{ data.item.battery }}</span>\n                    </template>\n                    <template slot=\"offline\" slot-scope=\"data\">\n                        <span class=\"btn btn-sm btn-block btn-outline-secondary\" @click=\"linkSecondary(data.item.id)\">{{ data.item.offline }}</span>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <button class=\"btn btn-sm btn-success\">\n                            <i class=\"cui icon-map\" @click=\"mapInfo(data.item.id)\"></i>\n                        </button>\n                        <button class=\"btn btn-sm btn-info  m-1\" @click=\"$router.push('/lots/edit/' + data.item.id)\">\n                            <i class=\"fa fa-edit\"></i>\n                        </button>\n                        <button class=\"btn btn-sm btn-danger btn-del\" @click=\"delId(data.item.id)\">\n                            <i class=\"cui cui-trash\"></i>\n                        </button>\n                    </template>\n                </b-table>\n            </div>\n        </b-card>\n\n        <b-row v-if=\"total > 0\">\n            <b-col sm=\"4\" lg=\"4\">\n                <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                    Showing {{10 * (currentPage - 1) + 1 }} to {{currentPage === totalPages? total :currentPage * 10 }} of {{total}} entries\n                </div>\n            </b-col>\n            <b-col sm=\"8\" lg=\"8\">\n                <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"pageSize\" @input=\" changePage(currentPage)\"></b-pagination>\n            </b-col>\n        </b-row>\n\n        <b-modal ref=\"my-modal\" :title=\"tipTitle\" v-model=\"showMap\" @ok=\"showMap = false\">\n            <google-map\n                    :map=\"map\"\n            ></google-map>\n        </b-modal>\n        <model\n               :show=\"show\"\n               :title=\"'Warn'\"\n               :content=\"'Are you sure to delete the lot?'\"\n               :buttonText=\"btnGroup\"\n               @closeRemindBox=\"hideTip\"\n        ></model>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .card {\n        width: 100%;\n    }\n    .lots {\n        .card-header {\n            .add-lot {\n                float: right;\n            }\n        }\n        th, td {\n            height: 44px;\n            line-height: 44px;\n        }\n    }\n</style>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import googleMap from '@/components/googleMap';\n    import model from \"@/components/model\";\n    export default {\n        name: 'lots',\n        inject: ['reload'],\n        components: {\n            googleMap,\n            model,\n        },\n        data() {\n            return {\n                currentPage: 1,\n                pageSize: 10,\n                table: null,\n                curDel: null,\n                show: false,\n                btnGroup: {\n                    btnFirst:'Cancel',\n                    btnSecond: 'OK'\n                },\n                tableFields: {\n                    name: {\n                        label: \"Lot Name\",\n                        class: \"text-center\"\n                    },\n                    address: {\n                        label: \"Lot Address\",\n                        class: \"text-center\"\n                    },\n                    dealership: {\n                        label: \"Dealership\",\n                        class: \"text-center\"\n                    },\n                    vehicles: {\n                        label: \"All Vehicles\",\n                        class: \"text-center\"\n                    },\n                    battery: {\n                        label: \"Low Battery\",\n                        class: \"text-center\"\n                    },\n                    offline: {\n                        label: \"Offline\",\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: \"Actions\",\n                        class: \"text-center\"\n                    }\n                },\n                total: 0,\n                totalPages:0,\n                tipTitle: '',\n                showMap: false,\n                map: {}\n\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage);\n        },\n        methods: {\n            initData(page) {\n                httpClient.get(`/api/v1/lot/page?pageNo=${page}`).then(response => {\n                    this.currentPage = response.data.data.pageNo;\n                    this.total = response.data.data.rowCount;\n                    this.filterData(response.data.data);\n                    this.totalPages = response.data.data.totalPages\n                })\n            },\n            filterData(data){\n                this.table = data.datas.map(item => {\n                    return {\n                        name: item.parkingName,\n                        address: item.address,\n                        dealership: item.storeName,\n                        vehicles: item.vehicleFilter.num,\n                        battery: item.lowBatteryFilter.num,\n                        offline: item.offLineFilter.num,\n                        id: item.id,\n                    }\n                });\n            },\n            delId(id) {\n                this.curDel = id;\n                this.show = true;\n            },\n            hideTip(type) {\n                if (type) {\n                    httpClient.post('/api/v1/lot/delete', {\n                        id: this.curDel\n                    }).then(response => {\n                        this.reload();\n                    })\n                }\n                this.show = false;\n            },\n            linkVehicles(id) {\n                let filter = `[{\"key\":\"parking\",\"value\":[\"${id}\"]}]`;\n                this.$router.push({name: 'vehicle', query: {filters: filter}});\n            },\n            linkBattery(id) {\n                this.$router.push({name: 'vehicle', query: {\n                    filters: `[{\"key\":\"parking\",\"value\":[\"${id}\"]},{\"key\":\"battery\",\"value\":[\"1\"]}]`\n                }});\n            },\n            linkSecondary(id) {\n                this.$router.push({name: 'vehicle', query: {\n                    filters: `[{\"key\":\"parking\",\"value\":[\"${id}\"]},{\"key\":\"online\",\"value\":[\"2\"]}]`\n                }});\n            },\n            prevPage(){\n                this.initData(this.currentPage > 1  ? this.currentPage - 1 : 1)\n            },\n            nextPage(){\n                this.initData(this.currentPage >= this.pageCount  ? this.currentPage : this.currentPage + 1)\n            },\n            changePage(page) {\n                this.initData(page);\n            },\n            getVehicleList(id, area, centerCoor, packingName) {\n                httpClient.get('/api/v1/inlotvehiclelist', {\n                    params: {\n                        parkingId: id\n                    }\n                }).then(response => {\n                    let latlng = centerCoor.split(\" \");\n                    this.map = {\n                        lat: Number(latlng[1]),\n                        lng: Number(latlng[0]),\n                        area: area,\n                        vehicleInfo: response.data.data,\n                        showMult: true\n                    };\n                    this.tipTitle = packingName;\n                    this.showMap = true;\n                })\n            },\n            mapInfo(id) {\n                httpClient.get(\"/api/v1/lot/detail\", {\n                    params: {\n                        id: id\n                    }\n                }).then(response => {\n                    let data = response.data.data;\n                    this.getVehicleList(id, data.areaCoordinate, data.centerCoordinate, data.parkingName);\n                })\n            }\n        }\n    }\n</script>"],"sourceRoot":"src/views/dashboard/dashboardMain"}]}