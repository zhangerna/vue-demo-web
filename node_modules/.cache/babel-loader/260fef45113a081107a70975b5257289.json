{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/adminEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/adminEdit.vue","mtime":1574315938000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from '@/utils/httpclient';\nimport Alert from '@components/model';\nexport default {\n  name: 'adminEdit',\n  components: {\n    Alert: Alert\n  },\n  data: function data() {\n    return {\n      id: this.$route.params.id,\n      activeStatus: '',\n      accountRole: '',\n      userName: '',\n      firstName: '',\n      lastName: '',\n      userEmail: '',\n      phone: '',\n      adminId: 0,\n      status: 1,\n      role: '',\n      detailRole: '',\n      options1: [{\n        id: \"Dealership Staff\",\n        name: this.$t('m.common.user')\n      }, {\n        id: \"Dealership Manager\",\n        name: this.$t('m.common.manager')\n      }, {\n        id: \"Dealership Group Administrator\",\n        name: this.$t('m.common.root')\n      }],\n      selected1: '',\n      options2: [{\n        id: \"Active\",\n        name: this.$t('m.common.active')\n      }, {\n        id: \"InActive\",\n        name: this.$t('m.common.inactive')\n      }],\n      selected2: '',\n      showAlerts: {\n        title: '',\n        content: '',\n        show: false,\n        buttonText: ''\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.adminId = this.$store.state.userInfo.userId;\n    var url = '/api/v1/getUserById';\n    httpClient.post(url, {\n      userId: this.id\n    }).then(function (res) {\n      var data = res.data.data;\n      _this.detailRole = data.role;\n      _this.userName = data.firstName + ' ' + data.lastName;\n      _this.firstName = data.firstName;\n      _this.lastName = data.lastName;\n      _this.userEmail = data.userEmail;\n      _this.phone = data.phone;\n      var temp = data.status === 1 ? 'Active' : 'InActive';\n      _this.status = temp;\n      _this.role = localStorage.getItem('role');\n\n      if (_this.role === 'root') {\n        _this.activeStatus = false;\n      } else if (_this.role === 'manager') {\n        _this.activeStatus = !_this.detailRole.includes('Staff');\n      } //初始化role 和 status的下拉选择\n\n\n      var i = _this.options1.filter(function (val) {\n        return val.id === data.role;\n      });\n\n      _this.selected1 = i[0].id;\n\n      var j = _this.options2.filter(function (item) {\n        return item.id === temp;\n      });\n\n      _this.selected2 = j[0].id;\n    });\n  },\n  methods: {\n    saveData: function saveData() {\n      var _this2 = this;\n\n      var link = '/api/v1/updateUser';\n      var userRole;\n\n      if (this.selected1 === 'Dealership Staff') {\n        userRole = 'user';\n      } else if (this.selected1 === 'Dealership Manager') {\n        userRole = 'manager';\n      } else {\n        userRole = 'root';\n      }\n\n      var data = {\n        userId: this.id,\n        role: userRole,\n        status: this.selected2 === 'Active' ? 1 : 0\n      };\n      httpClient.post(link, data).then(function (res) {\n        if (res.data.code === 200) {\n          var passData = {\n            title: _this2.$t('m.vehicle.actions_remind'),\n            show: true,\n            content: _this2.$t('m.admin.save_success'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: _this2.$t('m.tip.confirm'),\n              userId: ''\n            }\n          };\n\n          _this2.closeRemind(passData);\n        }\n      }).catch(function (res) {\n        var passData = {\n          title: _this2.$t('m.vehicle.actions_remind'),\n          show: true,\n          content: _this2.$t('m.cloud.no_access'),\n          buttonText: {\n            btnFirst: '',\n            btnSecond: _this2.$t('m.tip.confirm'),\n            userId: ''\n          }\n        };\n\n        _this2.closeRemind(passData);\n      });\n    },\n    closeBox: function closeBox() {\n      this.$router.push('/manager-user/detail/' + this.$route.params.id);\n    },\n    closeRemind: function closeRemind(data) {\n      this.showAlerts.show = data.show;\n      this.showAlerts.title = data.title;\n      this.showAlerts.content = data.content;\n      this.showAlerts.buttonText = data.buttonText;\n    }\n  }\n};",{"version":3,"sources":["adminEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA,OAAA,UAAA,MAAA,oBAAA;AACA,OAAA,KAAA,MAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,SAAA,EAAA,EALA;AAMA,MAAA,QAAA,EAAA,EANA;AAOA,MAAA,SAAA,EAAA,EAPA;AAQA,MAAA,KAAA,EAAA,EARA;AASA,MAAA,OAAA,EAAA,CATA;AAUA,MAAA,MAAA,EAAA,CAVA;AAWA,MAAA,IAAA,EAAA,EAXA;AAYA,MAAA,UAAA,EAAA,EAZA;AAaA,MAAA,QAAA,EAAA,CACA;AACA,QAAA,EAAA,EAAA,kBADA;AAEA,QAAA,IAAA,EAAA,KAAA,EAAA,CAAA,eAAA;AAFA,OADA,EAKA;AACA,QAAA,EAAA,EAAA,oBADA;AAEA,QAAA,IAAA,EAAA,KAAA,EAAA,CAAA,kBAAA;AAFA,OALA,EASA;AACA,QAAA,EAAA,EAAA,gCADA;AAEA,QAAA,IAAA,EAAA,KAAA,EAAA,CAAA,eAAA;AAFA,OATA,CAbA;AA2BA,MAAA,SAAA,EAAA,EA3BA;AA4BA,MAAA,QAAA,EAAA,CACA;AACA,QAAA,EAAA,EAAA,QADA;AAEA,QAAA,IAAA,EAAA,KAAA,EAAA,CAAA,iBAAA;AAFA,OADA,EAKA;AACA,QAAA,EAAA,EAAA,UADA;AAEA,QAAA,IAAA,EAAA,KAAA,EAAA,CAAA,mBAAA;AAFA,OALA,CA5BA;AAsCA,MAAA,SAAA,EAAA,EAtCA;AAuCA,MAAA,UAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,IAAA,EAAA,KAHA;AAIA,QAAA,UAAA,EAAA;AAJA;AAvCA,KAAA;AA8CA,GApDA;AAqDA,EAAA,OArDA,qBAqDA;AAAA;;AACA,SAAA,OAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,MAAA;AACA,QAAA,GAAA,GAAA,qBAAA;AACA,IAAA,UAAA,CAAA,IAAA,CAAA,GAAA,EAAA;AAAA,MAAA,MAAA,EAAA,KAAA;AAAA,KAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,UAAA,GAAA,IAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,IAAA,CAAA,SAAA,GAAA,GAAA,GAAA,IAAA,CAAA,QAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,SAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,IAAA,CAAA,QAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,SAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,MAAA,KAAA,CAAA,GAAA,QAAA,GAAA,UAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA;;AAEA,UAAA,KAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,OAFA,MAEA,IAAA,KAAA,CAAA,IAAA,KAAA,SAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,CAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AACA,OAhBA,CAkBA;;;AACA,UAAA,CAAA,GAAA,KAAA,CAAA,QAAA,CAAA,MAAA,CAAA,UAAA,GAAA;AAAA,eAAA,GAAA,CAAA,EAAA,KAAA,IAAA,CAAA,IAAA;AAAA,OAAA,CAAA;;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA;;AACA,UAAA,CAAA,GAAA,KAAA,CAAA,QAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,EAAA,KAAA,IAAA;AAAA,OAAA,CAAA;;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA;AACA,KAvBA;AAwBA,GAhFA;AAiFA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,IAAA,GAAA,oBAAA;AACA,UAAA,QAAA;;AACA,UAAA,KAAA,SAAA,KAAA,kBAAA,EAAA;AACA,QAAA,QAAA,GAAA,MAAA;AACA,OAFA,MAEA,IAAA,KAAA,SAAA,KAAA,oBAAA,EAAA;AACA,QAAA,QAAA,GAAA,SAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA,GAAA,MAAA;AACA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,MAAA,EAAA,KAAA,EADA;AAEA,QAAA,IAAA,EAAA,QAFA;AAGA,QAAA,MAAA,EAAA,KAAA,SAAA,KAAA,QAAA,GAAA,CAAA,GAAA;AAHA,OAAA;AAKA,MAAA,UAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,cAAA,QAAA,GAAA;AACA,YAAA,KAAA,EAAA,MAAA,CAAA,EAAA,CAAA,0BAAA,CADA;AAEA,YAAA,IAAA,EAAA,IAFA;AAGA,YAAA,OAAA,EAAA,MAAA,CAAA,EAAA,CAAA,sBAAA,CAHA;AAIA,YAAA,UAAA,EAAA;AACA,cAAA,QAAA,EAAA,EADA;AAEA,cAAA,SAAA,EAAA,MAAA,CAAA,EAAA,CAAA,eAAA,CAFA;AAGA,cAAA,MAAA,EAAA;AAHA;AAJA,WAAA;;AAUA,UAAA,MAAA,CAAA,WAAA,CAAA,QAAA;AACA;AACA,OAdA,EAcA,KAdA,CAcA,UAAA,GAAA,EAAA;AACA,YAAA,QAAA,GAAA;AACA,UAAA,KAAA,EAAA,MAAA,CAAA,EAAA,CAAA,0BAAA,CADA;AAEA,UAAA,IAAA,EAAA,IAFA;AAGA,UAAA,OAAA,EAAA,MAAA,CAAA,EAAA,CAAA,mBAAA,CAHA;AAIA,UAAA,UAAA,EAAA;AACA,YAAA,QAAA,EAAA,EADA;AAEA,YAAA,SAAA,EAAA,MAAA,CAAA,EAAA,CAAA,eAAA,CAFA;AAGA,YAAA,MAAA,EAAA;AAHA;AAJA,SAAA;;AAUA,QAAA,MAAA,CAAA,WAAA,CAAA,QAAA;AACA,OA1BA;AA2BA,KA3CA;AA4CA,IAAA,QA5CA,sBA4CA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,0BAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,KA9CA;AA+CA,IAAA,WA/CA,uBA+CA,IA/CA,EA+CA;AACA,WAAA,UAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA;AACA,WAAA,UAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA,WAAA,UAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA;AACA,WAAA,UAAA,CAAA,UAAA,GAAA,IAAA,CAAA,UAAA;AACA;AApDA;AAjFA,CAAA","sourcesContent":["<template>\n    <div class=\"animated fadeIn\">\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <div class=\"card custom-header\">\n                    <div class=\"card-header\">\n                        <strong id=\"header-title\">{{ $t('m.common.edit') }}: {{userName}}</strong>\n                    </div>\n\n                    <div class=\"card-body\">\n                        <div class=\"spec-tip\">\n                            <p class=\"margin0 red\">{{ $t('m.admin.user_manager_1') }}</p>\n                            <p class=\"margin0 red\">{{ $t('m.admin.user_manager_2') }}</p>\n                            <p class=\"red\">{{ $t('m.admin.user_manager_3') }}</p>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-sm-12 col-md-6 col-lg-6\">\n                                <b-form-group :label=\"$t('m.common.first_name')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"firstName\"></b-input>\n                                </b-form-group>\n                            </div>\n                            <div class=\"col-sm-12 col-md-6 col-lg-6\">\n                                <b-form-group :label=\"$t('m.common.last_name')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"lastName\"></b-input>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                            <div class=\"col-12\">\n                                <b-form-group :label=\"$t('m.common.user_email')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"userEmail\"></b-input>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                            <div class=\"col-12\">\n                                <b-form-group :label=\"$t('m.common.contact_phone')\" label-align-sm=\"top\" class=\"mb-0\">\n                                    <b-input disabled :value=\"phone\"></b-input>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                            <div class=\"col-sm-12 col-md-6 col-lg-6 option-choose\">\n                                <b-form-group :label=\"$t('m.common.role')\" label-align-sm=\"top\">\n                                    <select class=\"form-control\" name=\"\"  v-model=\"selected1\">\n                                        <option v-for=\"(item, index) in options1\" :key=\"index\" :value=\"item.id\">{{item.name}}</option>\n                                    </select>\n                                </b-form-group>\n                            </div>\n\n                            <div class=\"col-sm-12 col-md-6 col-lg-6 option-choose\">\n                                <b-form-group :label=\"$t('m.admin.detail_status')\" label-align-sm=\"top\">\n                                    <select class=\"form-control\" name=\"\"  v-model=\"selected2\" :disabled=\" activeStatus \">\n                                        <option v-for=\"(item, index) in options2\" :key=\"index\" :value=\"item.id\">{{item.name}}</option>\n                                    </select>\n                                </b-form-group>\n                            </div>\n                        </div>\n\n                        <div class=\"text-center\">\n                            <b-button class=\"btn-sm\" variant=\"primary\" @click=\"saveData\">{{ $t('m.admin.save') }}</b-button>\n                        </div>\n\n                        <Alert @closeRemindBox='closeBox' :buttonText=\"showAlerts.buttonText\" :show=\"showAlerts.show\"\n                               :title=\"showAlerts.title\" :content=\"showAlerts.content\">\n                        </Alert>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n    .card-body {\n        .red {\n            color: #f86c6b;\n        }\n        .margin0 {\n            margin-bottom: 0px;\n        }\n        .row {\n            margin-bottom: 20px;\n        }\n\n        .custom-select:disabled {\n            color: #73818f;\n            background-color: unset;\n        }\n\n    }\n</style>\n\n<script>\n    import httpClient from '@/utils/httpclient';\n    import Alert from '@components/model'\n\n    export default {\n        name: 'adminEdit',\n        components: {\n            Alert\n        },\n        data() {\n            return {\n                id: this.$route.params.id,\n                activeStatus:'',\n                accountRole:'',\n                userName: '',\n                firstName: '',\n                lastName: '',\n                userEmail: '',\n                phone: '',\n                adminId: 0,\n                status: 1,\n                role: '',\n                detailRole:'',\n                options1: [\n                    {\n                        id: \"Dealership Staff\",\n                        name: this.$t('m.common.user')\n                    },\n                    {\n                        id: \"Dealership Manager\",\n                        name: this.$t('m.common.manager')\n                    },\n                    {\n                        id: \"Dealership Group Administrator\",\n                        name: this.$t('m.common.root')\n                    }\n                ],\n                selected1: '',\n                options2: [\n                    {\n                        id: \"Active\",\n                        name: this.$t('m.common.active')\n                    },\n                    {\n                        id: \"InActive\",\n                        name: this.$t('m.common.inactive')\n                    }\n                ],\n                selected2: '',\n                showAlerts: {\n                    title: '',\n                    content: '',\n                    show: false,\n                    buttonText: ''\n                }\n            }\n        },\n        mounted() {\n            this.adminId = this.$store.state.userInfo.userId;\n            let url = '/api/v1/getUserById';\n            httpClient.post(url, {userId: this.id}).then((res) => {\n                let data = res.data.data;\n                this.detailRole = data.role;\n                this.userName = data.firstName + ' ' + data.lastName;\n                this.firstName = data.firstName;\n                this.lastName = data.lastName;\n                this.userEmail = data.userEmail;\n                this.phone = data.phone;\n                let temp = data.status === 1 ? 'Active' : 'InActive';\n                this.status = temp;\n                this.role = localStorage.getItem('role');\n\n                if(this.role === 'root'){\n                    this.activeStatus = false\n                }else if(this.role === 'manager'){\n                    this.activeStatus = !this.detailRole.includes('Staff')\n                }\n\n                //初始化role 和 status的下拉选择\n                let i = this.options1.filter((val) => val.id === data.role);\n                this.selected1 = i[0].id;\n                let j = this.options2.filter((item) => item.id === temp);\n                this.selected2 = j[0].id;\n            });\n        },\n        methods: {\n            saveData() {\n                let link = '/api/v1/updateUser';\n                let userRole;\n                if (this.selected1 === 'Dealership Staff') {\n                    userRole = 'user'\n                } else if (this.selected1 === 'Dealership Manager') {\n                    userRole = 'manager'\n                } else {\n                    userRole = 'root'\n                }\n                let data = {\n                    userId: this.id,\n                    role: userRole,\n                    status: this.selected2 === 'Active' ? 1 : 0\n                };\n                httpClient.post(link, data).then((res) => {\n                    if (res.data.code === 200) {\n                        let passData = {\n                            title: this.$t('m.vehicle.actions_remind'),\n                            show: true,\n                            content: this.$t('m.admin.save_success'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: this.$t('m.tip.confirm'),\n                                userId: ''\n                            }\n                        };\n                        this.closeRemind(passData);\n                    }\n                }).catch(res => {\n                    let passData = {\n                        title: this.$t('m.vehicle.actions_remind'),\n                        show: true,\n                        content: this.$t('m.cloud.no_access'),\n                        buttonText: {\n                            btnFirst: '',\n                            btnSecond: this.$t('m.tip.confirm'),\n                            userId: ''\n                        }\n                    };\n                    this.closeRemind(passData);\n                })\n            },\n            closeBox() {\n                this.$router.push('/manager-user/detail/' + this.$route.params.id)\n            },\n            closeRemind(data) {\n                this.showAlerts.show = data.show;\n                this.showAlerts.title = data.title;\n                this.showAlerts.content = data.content;\n                this.showAlerts.buttonText = data.buttonText;\n            },\n        }\n    }\n</script>\n"],"sourceRoot":"src/views/dashboard/dashboardMain"}]}