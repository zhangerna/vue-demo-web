{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js!/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/alerts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/alerts.vue","mtime":1569468266000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpclient from '@/utils/httpclient';\nimport { getDateString } from \"../../../utils/date\";\nexport default {\n  name: \"alerts\",\n  data: function data() {\n    return {\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      show: false,\n      tableFields: {\n        alertType: {\n          label: this.$t('m.alert.type'),\n          class: \"text-center\"\n        },\n        vehicle: {\n          label: this.$t('m.common.vehicle'),\n          class: \"text-center\"\n        },\n        stockNo: {\n          label: this.$t('m.common.stock_num2'),\n          class: \"text-center\"\n        },\n        time: {\n          label: this.$t('m.common.time'),\n          class: \"text-center\"\n        },\n        status: {\n          label: this.$t('m.common.status'),\n          class: \"text-center\"\n        },\n        action: {\n          label: this.$t('m.common.action'),\n          class: \"text-center\"\n        }\n      },\n      data: null,\n      table: null,\n      pageCount: 0,\n      updateInfo: ''\n    };\n  },\n  mounted: function mounted() {\n    this.axiosData(this.currentPage);\n  },\n  methods: {\n    axiosData: function axiosData(pageNo) {\n      var _this = this;\n\n      httpclient.post(\"/api/v1/alert/list?pageNo=\".concat(pageNo, \"&pageSize=10\")).then(function (response) {\n        _this.total = response.data.data.rowCount;\n        _this.data = response.data.data;\n        _this.pageCount = response.data.data.totalPages;\n\n        _this.filterData();\n      });\n    },\n    filterData: function filterData() {\n      var _this2 = this;\n\n      this.table = this.data.datas.map(function (item) {\n        var year = item.year ? item.year : 'N/A';\n        var make = item.make ? item.make : 'N/A';\n        var model = item.model ? item.model : 'N/A';\n        console.log(item);\n        var alertTypeText = null;\n\n        if (item.alertType === 1) {\n          alertTypeText = _this2.$t('m.alert.alert_type_1');\n        } else if (item.alertType === 2) {\n          alertTypeText = _this2.$t('m.alert.alert_type_2');\n        } else if (item.alertType === 3) {\n          alertTypeText = _this2.$t('m.alert.alert_type_3');\n        } else if (item.alertType === 4) {\n          alertTypeText = _this2.$t('m.alert.alert_type_4');\n        } else if (item.alertType === 5) {\n          alertTypeText = _this2.$t('m.alert.alert_type_5');\n        }\n\n        return {\n          \"alertType\": alertTypeText,\n          \"vehicle\": \"\".concat(year, \" \").concat(make, \" \").concat(model),\n          \"stockNo\": item.stockNum ? item.stockNum : 'N/A',\n          \"time\": item.createTime ? getDateString(item.createTime) : 'N/A',\n          \"status\": item.alertStatus,\n          'id': item.id,\n          \"alertAction\": item.alertMarkAction\n        };\n      });\n    },\n    changeFL: function changeFL(type) {\n      this.axiosData(type == 'f' ? 1 : this.pageCount);\n    },\n    prevPage: function prevPage() {\n      this.axiosData(this.currentPage > 1 ? this.currentPage - 1 : 1);\n    },\n    nextPage: function nextPage() {\n      this.axiosData(this.currentPage >= this.pageCount ? this.currentPage : this.currentPage + 1);\n    },\n    changePage: function changePage(page) {\n      this.axiosData(page);\n    },\n    reload: function reload() {\n      window.location.reload();\n    },\n    updateVehicle: function updateVehicle(id) {\n      var self = this;\n      httpclient.post('/api/v1/alert/update/status', {\n        alertId: id\n      }).then(function (response) {\n        if (response.data.code == 200) {\n          self.updateInfo = self.$t('m.tip.update_succ');\n          self.show = true;\n        } else {\n          self.updateInfo = self.$t('m.tip.update_failed');\n          self.show = true;\n        }\n      }).catch(function (error) {});\n    }\n  }\n};",null]}