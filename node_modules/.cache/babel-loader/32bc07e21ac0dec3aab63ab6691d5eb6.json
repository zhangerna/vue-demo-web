{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/vehicleEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/vehicleEdit.vue","mtime":1574414921000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getDateString, getYMDString } from '@/utils/date';\nimport httpClient from '@/utils/httpclient';\nimport myMap from '@components/map';\nimport Alert from '@components/model';\nexport default {\n  name: 'edit',\n  components: {\n    myMap: myMap,\n    Alert: Alert\n  },\n  data: function data() {\n    return {\n      id: this.$router.currentRoute.params.id,\n      showMap: false,\n      image: '',\n      year: '',\n      lot: '',\n      vin: '',\n      priceUnit: '',\n      iMei: '',\n      price: '',\n      make: '',\n      alias: '',\n      color: '',\n      Odometer: '',\n      modal: '',\n      trim: '',\n      isOnline: '',\n      lastUpdateTime: '',\n      lastLocation: '',\n      engineType: '',\n      stockNumber: '',\n      plateNumber: '',\n      inventoryDate: '',\n      condition: '',\n      inventoryTime: '',\n      currentMileage: '',\n      selectedOption: '',\n      selectedCondition: '',\n      file: \"\",\n      boxOne: '',\n      curOperation: \"\",\n      lastLocationLat: '',\n      showAlerts: {\n        title: '',\n        show: false,\n        content: '',\n        buttonText: ''\n      },\n      conditionList: [{\n        c: this.$t('m.common.c_new'),\n        y: \"1\"\n      }, {\n        c: this.$t('m.common.c_used'),\n        y: \"3\"\n      }, {\n        c: this.$t('m.common.c_demo'),\n        y: \"2\"\n      }, {\n        c: this.$t('m.common.c_test'),\n        y: \"4\"\n      }],\n      map: {},\n      changedLanguage: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    //初始化各项数据\n    if (this.$i18n.locale === 'en-US') {\n      this.changedLanguage = \"English\";\n    } else {\n      this.changedLanguage = 'Chinese';\n    }\n\n    var that = this;\n    var url = '/api/v1/vehicle/detail/id?vehicleId=' + that.id;\n    httpClient.get(url).then(function (res) {\n      var myData = res.data.data;\n      that.image = myData.photoPath;\n      that.year = myData.year;\n      that.vin = myData.vin;\n      that.inventoryTime = myData.inventoryTime;\n      var _mileage = null; //距离单位转换\n\n      if (myData.currentMileage) {\n        if (that.changedLanguage === 'English') {\n          _mileage = (myData.currentMileage * 0.0006214).toFixed(0);\n        } else {\n          _mileage = (myData.currentMileage / 1000).toFixed(0);\n        }\n      } else {\n        _mileage = 'N/A';\n      }\n\n      that.currentMileage = _mileage;\n      that.lot = myData.parkingLot;\n      that.iMei = myData.deviceMac;\n      that.price = myData.price;\n      that.priceUnit = that.$t('m.common.moneyType');\n      that.color = myData.color;\n      that.Odometer = _mileage;\n      that.make = myData.make;\n      that.alias = myData.alias;\n      that.lastLocationLat = myData.lastLocationLat;\n      that.modal = myData.model;\n      that.trim = myData.trim;\n      that.engineType = myData.engineType;\n      that.condition = myData.vehicleType;\n      that.stockNumber = myData.stockNumber;\n      that.plateNumber = myData.plate;\n      that.selectedOption = myData.color;\n      that.selectedCondition = myData.vehicleTypeCode;\n      that.lastLocation = myData.lastLocation;\n      that.isOnline = myData.isOnline == 1 ? _this.$t('m.common.online') : myData.isOnline == 3 ? 'N/A' : _this.$t('m.common.offline');\n      myData.lastUpdateTime !== null ? that.lastUpdateTime = getDateString(myData.lastUpdateTime) : that.lastUpdateTime = 'N/A';\n      myData.inventoryTime !== null ? that.inventoryDate = getYMDString(myData.inventoryTime) : '';\n      that.map = {\n        lat: myData.lastLocationLat === null ? 0 : myData.lastLocationLat,\n        lng: myData.lastLocationLng === null ? 0 : myData.lastLocationLng,\n        area: myData.areaCoordinates === null ? [] : myData.areaCoordinates,\n        vehicleInfo: 'info'\n      };\n    });\n  },\n  methods: {\n    format_number: function format_number(nStr) {\n      nStr += '';\n      var x = nStr.split('.');\n      var x1 = x[0];\n      var x2 = x.length > 1 ? '.' + x[1] : '';\n      var rgx = /(\\d+)(\\d{3})/;\n\n      while (rgx.test(x1)) {\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\n      }\n\n      return x1 + x2;\n    },\n    showMapTip: function showMapTip() {\n      if (this.map.lat || this.map.area.length > 0) {\n        this.showMap = true;\n      }\n    },\n    getFile: function getFile(event) {\n      //图片上传\n      this.file = event.target.files[0];\n      var formData = new FormData();\n      formData.append(\"file\", this.file); //‘file’是後台接收文件名\n\n      var config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      };\n      var self = this;\n      httpClient.post(\"/api/v1/uploadFile\", formData, config).then(function (res) {\n        if (res.data.code === 200) {\n          var passData = {\n            title: self.$t('m.tip.info'),\n            show: true,\n            content: self.$t('m.tip.upload'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: self.$t('m.tip.b_ok')\n            }\n          };\n          self.closeRemind(passData);\n        }\n\n        self.image = res.data.data.path;\n      }).catch(function (err) {\n        if (err) {\n          var passData = {\n            title: self.$t('m.tip.info'),\n            show: true,\n            content: self.$t('m.tip.upload_failed'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: self.$t('m.tip.b_ok')\n            }\n          };\n          self.closeRemind(passData);\n        }\n      });\n    },\n    saveData: function saveData() {\n      //设备参数更新，保存\n      this.curOperation = 'update';\n\n      function convertDateToTime(strtime) {\n        var date = new Date(strtime);\n        return date.getTime();\n      }\n\n      function isInteger(obj) {\n        return typeof obj === 'number' && obj % 1 === 0;\n      }\n\n      var _time = convertDateToTime(this.inventoryDate);\n\n      var dataTime;\n\n      if (_time && isInteger(_time)) {\n        dataTime = _time;\n      }\n\n      var _mileage = null;\n\n      if (this.Odometer) {\n        if (this.changedLanguage === 'English') {\n          _mileage = (this.Odometer / 0.0006214).toFixed(0);\n        } else {\n          _mileage = (this.Odometer * 1000).toFixed(0);\n        }\n      } else {\n        _mileage = 0;\n      }\n\n      var _data = {\n        color: this.selectedOption,\n        currentMileage: _mileage,\n        engineType: this.engineType,\n        id: this.$router.currentRoute.params.id,\n        inventoryTime: dataTime,\n        make: this.make,\n        model: this.modal,\n        alias: this.alias,\n        photoPath: this.image,\n        plat: this.plateNumber,\n        price: this.price,\n        stockNumber: this.stockNumber,\n        trim: this.trim,\n        vehicleTypeCode: this.selectedCondition,\n        year: this.year\n      };\n      var link = \"/api/v1/vehicle/update\";\n      var self = this;\n      httpClient.post(link, _data).then(function (res) {\n        if (res.data.data && res.data.data.result) {\n          var passData = {\n            title: self.$t('m.tip.info'),\n            show: true,\n            content: self.$t('m.tip.vehicle_upsucc'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: self.$t('m.tip.b_ok'),\n              origin: 'save'\n            }\n          };\n          self.closeRemind(passData);\n        }\n      }).catch(function (err) {\n        if (err) {\n          var passData = {\n            title: self.$t('m.tip.info'),\n            show: true,\n            content: self.$t('m.tip.vehicle_upfail'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: self.$t('m.tip.b_ok'),\n              origin: 'save'\n            }\n          };\n          self.closeRemind(passData);\n        }\n      });\n    },\n    unPairdevice: function unPairdevice() {\n      //设备解绑，未绑定的设备，按钮不显示\n      this.curOperation = '';\n      var link = '/api/v1/vehicle/unbind/device';\n      var self = this;\n      var data = {\n        deviceMac: this.iMei,\n        vin: this.vin\n      };\n      httpClient.post(link, data).then(function (res) {\n        if (res.data.code === 200) {\n          var passData = {\n            title: self.$t('m.tip.info'),\n            show: true,\n            content: self.$t('m.tip.vehicle_unpair_success'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: self.$t('m.tip.b_ok')\n            }\n          };\n          self.closeRemind(passData);\n        }\n      }).catch(function (err) {\n        if (err) {\n          var passData = {\n            title: self.$t('m.tip.info'),\n            show: true,\n            content: self.$t('m.tip.vehicle_unpair_failed'),\n            buttonText: {\n              btnFirst: '',\n              btnSecond: self.$t('m.tip.b_ok')\n            }\n          };\n          self.closeRemind(passData);\n        }\n      });\n    },\n    closeRemind: function closeRemind(data) {\n      this.showAlerts.show = data.show;\n      this.showAlerts.title = data.title;\n      this.showAlerts.content = data.content;\n      this.showAlerts.buttonText = data.buttonText;\n    },\n    closeBox: function closeBox(type) {\n      //子组件来请求父组件关闭弹窗\n      if (type && this.curOperation == 'update') {\n        this.$router.push('/inventory/vehicle/list');\n      } else {\n        this.showAlerts.show = false;\n      }\n    }\n  }\n};",{"version":3,"sources":["vehicleEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn car-edit\">\n        <b-container class=\"bv-example-row\">\n            <h6>{{ $t('m.vehicle_edit.title') }}</h6>\n            <b-row>\n                <b-col class=\"col-4 edit-top\">\n                    <div class=\"text-center\" style=\"height: 20vh;line-height: 20vh;\">\n                        <img :src=\"image\" alt=\"\" height=\"100%\">\n                    </div>\n                </b-col>\n                <b-col class=\"col-8 edit-top\">\n                    <div class=\"justify-content-between specific-data\">\n                            <Alert @closeRemindBox='closeBox' :buttonText=\"showAlerts.buttonText\"\n                                   :show=\"showAlerts.show\" :title=\"showAlerts.title\"\n                                   :content=\"showAlerts.content\">\n                            </Alert>\n                        <div class=\"d-flex justify-content-between\"><span>{{ $t('m.common.last_location') }}</span><span class=\"text-center\">{{lastLocation ? lastLocation : 'N/A'}}</span><span\n                                class=\"text-right google-maps\" @click=\"showMapTip\"><i\n                                class=\"cui cui-location-pin\"></i></span></div>\n                        <div class=\"d-flex justify-content-between\"><span>{{ $t('m.common.last_update') }}</span><span class=\"text-right\">{{lastUpdateTime}}</span>\n                        </div>\n                        <div class=\"d-flex justify-content-between\"><span>Lot{{ $t('m.common.lot') }}</span><span\n                                class=\"text-right\">{{lot}}</span></div>\n                        <div class=\"d-flex justify-content-between online-box\"><span>{{ $t('m.common.line_status') }}</span><span :class=\"isOnline === 'Online' ? ' online-success':'online'\">{{isOnline}}</span>\n                        </div>\n                    </div>\n                </b-col>\n                <b-col class=\"col-6\">\n                    <label for=\"imei\">{{ $t('m.common.imei') }}</label>\n                    <b-form-input id=\"imei\" disabled=\"disabled\" v-model=\"iMei\"></b-form-input>\n                </b-col>\n                <b-col class=\"col-6\">\n                    <label for=\"imei\">{{ $t('m.common.vin') }}</label>\n                    <b-form-input id=\"vin\" v-model=\"vin\" disabled=\"disabled\"></b-form-input>\n                </b-col>\n            </b-row>\n\n            <form class=\"form-horizontal needs-validation\" method=\"post\" novalidate=\"\" id=\"vehicleForm\">\n                <div class=\"row justify-content-center\">\n                    <input class=\"form-control\" name=\"id\" id=\"vehicleId\" type=\"hidden\" value=\"\">\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.year') }}</label>\n                            <input class=\"form-control\" name=\"year\" id=\"vehicleyear\" type=\"text\" v-model=\"year\">\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.make') }}</label>\n                            <input class=\"form-control\" name=\"make\" id=\"vehiclemake\" type=\"text\" v-model=\"make\">\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.model') }}</label>\n                            <input class=\"form-control\" name=\"model\" id=\"vehiclemodel\" type=\"text\" v-model=\"modal\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group required\">\n                            <label>{{ $t('m.common.alias') }}</label>\n                            <input class=\"form-control\" name=\"alias\" id=\"vehiclealias\" type=\"text\" v-model=\"alias\">\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group required\">\n                            <label>{{ $t('m.common.trim') }}</label>\n                            <input class=\"form-control\" name=\"trim\" id=\"vehicletrim\" type=\"text\" v-model=\"trim\">\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.engine') }}</label>\n                            <input class=\"form-control\" name=\"engineType\" id=\"vehicleengine\" type=\"text\"\n                                   v-model=\"engineType\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.color') }}</label>\n                            <input class=\"form-control\" type=\"text\" v-model=\"selectedOption\">\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group price-dorlar\">\n                            <label>{{ $t('m.common.price') }}</label><br>\n                            <b-input-group>\n                                <b-input-group-prepend>\n                                    <b-input-group-text>{{priceUnit}}</b-input-group-text>\n                                </b-input-group-prepend>\n                                <b-form-input id=\"elementsEmail\" type=\"number\" v-model=\"price\"></b-form-input>\n                            </b-input-group>\n                        </div>\n\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.stock_num') }}</label>\n                            <input class=\"form-control\" name=\"stockNumber\" id=\"vehiclestock\" type=\"text\"\n                                   v-model=\"stockNumber\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.inv_date') }}</label>\n                            <input class=\"form-control\" name=\"\" id=\"vehicleinventory\" type=\"date\"\n                                   v-model=\"inventoryDate\">\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.condition') }}</label>\n                            <select class=\"form-control\" name=\"\" id=\"vehicletype\" v-model=\"selectedCondition\">\n                                <option v-for=\"(item, index) in conditionList\" :key=\"index\" :value=\"item.y\">{{item.c}}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.odometer') }}</label>\n                            <input class=\"form-control\" name=\"currentMileage\" id=\"vehiclemileage\" type=\"text\"\n                                   v-model=\"Odometer\">\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"row\">\n                    <div class=\"col-sm-6 col-lg-4\">\n                        <div class=\"form-group\">\n                            <label>{{ $t('m.common.plate_num') }}</label>\n                            <input class=\"form-control\" name=\"plat\" id=\"vehicleplat\" type=\"text\" v-model=\"plateNumber\">\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-sm-12 col-lg-4\">\n                        <input type=\"file\" @change=\"getFile($event)\">\n                    </div>\n                </div>\n                <div class=\"row justify-content-center\">\n                    <div class=\"col-6 text-center\">\n                        <button class=\"btn btn-sm btn-info text-white mx-3 px-3\" type=\"button\" @click=\"saveData\">\n                            {{ $t('m.common.b_save') }}\n                        </button>\n                        <button class=\"btn btn-sm btn-danger mx-3\" type=\"button\" v-if=\"iMei && vin\" id=\"unpairbtn\"\n                                @click=\"unPairdevice\">{{ $t('m.common.b_unpair') }}\n                        </button>\n                    </div>\n                </div>\n            </form>\n            <b-modal class=\"show-map\" id=\"modal-1\" title=\"Google Map\" v-model=\"showMap\" @ok=\"showMap = false\">\n                <myMap :map=\"map\"></myMap>\n            </b-modal>\n        </b-container>\n    </div>\n\n</template>\n<script>\n    import {getDateString, getYMDString} from '@/utils/date';\n    import httpClient from '@/utils/httpclient';\n    import myMap from '@components/map'\n    import Alert from '@components/model'\n\n    export default {\n        name: 'edit',\n        components: {\n            myMap, Alert\n        },\n        data() {\n            return {\n                id: this.$router.currentRoute.params.id,\n                showMap: false,\n                image: '',\n                year: '',\n                lot: '',\n                vin: '',\n                priceUnit: '',\n                iMei: '',\n                price: '',\n                make: '',\n                alias:'',\n                color: '',\n                Odometer: '',\n                modal: '',\n                trim: '',\n                isOnline: '',\n                lastUpdateTime: '',\n                lastLocation: '',\n                engineType: '',\n                stockNumber: '',\n                plateNumber: '',\n                inventoryDate: '',\n                condition: '',\n                inventoryTime: '',\n                currentMileage: '',\n                selectedOption: '',\n                selectedCondition: '',\n                file: \"\",\n                boxOne: '',\n                curOperation: \"\",\n                lastLocationLat: '',\n                showAlerts: {\n                    title: '',\n                    show: false,\n                    content: '',\n                    buttonText: ''\n                },\n                conditionList: [{c: this.$t('m.common.c_new'), y: \"1\"}, { c: this.$t('m.common.c_used'), y: \"3\"}, { c: this.$t('m.common.c_demo'), y: \"2\" }, {c: this.$t('m.common.c_test'), y: \"4\"}],\n                map: {},\n                changedLanguage:false\n            }\n        },\n\n        mounted() {//初始化各项数据\n            if (this.$i18n.locale === 'en-US') {\n                this.changedLanguage = \"English\";\n            } else {\n                this.changedLanguage = 'Chinese';\n            }\n\n            let that = this;\n            let url = '/api/v1/vehicle/detail/id?vehicleId=' + that.id;\n            httpClient.get(url).then((res) => {\n                let myData = res.data.data;\n                that.image = myData.photoPath\n                that.year = myData.year;\n                that.vin = myData.vin;\n                that.inventoryTime = myData.inventoryTime;\n\n                let _mileage = null;//距离单位转换\n                if(myData.currentMileage){\n                    if(that.changedLanguage === 'English'){\n                        _mileage = ((myData.currentMileage * 0.0006214).toFixed(0))\n                    }else{\n                        _mileage = ((myData.currentMileage / 1000).toFixed(0))\n                    }\n                }else{\n                    _mileage = 'N/A'\n                }\n\n                that.currentMileage = _mileage;\n                that.lot = myData.parkingLot;\n                that.iMei = myData.deviceMac;\n                that.price = myData.price;\n                that.priceUnit = that.$t('m.common.moneyType');\n                that.color = myData.color;\n                that.Odometer = _mileage;\n                that.make = myData.make;\n                that.alias = myData.alias;\n                that.lastLocationLat = myData.lastLocationLat;\n                that.modal = myData.model;\n                that.trim = myData.trim;\n                that.engineType = myData.engineType;\n                that.condition = myData.vehicleType;\n                that.stockNumber = myData.stockNumber;\n                that.plateNumber = myData.plate;\n                that.selectedOption = myData.color;\n                that.selectedCondition = myData.vehicleTypeCode;\n                that.lastLocation = myData.lastLocation;\n                that.isOnline = myData.isOnline == 1 ? this.$t('m.common.online') : (myData.isOnline == 3 ? 'N/A' : this.$t('m.common.offline')) ;\n                myData.lastUpdateTime !== null ? that.lastUpdateTime = getDateString(myData.lastUpdateTime) : that.lastUpdateTime = 'N/A';\n                myData.inventoryTime !== null ? that.inventoryDate = getYMDString(myData.inventoryTime) : '';\n                that.map = {\n                    lat: myData.lastLocationLat === null ? 0 : myData.lastLocationLat,\n                    lng: myData.lastLocationLng === null ? 0 : myData.lastLocationLng,\n                    area: myData.areaCoordinates === null ? [] : myData.areaCoordinates,\n                    vehicleInfo: 'info'\n                };\n            });\n        },\n        methods: {\n            format_number(nStr) {\n                nStr += '';\n                let x = nStr.split('.');\n                let x1 = x[0];\n                let x2 = x.length > 1 ? '.' + x[1] : '';\n                var rgx = /(\\d+)(\\d{3})/;\n                while (rgx.test(x1)) {\n                    x1 = x1.replace(rgx, '$1' + ',' + '$2');\n                }\n                return x1 + x2;\n            },\n            showMapTip() {\n                if (this.map.lat || this.map.area.length > 0) {\n                    this.showMap = true;\n                }\n            },\n            getFile(event) {//图片上传\n                this.file = event.target.files[0];\n                let formData = new FormData();\n                formData.append(\"file\", this.file); //‘file’是後台接收文件名\n                let config = {\n                    headers: {\n                        \"Content-Type\": \"multipart/form-data\"\n                    }\n                };\n                let self = this;\n                httpClient.post(\"/api/v1/uploadFile\", formData, config)\n                    .then(function (res) {\n                        if (res.data.code === 200) {\n                            let passData = {\n                                title: self.$t('m.tip.info'),\n                                show: true,\n                                content: self.$t('m.tip.upload'),\n                                buttonText: {\n                                    btnFirst: '',\n                                    btnSecond: self.$t('m.tip.b_ok')\n                                }\n                            };\n                            self.closeRemind(passData);\n                        }\n                        self.image = res.data.data.path;\n                    }).catch(function (err) {\n                    if (err) {\n                        let passData = {\n                            title: self.$t('m.tip.info'),\n                            show: true,\n                            content: self.$t('m.tip.upload_failed'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: self.$t('m.tip.b_ok'),\n                            }\n                        };\n                        self.closeRemind(passData);\n                    }\n                });\n            },\n            saveData() {//设备参数更新，保存\n                this.curOperation = 'update';\n                function convertDateToTime(strtime) {\n                    var date = new Date(strtime);\n                    return date.getTime();\n                }\n\n                function isInteger(obj) {\n                    return typeof obj === 'number' && obj % 1 === 0\n                }\n\n                let _time = convertDateToTime(this.inventoryDate);\n                let dataTime;\n                if (_time && isInteger(_time)) {\n                    dataTime = _time\n                }\n\n\n                let _mileage= null;\n                if(this.Odometer){\n                    if(this.changedLanguage === 'English'){\n                        _mileage = ((this.Odometer / 0.0006214).toFixed(0))\n                    }else{\n                        _mileage = ((this.Odometer * 1000).toFixed(0))\n                    }\n                }else{\n                    _mileage = 0\n                }\n\n                let _data = {\n                    color: this.selectedOption,\n                    currentMileage: _mileage,\n                    engineType: this.engineType,\n                    id: this.$router.currentRoute.params.id,\n                    inventoryTime: dataTime,\n                    make: this.make,\n                    model: this.modal,\n                    alias: this.alias,\n                    photoPath: this.image,\n                    plat: this.plateNumber,\n                    price: this.price,\n                    stockNumber: this.stockNumber,\n                    trim: this.trim,\n                    vehicleTypeCode: this.selectedCondition,\n                    year: this.year,\n                };\n\n                let link = \"/api/v1/vehicle/update\";\n                let self = this;\n                httpClient.post(link, _data).then(function (res) {\n                    if (res.data.data && res.data.data.result) {\n                        let passData = {\n                            title: self.$t('m.tip.info'),\n                            show: true,\n                            content: self.$t('m.tip.vehicle_upsucc'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: self.$t('m.tip.b_ok'),\n                                origin:'save'\n                            },\n                        };\n                        self.closeRemind(passData);\n                    }\n                }).catch(function (err) {\n                    if (err) {\n                        let passData = {\n                            title: self.$t('m.tip.info'),\n                            show: true,\n                            content: self.$t('m.tip.vehicle_upfail'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: self.$t('m.tip.b_ok'),\n                                origin:'save'\n                            }\n                        };\n                        self.closeRemind(passData);\n                    }\n                });\n            },\n            unPairdevice() {//设备解绑，未绑定的设备，按钮不显示\n                this.curOperation = '';\n                let link = '/api/v1/vehicle/unbind/device';\n                let self = this;\n                let data = {\n                    deviceMac: this.iMei,\n                    vin: this.vin\n                };\n                httpClient.post(link, data).then(function (res) {\n                    if (res.data.code === 200) {\n                        let passData = {\n                            title: self.$t('m.tip.info'),\n                            show: true,\n                            content: self.$t('m.tip.vehicle_unpair_success'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: self.$t('m.tip.b_ok')\n                            }\n                        };\n                        self.closeRemind(passData);\n                    }\n                }).catch(function (err) {\n                    if (err) {\n                        let passData = {\n                            title: self.$t('m.tip.info'),\n                            show: true,\n                            content: self.$t('m.tip.vehicle_unpair_failed'),\n                            buttonText: {\n                                btnFirst: '',\n                                btnSecond: self.$t('m.tip.b_ok')\n                            }\n                        };\n                        self.closeRemind(passData);\n                    }\n                });\n            },\n            closeRemind(data) {\n                this.showAlerts.show = data.show;\n                this.showAlerts.title = data.title;\n                this.showAlerts.content = data.content;\n                this.showAlerts.buttonText = data.buttonText;\n            },\n            closeBox(type) {//子组件来请求父组件关闭弹窗\n                if(type && this.curOperation == 'update'){\n                    this.$router.push('/inventory/vehicle/list')\n                } else {\n                    this.showAlerts.show = false;\n                }\n            }\n        }\n    }\n</script>\n<style lang=\"scss\" scoped>\n    .online-box{\n        .online-success{\n            background: #4dbd74;\n            padding: 0 10px;\n            border-radius: 10px;\n            font-weight: bold;\n        }\n    }\n\n    .car-edit{\n        padding-bottom: 20px;\n    }\n    .edit-top{\n        margin-bottom: 20px;\n    }\n    .price-dorlar{\n        .input-group-text{\n            background: #515b65;\n        }\n    }\n    .google-maps {\n        cursor: pointer;\n        color: #63c2de;\n\n        i {\n            font-size: 20px;\n        }\n    }\n\n    .online {\n        background: #f86c6b;\n        padding: 0 10px;\n        border-radius: 10px;\n        font-weight: bold;\n    }\n\n    .specific-data {\n        border: 1px solid #23282c;\n        border-bottom: none;\n\n        div {\n            padding: 10px;\n            border-bottom: 1px solid #23282c;\n        }\n    }\n</style>\n"],"sourceRoot":"src/views/dashboard/dashboardMain"}]}