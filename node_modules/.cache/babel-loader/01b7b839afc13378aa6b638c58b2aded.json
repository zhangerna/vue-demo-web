{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/addVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/addVehicle.vue","mtime":1576031701000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n  name: \"addVehicle\",\n  components: {\n    model: model\n  },\n  data: function data() {\n    return {\n      title: \"\",\n      content: \"\",\n      show: false,\n      showB: true,\n      vin: \"\",\n      vinIsVaild: false,\n      vinSuccess: false,\n      data: {},\n      year: \"\",\n      make: \"\",\n      alias: \"\",\n      trim: \"\",\n      engine: \"\",\n      price: \"\",\n      stock: \"\",\n      condition: \"\",\n      odometer: \"\",\n      model: \"\",\n      color: \"\",\n      date: \"\",\n      plate: \"\",\n      photo: \"\",\n      changedLanguage: null,\n      disabled: false,\n      currentTip: \"\",\n      curVehicleid: \"\",\n      conditionList: [{\n        c: this.$t(\"m.common.c_new\"),\n        y: \"1\"\n      }, {\n        c: this.$t(\"m.common.c_used\"),\n        y: \"3\"\n      }, {\n        c: this.$t(\"m.common.c_demo\"),\n        y: \"2\"\n      }, {\n        c: this.$t(\"m.common.c_test\"),\n        y: \"4\"\n      }],\n      photoUpload: this.$t(\"m.common.upload_img\"),\n      faSpinner: false,\n      circleCheck: false,\n      circleX: false,\n      pText: \"\",\n      showInput: true,\n      vinE: false,\n      yearE: false,\n      makeE: false,\n      modelE: false\n    };\n  },\n  mounted: function mounted() {\n    if (this.$i18n.locale === \"en-US\") {\n      this.changedLanguage = \"English\";\n    } else {\n      this.changedLanguage = \"Chinese\";\n    }\n  },\n  watch: {\n    vin: function vin(curVal) {\n      var _this = this;\n\n      if (curVal.length == 17) {\n        this.disabled = true;\n        httpClient.get(\"/api/v1/vehicle/detail/vin?vin=\" + this.vin).then(function (response) {\n          var _mileage = null; //距离单位转换\n\n          if (response.data.data.odometer) {\n            if (_this.changedLanguage === \"English\") {\n              _mileage = (response.data.data.odometer * 0.0006214).toFixed(0);\n            } else {\n              _mileage = (response.data.data.odometer / 1000).toFixed(0);\n            }\n          } else {\n            _mileage = 0;\n          }\n\n          _this.vinSuccess = true;\n          _this.vinIsVaild = false;\n          _this.showB = false;\n          _this.data = response.data.data;\n          _this.year = _this.data.year;\n          _this.make = _this.data.make;\n          _this.model = _this.data.model;\n          _this.alias = _this.data.alias;\n          _this.trim = _this.data.trim;\n          _this.engine = _this.data.engineType;\n          _this.price = _this.data.price;\n          _this.color = _this.data.color;\n          _this.date = _this.data.inventoryDays;\n          _this.stock = _this.data.stockNumber;\n          _this.condition = _this.data.vehicleTypeCode;\n          _this.odometer = _mileage;\n          _this.plate = _this.data.plate;\n          _this.photo = _this.data.photoPath;\n        }).catch(function () {\n          _this.vinIsVaild = false;\n          _this.vinSuccess = false;\n          _this.showB = false;\n        });\n      } else {\n        this.vinIsVaild = true;\n      }\n    },\n    //  vin () {\n    //     this.checkData()\n    // },\n    year: function year() {\n      this.checkData();\n    },\n    make: function make() {\n      this.checkData();\n    },\n    model: function model() {\n      this.checkData();\n    }\n  },\n  methods: {\n    closeTip: function closeTip() {\n      if (this.currentTip == \"save\") {\n        this.$router.push(\"/inventory/vehicle/detail/\" + this.curVehicleid);\n      }\n\n      this.show = false;\n    },\n    savefile: function savefile(event) {\n      var _this2 = this;\n\n      var file = event.target.files;\n      var fb = new FormData();\n      fb.append(\"image\", file[0]);\n      this.faSpinner = true;\n      this.pText = this.$t(\"m.tip.upload_img\");\n      this.showInput = false;\n      httpClient.post(\"/api/v1/uploadFile\", fb).then(function (response) {\n        if (response.data.code == 200) {\n          _this2.photo = response.data.data.path;\n          _this2.faSpinner = false;\n          _this2.circleCheck = true;\n          _this2.pText = _this2.$t(\"m.tip.upload_success\");\n          _this2.showInput = true;\n          _this2.photoUpload = _this2.$t(\"m.common.re_upload\"); // this.title = this.$t(\"m.tip.suc\");\n          // this.content = this.$t(\"m.tip.upload\");\n          // this.currentTip = \"\";\n          // this.show = true;\n          // this.showB = false;\n        }\n      }).catch(function (error) {\n        error;\n        _this2.faSpinner = false;\n        _this2.circleX = true;\n        _this2.pText = _this2.$t(\"m.tip.upload_fail\");\n        _this2.showInput = true;\n        _this2.photoUpload = _this2.$t(\"m.common.re_upload\");\n      });\n    },\n    checkData: function checkData() {\n      this.vinE = this.vin ? false : true;\n      this.yearE = this.year ? false : true;\n      this.makeE = this.make ? false : true;\n      this.modelE = this.model ? false : true;\n    },\n    saveData: function saveData() {\n      var _this3 = this;\n\n      var _mileage = null; //距离单位转换\n\n      if (this.odometer) {\n        if (this.changedLanguage === \"English\") {\n          _mileage = (this.odometer * 1609.344).toFixed(0);\n        } else {\n          _mileage = (this.odometer * 1000).toFixed(0);\n        }\n      } else {\n        _mileage = 0;\n      }\n\n      this.checkData();\n\n      if (!this.vinE && !this.yearE && !this.makeE && !this.modelE) {\n        httpClient.post(\"/api/v1/vehicle/insert/vehicle\", {\n          vin: this.vin,\n          year: this.year,\n          make: this.make,\n          model: this.model,\n          alias: this.alias,\n          trim: this.trim,\n          engineType: this.engine,\n          color: this.color,\n          price: this.price,\n          stockNumber: this.stock,\n          inventoryDate: new Date(this.date).getTime(),\n          vehicleTypeCode: Number(this.condition),\n          currentMileage: _mileage,\n          plate: this.plate,\n          photoPath: this.photo\n        }).then(function (response) {\n          if (response.data.data.bindResult == true) {\n            _this3.curVehicleid = response.data.data.vehicleId;\n            _this3.title = _this3.$t(\"m.tip.suc\");\n            _this3.content = _this3.$t(\"m.tip.save_succ\");\n            _this3.currentTip = \"save\";\n            _this3.show = true;\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["addVehicle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn add-vehicle\">\n        <b-card>\n            <div slot=\"header\">\n                {{ $t(\"m.add_vehicle.new_add_vehicle\") }}\n            </div>\n            <div class=\"content\">\n                <b-row>\n                    <b-col sm=\"6\" md=\"6\" lg=\"6\" class=\"left\">\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.vin\") }} </label> <span class=\"star-red\">*</span>\n                                    <b-form-input :class=\"vinE ? 'is-exist' : ''\" type=\"text\" :placeholder=\"$t('m.common.enter') + ' ' + $t('m.common.vin')\" v-model=\"vin\" :disabled=\"vinSuccess || disabled\" maxlength=\"17\"></b-form-input>\n                                    <p v-show=\"vinIsVaild\" class=\"warn-vin\">{{ $t(\"m.common.vin3\") + $t(\"m.vehicle_bind.invalid\") }}</p>\n                                    <p v-show=\"vinSuccess\" class=\"primary-vin\">{{ $t(\"m.common.vin3\") + $t(\"m.vehicle_bind.valid\") }}</p>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.year\") }}</label\n                                    ><span class=\"star-red\">*</span>\n                                    <b-form-input :class=\"yearE ? 'is-exist' : ''\" type=\"text\" v-model=\"year\" :placeholder=\"$t('m.common.enter') + $t('m.common.year')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.make\") }}</label\n                                    ><span class=\"star-red\">*</span>\n                                    <b-form-input :class=\"makeE ? 'is-exist' : ''\" type=\"text\" v-model=\"make\" :placeholder=\"$t('m.common.enter') + $t('m.common.make')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.model\") }}</label\n                                    ><span class=\"star-red\">*</span>\n                                    <b-form-input :class=\"modelE ? 'is-exist' : ''\" type=\"text\" v-model=\"model\" :placeholder=\"$t('m.common.model')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.alias\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"alias\" :placeholder=\"$t('m.common.alias')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.trim\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"trim\" :placeholder=\"$t('m.common.enter') + $t('m.common.trim')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.engine\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"engine\" :placeholder=\"$t('m.common.enter') + $t('m.common.engine')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.color\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"color\" :placeholder=\"$t('m.common.enter') + $t('m.common.color')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col sm=\"12\">\n                                <b-form-group class=\"price-dorlar\">\n                                    <label>{{ $t(\"m.common.price\") }}</label>\n                                    <b-input-group>\n                                        <b-input-group-prepend>\n                                            <b-input-group-text style=\"color: #ffffff\">{{ $t(\"m.common.moneyType\") }}</b-input-group-text>\n                                        </b-input-group-prepend>\n                                        <b-form-input v-model=\"price\" type=\"number\" :placeholder=\"$t('m.common.enter') + $t('m.common.price')\"></b-form-input>\n                                    </b-input-group>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col>\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.stock_num\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"stock\" :placeholder=\"$t('m.common.enter') + $t('m.common.stock_num')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col>\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.inv_date\") }}</label>\n                                    <b-form-input type=\"date\" v-model=\"date\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col>\n                                <b-form-group>\n                                    <label>{{ $t(\"m.cloud.vehicle_type\") }}</label>\n                                    <select class=\"form-control\" name=\"\" id=\"vehicletype\" v-model=\"condition\">\n                                        <option v-for=\"(item, index) in conditionList\" :key=\"index\" :value=\"item.y\">{{ item.c }}</option>\n                                    </select>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col>\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.odometer\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"odometer\" :placeholder=\"$t('m.common.enter') + $t('m.common.c_mileage')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                        <b-row>\n                            <b-col>\n                                <b-form-group>\n                                    <label>{{ $t(\"m.common.plate_num\") }}</label>\n                                    <b-form-input type=\"text\" v-model=\"plate\" :placeholder=\"$t('m.common.enter') + $t('m.common.plate_num')\"></b-form-input>\n                                </b-form-group>\n                            </b-col>\n                        </b-row>\n                    </b-col>\n                    <b-col sm=\"6\" class=\"right right-box\">\n                        <div class=\"inner-box\">\n                            <i v-show=\"faSpinner\" class=\"fa fa-spinner fa-lg mt-4 i-white\"></i>\n                            <i v-show=\"circleCheck\" class=\" font-2xl cui-circle-check i-success\"></i>\n                            <i v-show=\"circleX\" class=\" font-2xl cui-circle-x i-danger\"></i>\n                            <img :src=\"photo\" alt height=\"100%\" width=\"100%\" style=\"border:none\" />\n                            <input v-show=\"showInput\" class=\"right-input-one\" type=\"button\" id=\"btn\" :value=\"photoUpload\" />\n                            <p class=\"right-p\" v-text=\"pText\">{{ $t(\"m.tip.uploadText\") }}</p>\n                            <input class=\"right-input-two\" type=\"file\" style=\"opacity: 0;cursor:pointer\" accept=\"image/jpeg,image/png,image/jpg\" id=\"fileinp\" @change=\"savefile($event)\" />\n                        </div>\n                    </b-col>\n                </b-row>\n\n                <div class=\"upload-group text-center\">\n                    <b-button class=\"btn btn-sm btn-info text-white\" @click=\"saveData\">\n                        {{ $t(\"m.common.b_save\") }}\n                    </b-button>\n                </div>\n            </div>\n        </b-card>\n        <model :title=\"title\" :content=\"content\" :show=\"show\" :buttonText=\"{ btnSecond: $t('m.tip.b_ok') }\" @closeRemindBox=\"closeTip()\"> </model>\n    </div>\n</template>\n\n<script>\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n    name: \"addVehicle\",\n    components: {\n        model\n    },\n    data() {\n        return {\n            title: \"\",\n            content: \"\",\n            show: false,\n            showB: true,\n            vin: \"\",\n            vinIsVaild: false,\n            vinSuccess: false,\n            data: {},\n            year: \"\",\n            make: \"\",\n            alias: \"\",\n            trim: \"\",\n            engine: \"\",\n            price: \"\",\n            stock: \"\",\n            condition: \"\",\n            odometer: \"\",\n            model: \"\",\n            color: \"\",\n            date: \"\",\n            plate: \"\",\n            photo: \"\",\n            changedLanguage: null,\n            disabled: false,\n            currentTip: \"\",\n            curVehicleid: \"\",\n            conditionList: [\n                { c: this.$t(\"m.common.c_new\"), y: \"1\" },\n                { c: this.$t(\"m.common.c_used\"), y: \"3\" },\n                { c: this.$t(\"m.common.c_demo\"), y: \"2\" },\n                { c: this.$t(\"m.common.c_test\"), y: \"4\" }\n            ],\n            photoUpload: this.$t(\"m.common.upload_img\"),\n            faSpinner: false,\n            circleCheck: false,\n            circleX: false,\n            pText: \"\",\n            showInput: true,\n            vinE: false,\n            yearE: false,\n            makeE: false,\n            modelE: false\n        };\n    },\n    mounted() {\n        if (this.$i18n.locale === \"en-US\") {\n            this.changedLanguage = \"English\";\n        } else {\n            this.changedLanguage = \"Chinese\";\n        }\n    },\n    watch: {\n        vin(curVal) {\n            if (curVal.length == 17) {\n                this.disabled = true;\n                httpClient\n                    .get(\"/api/v1/vehicle/detail/vin?vin=\" + this.vin)\n                    .then(response => {\n                        let _mileage = null; //距离单位转换\n                        if (response.data.data.odometer) {\n                            if (this.changedLanguage === \"English\") {\n                                _mileage = (response.data.data.odometer * 0.0006214).toFixed(0);\n                            } else {\n                                _mileage = (response.data.data.odometer / 1000).toFixed(0);\n                            }\n                        } else {\n                            _mileage = 0;\n                        }\n                        this.vinSuccess = true;\n                        this.vinIsVaild = false;\n                        this.showB = false;\n                        this.data = response.data.data;\n                        this.year = this.data.year;\n                        this.make = this.data.make;\n                        this.model = this.data.model;\n                        this.alias = this.data.alias;\n                        this.trim = this.data.trim;\n                        this.engine = this.data.engineType;\n                        this.price = this.data.price;\n                        this.color = this.data.color;\n                        this.date = this.data.inventoryDays;\n                        this.stock = this.data.stockNumber;\n                        this.condition = this.data.vehicleTypeCode;\n                        this.odometer = _mileage;\n                        this.plate = this.data.plate;\n                        this.photo = this.data.photoPath;\n                    })\n                    .catch(() => {\n                        this.vinIsVaild = false;\n                        this.vinSuccess = false;\n                        this.showB = false;\n                    });\n            } else {\n                this.vinIsVaild = true;\n            }\n        },\n        //  vin () {\n        //     this.checkData()\n        // },\n        year() {\n            this.checkData();\n        },\n        make() {\n            this.checkData();\n        },\n        model() {\n            this.checkData();\n        }\n    },\n    methods: {\n        closeTip() {\n            if (this.currentTip == \"save\") {\n                this.$router.push(\"/inventory/vehicle/detail/\" + this.curVehicleid);\n            }\n            this.show = false;\n        },\n        savefile(event) {\n            let file = event.target.files;\n            let fb = new FormData();\n            fb.append(\"image\", file[0]);\n            this.faSpinner = true;\n            this.pText = this.$t(\"m.tip.upload_img\");\n            this.showInput = false;\n            httpClient\n                .post(\"/api/v1/uploadFile\", fb)\n                .then(response => {\n                    if (response.data.code == 200) {\n                        this.photo = response.data.data.path;\n                        this.faSpinner = false;\n                        this.circleCheck = true;\n                        this.pText = this.$t(\"m.tip.upload_success\");\n                        this.showInput = true;\n                        this.photoUpload = this.$t(\"m.common.re_upload\");\n\n                        // this.title = this.$t(\"m.tip.suc\");\n                        // this.content = this.$t(\"m.tip.upload\");\n                        // this.currentTip = \"\";\n                        // this.show = true;\n                        // this.showB = false;\n                    }\n                })\n                .catch(error => {\n                    error;\n                    this.faSpinner = false;\n                    this.circleX = true;\n                    this.pText = this.$t(\"m.tip.upload_fail\");\n                    this.showInput = true;\n                    this.photoUpload = this.$t(\"m.common.re_upload\");\n                });\n        },\n        checkData() {\n            this.vinE = this.vin ? false : true;\n            this.yearE = this.year ? false : true;\n            this.makeE = this.make ? false : true;\n            this.modelE = this.model ? false : true;\n        },\n        saveData() {\n            let _mileage = null; //距离单位转换\n            if (this.odometer) {\n                if (this.changedLanguage === \"English\") {\n                    _mileage = (this.odometer * 1609.344).toFixed(0);\n                } else {\n                    _mileage = (this.odometer * 1000).toFixed(0);\n                }\n            } else {\n                _mileage = 0;\n            }\n            this.checkData();\n            if (!this.vinE && !this.yearE && !this.makeE && !this.modelE) {\n                httpClient\n                    .post(\"/api/v1/vehicle/insert/vehicle\", {\n                        vin: this.vin,\n                        year: this.year,\n                        make: this.make,\n                        model: this.model,\n                        alias: this.alias,\n                        trim: this.trim,\n                        engineType: this.engine,\n                        color: this.color,\n                        price: this.price,\n                        stockNumber: this.stock,\n                        inventoryDate: new Date(this.date).getTime(),\n                        vehicleTypeCode: Number(this.condition),\n                        currentMileage: _mileage,\n                        plate: this.plate,\n                        photoPath: this.photo\n                    })\n                    .then(response => {\n                        if (response.data.data.bindResult == true) {\n                            this.curVehicleid = response.data.data.vehicleId;\n                            this.title = this.$t(\"m.tip.suc\");\n                            this.content = this.$t(\"m.tip.save_succ\");\n                            this.currentTip = \"save\";\n                            this.show = true;\n                        }\n                    });\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.add-vehicle {\n    select {\n        height: 35px !important;\n    }\n    .upload-group {\n        width: 30%;\n        margin: 0 auto;\n        button {\n            margin-top: 20px;\n        }\n    }\n    .warn-vin {\n        color: red;\n    }\n    .primary-vin {\n        color: #4dbd74;\n    }\n}\n.price-dorlar {\n    .input-group-text {\n        background: #515b65;\n    }\n}\n.right-box {\n    // margin-left: 50px;\n    padding: 0 15px 0 50px;\n    // height: 500px;\n    // border: 1px solid #e4e7ea;\n    margin-top: 30px;\n    position: relative;\n    .inner-box {\n        border: 1px solid #e4e7ea;\n        height: 500px;\n    position: relative;\n\n        .right-input-one {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            width: 150px;\n        }\n        .right-p {\n            position: absolute;\n            left: 50%;\n            top: 60%;\n            transform: translate(-50%, -60%);\n        }\n        .right-input-two {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            width: 150px;\n        }\n        i {\n            position: absolute;\n            left: 50%;\n            top: 42%;\n            transform: translate(-50%, -50%);\n        }\n        .i-white {\n            color: #b3bfca;\n            top: 38%;\n        }\n        .i-success {\n            color: #4dbd74;\n        }\n        .i-danger {\n            color: #f86c6b;\n        }\n    }\n}\n.star-red {\n    color: #f86c6b;\n}\n.is-exist {\n    border: 1px solid #f86c6b;\n}\n</style>\n"],"sourceRoot":"src/views/dashboard/inventory"}]}