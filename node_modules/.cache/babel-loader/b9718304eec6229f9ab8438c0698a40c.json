{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/profile.vue","mtime":1574414921000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _JSON$stringify from \"/Users/nonda/nonda/nonda-saas-web/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpclient from \"@/utils/httpclient\";\nexport default {\n  name: \"profile\",\n  inject: ['reload'],\n  data: function data() {\n    return {\n      data: null,\n      email: '',\n      firstname: '',\n      lastname: '',\n      phone: '',\n      role: '',\n      dealGroup: '',\n      dealship: '',\n      img: '',\n      showTip: false,\n      showETip: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.img = this.$store.state.userInfo.avatarUrl;\n    httpclient.post(\"/api/v1/getUserById\", {\n      userId: this.$store.state.userInfo.userId\n    }).then(function (response) {\n      _this.email = response.data.data.userEmail ? response.data.data.userEmail : '';\n      _this.firstname = response.data.data.firstName;\n      _this.lastname = response.data.data.lastName;\n      _this.phone = response.data.data.phone;\n      _this.role = response.data.data.role;\n      _this.dealship = response.data.data.storeName;\n      _this.dealGroup = response.data.data.tenantName;\n    });\n  },\n  methods: {\n    savefile: function savefile(event) {\n      var _this2 = this;\n\n      var file = event.target.files;\n      var fb = new FormData();\n      fb.append(\"image\", file[0]);\n      httpclient.post('/api/v1/user/updateAvatar', fb).then(function (response) {\n        if (response.data.code === 200) {\n          _this2.img = response.data.data.avatarUrl;\n          var userPersonInfo = {\n            avatarUrl: _this2.img,\n            firstName: _this2.firstname,\n            lastName: _this2.lastname\n          };\n\n          _this2.$store.dispatch('user_Personal_Info', userPersonInfo); //更新store内用户信息\n\n\n          var storeData = JSON.parse(localStorage.getItem(\"user_info\")); //更新localstorage内用户信息\n\n          storeData.avatarUrl = _this2.img;\n          localStorage.setItem(\"user_info\", _JSON$stringify(storeData));\n          _this2.showTip = true;\n        } else {\n          _this2.showETip = true;\n        }\n      });\n    },\n    saveUserInfo: function saveUserInfo() {\n      var _this3 = this;\n\n      if (this.firstname && this.lastname && this.phone) {\n        httpclient.post('/api/v1/updateuserdetail', {\n          firstName: this.firstname,\n          lastName: this.lastname,\n          userPhone: this.phone\n        }).then(function (res) {\n          if (res.data.code === 200) {\n            var userPersonInfo = {\n              avatarUrl: _this3.img,\n              firstName: _this3.firstname,\n              lastName: _this3.lastname\n            };\n\n            _this3.$store.dispatch('user_Personal_Info', userPersonInfo);\n\n            var storeData = JSON.parse(localStorage.getItem(\"user_info\"));\n            storeData.firstName = _this3.firstname;\n            storeData.lastName = _this3.lastname;\n            localStorage.setItem(\"user_info\", _JSON$stringify(storeData));\n            _this3.showTip = true;\n          }\n        }).catch(function () {\n          _this3.showETip = true;\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA,OAAA,UAAA,MAAA,oBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,MAAA,EAAA,CAAA,QAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA,EALA;AAMA,MAAA,IAAA,EAAA,EANA;AAOA,MAAA,SAAA,EAAA,EAPA;AAQA,MAAA,QAAA,EAAA,EARA;AASA,MAAA,GAAA,EAAA,EATA;AAUA,MAAA,OAAA,EAAA,KAVA;AAWA,MAAA,QAAA,EAAA;AAXA,KAAA;AAaA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AAAA;;AACA,SAAA,GAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,SAAA;AACA,IAAA,UAAA,CAAA,IAAA,CAAA,qBAAA,EAAA;AACA,MAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AADA,KAAA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA;AACA,KAVA;AAWA,GA/BA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,KADA,EACA;AAAA;;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,UAAA,EAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,EAAA,CAAA,MAAA,CAAA,OAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AACA,MAAA,UAAA,CAAA,IAAA,CAAA,2BAAA,EAAA,EAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,GAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,cAAA,cAAA,GAAA;AACA,YAAA,SAAA,EAAA,MAAA,CAAA,GADA;AAEA,YAAA,SAAA,EAAA,MAAA,CAAA,SAFA;AAGA,YAAA,QAAA,EAAA,MAAA,CAAA;AAHA,WAAA;;AAKA,UAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,cAAA,EAPA,CAOA;;;AACA,cAAA,SAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA,CARA,CAQA;;AACA,UAAA,SAAA,CAAA,SAAA,GAAA,MAAA,CAAA,GAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,WAAA,EAAA,gBAAA,SAAA,CAAA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA,SAZA,MAYA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA,OAhBA;AAiBA,KAtBA;AAuBA,IAAA,YAvBA,0BAuBA;AAAA;;AACA,UAAA,KAAA,SAAA,IAAA,KAAA,QAAA,IAAA,KAAA,KAAA,EAAA;AACA,QAAA,UAAA,CAAA,IAAA,CAAA,0BAAA,EAAA;AACA,UAAA,SAAA,EAAA,KAAA,SADA;AAEA,UAAA,QAAA,EAAA,KAAA,QAFA;AAGA,UAAA,SAAA,EAAA,KAAA;AAHA,SAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,gBAAA,cAAA,GAAA;AACA,cAAA,SAAA,EAAA,MAAA,CAAA,GADA;AAEA,cAAA,SAAA,EAAA,MAAA,CAAA,SAFA;AAGA,cAAA,QAAA,EAAA,MAAA,CAAA;AAHA,aAAA;;AAKA,YAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,cAAA;;AACA,gBAAA,SAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;AACA,YAAA,SAAA,CAAA,SAAA,GAAA,MAAA,CAAA,SAAA;AACA,YAAA,SAAA,CAAA,QAAA,GAAA,MAAA,CAAA,QAAA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,WAAA,EAAA,gBAAA,SAAA,CAAA;AACA,YAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA;AACA,SAlBA,EAkBA,KAlBA,CAkBA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA,SApBA;AAqBA;AACA;AA/CA;AAhCA,CAAA","sourcesContent":["<template>\n    <div class=\"animated fadeIn profile-content\">\n        <b-card :header=\"$t('m.dashboard.profile')\" class=\"profile\">\n            <div class=\"content\">\n                <div class=\"group-img\">\n                    <img :src=\"img\" width=\"160px\" height=\"160px\">\n                    <input type=\"file\" id=\"uploadAvatar\" @change=\"savefile($event)\" accept=\"image/jpeg,image/png,image/jpg,image/svg,image/svg+xml\" ref=\"upload\">\n                </div>\n                <div>\n                    <b-form-group>\n                        <label for=\"email\">{{ this.$t('m.admin.email') }}</label>\n                        <b-form-input v-model=\"email\" id=\"email\" type=\"email\" required disabled autocomplete=\"email\"></b-form-input>\n                    </b-form-group>\n                    <b-row style=\"padding-left: 0px;\">\n                        <b-col sm=\"6\">\n                            <b-form-group>\n                                <label for=\"firstname\">{{ $t('m.common.first_name') }}</label>\n                                <b-form-input v-model=\"firstname\" id=\"firstname\" type=\"text\" :placeholder=\"$t('m.common.enter') + $t('m.common.first_name')\" required></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                        <b-col>\n                            <b-form-group>\n                                <label for=\"lastname\">{{ $t('m.common.last_name') }}</label>\n                                <b-form-input v-model=\"lastname\" id=\"lastname\" type=\"text\" :placeholder=\"$t('m.common.enter') + $t('m.common.last_name')\" required></b-form-input>\n                            </b-form-group>\n                        </b-col>\n                    </b-row>\n                    <b-form-group>\n                        <label for=\"phone\">{{ $t('m.common.contact_phone') }}</label>\n                        <b-form-input v-model=\"phone\" id=\"phone\" type=\"text\" required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label for=\"Role\">{{ $t('m.common.role') }}</label>\n                        <b-form-input v-model=\"role\" id=\"role\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label>{{ $t('m.common.dealership') }}</label>\n                        <b-form-input v-model=\"dealship\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <label>{{ $t('m.common.deal_group') }}</label>\n                        <b-form-input v-model=\"dealGroup\" type=\"text\" disabled required></b-form-input>\n                    </b-form-group>\n                    <b-form-group>\n                        <button class=\"btn btn-primary\" @click=\"saveUserInfo\">\n                            {{ $t('m.admin.save') }}\n                        </button>\n                        <button class=\"btn btn-ghost-danger\" @click=\"$router.push('/change-password')\">\n                            {{ $t('m.common.change_password') }}\n                        </button>\n                    </b-form-group>\n                </div>\n            </div>\n        </b-card>\n        <b-modal ref=\"globalModal\" :title=\"$t('m.vehicle.actions_remind')\"  v-model=\"showTip\" :ok-title=\"$t('m.tip.b_ok')\" ok-only  @ok=\"showTip= false\">\n            <p>{{ this.$t('m.admin.save_success') }}</p>\n        </b-modal>\n\n        <b-modal ref=\"globalModal\" :title=\"$t('m.vehicle.actions_remind')\"  v-model=\"showETip\" :ok-title=\"$t('m.tip.b_ok')\" ok-only  @ok=\"showETip= false\">\n            <p>{{ this.$t('m.tip.update_failed') }}</p>\n        </b-modal>\n\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .profile {\n        .content {\n            max-width: 600px;\n            margin: 0 auto;\n            img {\n                border-radius: 50%;\n                cursor: pointer;\n            }\n            .group-img {\n                position: relative;\n                margin-bottom: 20px;\n                text-align: center;\n                input {\n                    opacity: 0;\n                    height: 160px;\n                    width: 160px;\n                    position: absolute;\n                    z-index: 1;\n                    margin-left: -160px;\n                }\n            }\n            .btn-ghost-danger {\n                margin-left: 20px;\n            }\n        }\n    }\n</style>\n\n<script>\n    import httpclient from \"@/utils/httpclient\"\n    export default {\n        name: \"profile\",\n        inject: ['reload'],\n        data() {\n            return {\n                data: null,\n                email: '',\n                firstname: '',\n                lastname: '',\n                phone: '',\n                role: '',\n                dealGroup: '',\n                dealship: '',\n                img: '',\n                showTip: false,\n                showETip: false\n            }\n        },\n        mounted() {\n            this.img = this.$store.state.userInfo.avatarUrl;\n            httpclient.post(\"/api/v1/getUserById\", {\n                userId: this.$store.state.userInfo.userId\n            }).then(response => {\n                this.email = response.data.data.userEmail ? response.data.data.userEmail : '';\n                this.firstname = response.data.data.firstName;\n                this.lastname = response.data.data.lastName;\n                this.phone = response.data.data.phone;\n                this.role = response.data.data.role;\n                this.dealship = response.data.data.storeName;\n                this.dealGroup = response.data.data.tenantName;\n            })\n        },\n        methods: {\n            savefile(event) {\n                let file = event.target.files;\n                let fb = new FormData();\n                fb.append(\"image\", file[0]);\n                httpclient.post('/api/v1/user/updateAvatar', fb).then(response => {\n                    if (response.data.code === 200) {\n                        this.img = response.data.data.avatarUrl;\n                        let userPersonInfo = {\n                            avatarUrl:this.img,\n                            firstName:this.firstname,\n                            lastName:this.lastname\n                        };\n                        this.$store.dispatch('user_Personal_Info',userPersonInfo);  //更新store内用户信息\n                        let storeData = JSON.parse(localStorage.getItem(\"user_info\"));  //更新localstorage内用户信息\n                        storeData.avatarUrl = this.img;\n                        localStorage.setItem(\"user_info\", JSON.stringify(storeData));\n                        this.showTip = true;\n                    } else {\n                        this.showETip = true;\n                    }\n                })\n            },\n            saveUserInfo() {\n                if (this.firstname && this.lastname && this.phone) {\n                    httpclient.post('/api/v1/updateuserdetail',{\n                        firstName: this.firstname,\n                        lastName: this.lastname,\n                        userPhone: this.phone\n                    }).then((res) => {\n                         if(res.data.code === 200){\n                            let userPersonInfo = {\n                                avatarUrl:this.img,\n                                firstName:this.firstname,\n                                lastName:this.lastname\n                            };\n                            this.$store.dispatch('user_Personal_Info',userPersonInfo);\n                             let storeData = JSON.parse(localStorage.getItem(\"user_info\"));\n                             storeData.firstName = this.firstname;\n                             storeData.lastName = this.lastname;\n                             localStorage.setItem(\"user_info\", JSON.stringify(storeData));\n                             this.showTip = true;\n                         }\n                    }).catch(()=>{\n                        this.showETip = true;\n                    })\n                }\n            }\n        }\n    }\n</script>\n"],"sourceRoot":"src/views/dashboard/dashboardMain"}]}