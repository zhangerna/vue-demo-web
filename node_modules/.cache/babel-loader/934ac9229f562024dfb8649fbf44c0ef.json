{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js!/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/addVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/dashboardMain/addVehicle.vue","mtime":1569468357000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nexport default {\n  name: \"addVehicle\",\n  components: {\n    model: model\n  },\n  data: function data() {\n    return {\n      title: '',\n      content: '',\n      show: false,\n      showB: true,\n      vin: '',\n      vinIsVaild: false,\n      vinSuccess: false,\n      data: {},\n      year: '',\n      make: '',\n      alias: '',\n      trim: '',\n      engine: '',\n      price: '',\n      stock: '',\n      condition: '',\n      odometer: '',\n      model: '',\n      color: 'Black',\n      date: '',\n      plate: '',\n      photo: '',\n      changedLanguage: null,\n      disabled: false,\n      colorList: [{\n        c: this.$t('m.colors.black'),\n        y: \"Black\"\n      }, {\n        c: this.$t('m.colors.white'),\n        y: 'White'\n      }, {\n        c: this.$t('m.colors.silver'),\n        y: 'Silver'\n      }, {\n        c: this.$t('m.colors.blue'),\n        y: 'Blue'\n      }, {\n        c: this.$t('m.colors.red'),\n        y: 'Red'\n      }, {\n        c: this.$t('m.colors.brown'),\n        y: 'Brown'\n      }, {\n        c: this.$t('m.colors.gold'),\n        y: 'Gold'\n      }, {\n        c: this.$t('m.colors.orange'),\n        y: 'Orange'\n      }, {\n        c: this.$t('m.colors.yellow'),\n        y: 'Yellow'\n      }, {\n        c: this.$t('m.colors.purple'),\n        y: 'Purple'\n      }, {\n        c: this.$t('m.colors.green'),\n        y: 'Green'\n      }, {\n        c: this.$t('m.colors.pink'),\n        y: 'Pink'\n      }, {\n        c: this.$t('m.colors.others'),\n        y: 'Others'\n      }],\n      conditionList: [{\n        c: this.$t('m.common.c_new'),\n        y: \"1\"\n      }, {\n        c: this.$t('m.common.c_used'),\n        y: \"3\"\n      }, {\n        c: this.$t('m.common.c_demo'),\n        y: \"2\"\n      }]\n    };\n  },\n  mounted: function mounted() {\n    if (this.$i18n.locale === 'en-US') {\n      this.changedLanguage = \"English\";\n    } else {\n      this.changedLanguage = 'Chinese';\n    }\n  },\n  watch: {\n    vin: function vin(curVal) {\n      var _this = this;\n\n      if (curVal.length == 17) {\n        this.disabled = true;\n        httpClient.get('/api/v1/vehicle/detail/vin?vin=' + this.vin).then(function (response) {\n          var _mileage = null; //距离单位转换\n\n          if (response.data.data.odometer) {\n            if (_this.changedLanguage === 'English') {\n              _mileage = (response.data.data.odometer * 0.0006214).toFixed(0);\n            } else {\n              _mileage = (response.data.data.odometer / 1000).toFixed(0);\n            }\n          } else {\n            _mileage = 0;\n          }\n\n          _this.vinSuccess = true;\n          _this.vinIsVaild = false;\n          _this.showB = false;\n          _this.data = response.data.data;\n          _this.year = _this.data.year;\n          _this.make = _this.data.make;\n          _this.model = _this.data.model;\n          _this.alias = _this.data.alias;\n          _this.trim = _this.data.trim;\n          _this.engine = _this.data.engineType;\n          _this.price = _this.data.price;\n          _this.color = _this.data.color;\n          _this.date = _this.data.inventoryDays;\n          _this.stock = _this.data.stockNumber;\n          _this.condition = _this.data.vehicleTypeCode;\n          _this.odometer = _mileage;\n          _this.plate = _this.data.plate;\n          _this.photo = _this.data.photoPath;\n        }).catch(function (error) {\n          _this.vinIsVaild = false;\n          _this.vinSuccess = false;\n          _this.showB = false;\n        });\n      } else {\n        this.vinIsVaild = true;\n      }\n    }\n  },\n  methods: {\n    closeTip: function closeTip() {\n      this.show = false;\n    },\n    savefile: function savefile(event) {\n      var _this2 = this;\n\n      var file = event.target.files;\n      var fb = new FormData();\n      fb.append(\"image\", file[0]);\n      httpClient.post('/api/v1/uploadFile', fb).then(function (response) {\n        if (response.data.code == 200) {\n          _this2.photo = response.data.data.path;\n          _this2.title = _this2.$t('m.tip.suc');\n          _this2.content = _this2.$t('m.tip.upload');\n          _this2.show = true;\n          _this2.showB = false;\n        }\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    saveData: function saveData() {\n      var _this3 = this;\n\n      var _mileage = null; //距离单位转换\n\n      if (this.odometer) {\n        if (this.changedLanguage === 'English') {\n          _mileage = (this.odometer * 1609.344).toFixed(0);\n        } else {\n          _mileage = (this.odometer * 1000).toFixed(0);\n        }\n      } else {\n        _mileage = 0;\n      }\n\n      httpClient.post('/api/v1/vehicle/insert/vehicle', {\n        vin: this.vin,\n        year: this.year,\n        make: this.make,\n        model: this.model,\n        alias: this.alias,\n        trim: this.trim,\n        engineType: this.engine,\n        color: this.color,\n        price: this.price,\n        stockNumber: this.stock,\n        inventoryDate: new Date(this.date).getTime(),\n        vehicleTypeCode: Number(this.condition),\n        currentMileage: _mileage,\n        plate: this.plate,\n        photoPath: this.photo\n      }).then(function (response) {\n        if (response.data.data.bindResult == true) {\n          _this3.$router.push('/inventory/vehicle/detail/' + response.data.data.vehicleId);\n        }\n      });\n    }\n  }\n};",null]}