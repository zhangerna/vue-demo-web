{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/shopManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/shopManager.vue","mtime":1576664095000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport model from \"@/components/model\";\nimport { filterLastFirstName } from \"@/utils/db\";\nexport default {\n  name: \"shopManager\",\n  components: {\n    model: model\n  },\n  data: function data() {\n    return {\n      tableFields: {\n        storeServiceNum: {\n          label: this.$t('m.shop.shop_num'),\n          class: \"text-center\"\n        },\n        name: {\n          label: this.$t('m.shop.shop_name'),\n          class: \"text-center\"\n        },\n        address: {\n          label: this.$t('m.shop.shop_address'),\n          class: \"text-center\"\n        },\n        info: {\n          label: this.$t('m.shop.manager_info'),\n          class: \"text-center\"\n        },\n        actions: {\n          label: this.$t('m.vehicle.actions'),\n          class: \"text-center\"\n        }\n      },\n      table: null,\n      showDelTip: false,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      totalPages: 0,\n      showTip: false,\n      curName: '',\n      curAdminList: [],\n      curId: ''\n    };\n  },\n  mounted: function mounted() {\n    this.initData(this.currentPage, this.pageSize);\n  },\n  methods: {\n    filterLastFirstName: filterLastFirstName,\n    showMore: function showMore(name, data) {\n      this.curAdminList = data;\n      this.curName = this.$t('m.add_shop.store_admin', {\n        name: name\n      });\n      this.showTip = true;\n    },\n    initData: function initData(page) {\n      var _this = this;\n\n      httpClient.get(\"/api/v1/store/pagelist?pageNo=\".concat(page, \"&pageSize=\").concat(this.pageSize)).then(function (response) {\n        _this.total = response.data.data.rowCount;\n\n        _this.filterData(response.data.data);\n\n        _this.totalPages = response.data.data.totalPages;\n      });\n    },\n    delData: function delData(id) {\n      this.curId = id;\n      this.showDelTip = true;\n    },\n    closeBox: function closeBox(type) {\n      if (type) {\n        httpClient.post(\"/api/v1/store/delete\", {\n          storeId: this.curId\n        }).then(function (res) {\n          if (res.data.code == 200 && res.data.data.result) {\n            window.location.reload();\n          } else {\n            alert(\"删除失败\");\n          }\n        });\n      }\n\n      this.showDelTip = false;\n    },\n    filterData: function filterData(data) {\n      var _this2 = this;\n\n      var self = this;\n      this.table = data.datas.map(function (item) {\n        var address = \"\";\n\n        if (self.$i18n.locale === \"en-US\") {\n          address = \"\".concat(item.countryEn ? item.countryEn : 'N/A', \",\").concat(item.stateEn ? item.stateEn : 'N/A', \",\").concat(item.cityEn ? item.cityEn : 'N/A', \", \").concat(item.streetAddress ? item.streetAddress : 'N/A');\n        } else {\n          address = \"\".concat(item.country ? item.country : 'N/A', \",\").concat(item.state ? item.state : 'N/A', \",\").concat(item.city ? item.city : 'N/A', \",\").concat(item.area && _this2.GLOBAL.APP_ENV == 'cn' ? item.area + ',' : '').concat(item.streetAddress ? item.streetAddress : 'N/A');\n        }\n\n        return {\n          storeServiceNum: item.storeServiceNum,\n          name: item.storeName,\n          address: address,\n          info: item.userList && item.userList.length > 0 ? item.userList : 'N/A',\n          id: item.id\n        };\n      });\n    }\n  }\n};",{"version":3,"sources":["shopManager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn shop\">\n        <b-card>\n            <div slot=\"header\">\n                {{ $t('m.dashboard.store') }}\n                <button class=\"btn btn-sm btn-primary link-bind float-right\" @click=\"$router.push('/inventory/shop-manager/add')\">\n                    <i class=\"fa fa-plus-square\"></i>\n                    {{ $t('m.shop.add_shop') }}\n                </button>\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline table-responsive-sm\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"storeServiceNum\" slot-scope=\"data\">\n                        {{ data.item.storeServiceNum | checkNan }}\n                    </template>\n                    <template slot=\"info\" slot-scope=\"data\">\n                        <template v-if=\"data.item.info && data.item.info != 'N/A'\">\n                            <div>\n                                <p class=\"font-weight-bold margin-b-2\">{{ filterLastFirstName($i18n.locale, data.item.info[0].firstName, data.item.info[0].lastName) }}</p>\n                                <p class=\"margin-b-2\">{{ data.item.info[0].userEmail }},{{ data.item.info[0].userPhone }}</p>\n                                <p v-if=\"data.item.info.length > 1\" class=\"blue-point\" @click=\"showMore(data.item.name, data.item.info)\">{{ $t('m.shop.more') }}</p>\n                            </div>\n                        </template>\n                        <template v-else>\n                            N/A\n                        </template>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <div class=\"btn btn-sm btn-info color-white\" v-b-tooltip.hover :title=\"$t('m.tooltip.check_detail')\"\n                             @click=\"$router.push('/inventory/shop-manager/detail/' + data.item.id)\"><i class=\"fa fa-eye\"></i></div>\n                        <div class=\"btn btn-sm btn-info color-white margin-left-2\" v-b-tooltip.hover :title=\"$t('m.tooltip.edit')\"\n                             @click=\"$router.push('/inventory/shop-manager/edit/' + data.item.id)\"><i class=\"fa fa-edit\"></i></div>\n                        <div class=\"btn btn-sm btn-danger btn-del margin-left-2\" @click=\"delData(data.item.id)\"\n                             v-b-tooltip.hover :title=\"$t('m.cloud.delete')\"><i\n                                class=\"cui cui-trash\"></i></div>\n                    </template>\n                </b-table>\n            </div>\n        </b-card>\n        <b-modal ref=\"my-modal\" v-model=\"showTip\" @ok=\"showTip = false\" :title=\"curName\">\n            <b-row v-for=\"(item, key) in curAdminList\" :key=\"key\">\n                <b-col sm=\"12\" md=\"12\">\n                    <p class=\"font-weight-bold margin-b-2\">{{ filterLastFirstName($i18n.locale, item.firstName, item.lastName) }}</p>\n                    <p class=\"margin-b-2\">{{ item.userEmail }},{{ item.userPhone }}</p>\n                </b-col>\n            </b-row>\n        </b-modal>\n        <b-row>\n            <b-col sm=\"4\" lg=\"4\">\n                <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                    {{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? total :currentPage * 10 }} {{ $t('m.common.of') }} {{total}} {{ $t('m.common.entries') }}\n                </div>\n            </b-col>\n            <b-col sm=\"8\" lg=\"8\">\n                <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"10\" @input=\"changePage(currentPage)\"></b-pagination>\n            </b-col>\n        </b-row>\n        <model\n                :show=\"showDelTip\"\n                :title=\"$t('m.tip.warn')\"\n                :content=\"$t('m.detail_shop.del1')\"\n                :buttonText=\"{btnFirst: this.$t('m.tip.b_cancel'), btnSecond: this.$t('m.tip.b_ok')}\"\n                @closeRemindBox=\"closeBox\"\n        ></model>\n    </div>\n</template>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import model from \"@/components/model\";\n    import { filterLastFirstName } from \"@/utils/db\";\n    export default {\n        name: \"shopManager\",\n        components: {\n            model\n        },\n        data () {\n            return {\n                tableFields: {\n                    storeServiceNum: {\n                        label: this.$t('m.shop.shop_num'),\n                        class: \"text-center\"\n                    },\n                    name: {\n                        label: this.$t('m.shop.shop_name'),\n                        class: \"text-center\"\n                    },\n                    address: {\n                        label: this.$t('m.shop.shop_address'),\n                        class: \"text-center\"\n                    },\n                    info: {\n                        label: this.$t('m.shop.manager_info'),\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: this.$t('m.vehicle.actions'),\n                        class: \"text-center\"\n                    }\n                },\n                table: null,\n                showDelTip: false,\n                currentPage: 1,\n                pageSize: 10,\n                total: 0,\n                totalPages:0,\n                showTip: false,\n                curName: '',\n                curAdminList: [],\n                curId: ''\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage, this.pageSize);\n        },\n        methods: {\n            filterLastFirstName,\n            showMore(name, data) {\n                this.curAdminList = data;\n                this.curName = this.$t('m.add_shop.store_admin',{name: name});\n                this.showTip = true;\n            },\n            initData(page) {\n                httpClient.get(`/api/v1/store/pagelist?pageNo=${page}&pageSize=${this.pageSize}`).then(response => {\n                    this.total = response.data.data.rowCount;\n                    this.filterData(response.data.data);\n                    this.totalPages = response.data.data.totalPages\n                })\n            },\n            delData(id) {\n                this.curId = id;\n                this.showDelTip = true;\n            },\n            closeBox(type) {\n                if (type) {\n                    httpClient.post(\"/api/v1/store/delete\", {\n                        storeId: this.curId\n                    }).then((res) => {\n                        if (res.data.code == 200 && res.data.data.result) {\n                            window.location.reload();\n                        } else {\n                            alert(\"删除失败\");\n                        }\n                    })\n                }\n                this.showDelTip = false\n            },\n            filterData(data) {\n                let self = this;\n                this.table = data.datas.map((item) => {\n                    let address = \"\";\n                    if (self.$i18n.locale === \"en-US\" ) {\n                        address = `${item.countryEn ? item.countryEn : 'N/A'},${item.stateEn ? item.stateEn : 'N/A'},${item.cityEn ? item.cityEn : 'N/A'}, ${item.streetAddress ? item.streetAddress : 'N/A'}`\n                    } else {\n                        address = `${item.country ? item.country : 'N/A'},${item.state ? item.state : 'N/A'},${item.city ? item.city : 'N/A'},${item.area && this.GLOBAL.APP_ENV == 'cn' ? item.area + ',' : ''}${ item.streetAddress ? item.streetAddress : 'N/A'}`\n                    }\n                    return {\n                        storeServiceNum: item.storeServiceNum,\n                        name: item.storeName,\n                        address: address,\n                        info: item.userList && item.userList.length > 0 ? item.userList : 'N/A',\n                        id: item.id,\n                    }\n                });\n\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .shop {\n        .margin-b-2 {\n            margin-bottom: 2px;\n        }\n        .blue-point {\n            color: #63c2de;\n            cursor: pointer;\n        }\n        .margin-left-2 {\n            margin-left: 2px;\n        }\n    }\n</style>\n"],"sourceRoot":"src/views/dashboard/inventory"}]}