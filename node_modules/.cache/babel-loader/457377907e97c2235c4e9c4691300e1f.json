{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/userInviteRegist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/inventory/userInviteRegist.vue","mtime":1575619846000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport Alert from \"@components/model\";\nimport registerStatus from \"@components/registStatus\";\nexport default {\n  name: \"userInviteRegister\",\n  components: {\n    Alert: Alert,\n    registerStatus: registerStatus\n  },\n  data: function data() {\n    return {\n      firstName: \"\",\n      lastName: \"\",\n      setPassWord: \"\",\n      confirmPassWord: \"\",\n      phone: \"\",\n      status: \"accepted\",\n      showResult: false,\n      showAlerts: {\n        title: \"\",\n        show: false,\n        content: \"\",\n        buttonText: \"\"\n      },\n      user: {\n        name: \"\",\n        lot: \"\",\n        email: \"\"\n      },\n      btnGroup: {\n        btnFirst: \"Login\",\n        btnSecond: \"Homepage\"\n      },\n      errInfo: \"\",\n      succInfo: \"\",\n      icon: \"\",\n      valueLength: \"\",\n      language: \"44\",\n      //226是美国\n      inviteData: {}\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var token = window.location.search.split(\"token=\")[1]; //let token = 'eyJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRJZCI6ImJkMzM1MGJhMWRmZDQ4Njg5MTc5MTE3YWExNTY5ZTk5IiwiZW1haWwiOiJ3ZWltaW5Abm9uZGEudXMiLCJzdWIiOiJiZDMzNTBiYTFkZmQ0ODY4OTE3OTExN2FhMTU2OWU5OV93ZWltaW5Abm9uZGEudXMiLCJleHAiOjE1NjI4Mzc0ODN9.DDntzh__-hj25PHzpazZCm9iUyFR-yv2VPUdbgmBQpU';\n\n    this.inviteRegister(token).then(function (res) {\n      if (res.data.code === 200) {\n        var data = res.data.data;\n        _this.firstName = data.inviteFirstName ? data.inviteFirstName : \"\";\n        _this.lastName = data.inviteLastName ? data.inviteLastName : \"\";\n        _this.phone = data.invitePhone ? data.invitePhone : \"\";\n        _this.user.name = data.firstName + \" \" + data.lastName;\n        _this.user.lot = data.storeName;\n        _this.user.email = data.inviteEmail;\n      } else if (res.data.code === 400) {\n        var passData = {\n          title: _this.$t(\"m.register.sign_up\"),\n          show: true,\n          content: _this.$t(\"m.cloud.register_verify_failed\"),\n          buttonText: {\n            btnFirst: \"\",\n            btnSecond: _this.$t(\"m.tip.b_ok\")\n          }\n        };\n\n        _this.closeRemind(passData);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  },\n  computed: {\n    firstNameState: function firstNameState() {\n      return this.firstName.length > 0;\n    },\n    lastNameState: function lastNameState() {\n      return this.lastName.length > 0;\n    },\n    setPassWordState: function setPassWordState() {\n      return this.setPassWord.length > 5;\n    },\n    confirmPassWordState: function confirmPassWordState() {\n      return this.confirmPassWord.length > 5;\n    },\n    phoneState: function phoneState() {\n      return this.phone.length > 7;\n    }\n  },\n  methods: {\n    inviteRegister: function inviteRegister(token) {\n      return httpClient.post(\"/api/v1/user/inviteLinkVerification\", {\n        token: token\n      });\n    },\n    GetRequest: function GetRequest() {\n      var url = location.search; //获取url中\"?\"符后的字串\n\n      var theRequest = {};\n\n      if (url.indexOf(\"?\") !== -1) {\n        var str = url.substr(1);\n        var strs = str.split(\"&\");\n\n        for (var i = 0; i < strs.length; i++) {\n          theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\n        }\n      }\n\n      return theRequest;\n    },\n    saveInviteData: function saveInviteData() {\n      this.checkThePassWord(this.postData);\n    },\n    checkThePassWord: function checkThePassWord(cb) {\n      //检验两次密码，是否勾选\n      if (this.firstName === \"\" || this.lastName === \"\" || this.setPassWord === \"\" || this.confirmPassWord === \"\" || this.phone === \"\") {\n        var passData = {\n          title: this.$t(\"m.register.sign_up\"),\n          show: true,\n          content: this.$t(\"m.cloud.fill_in_all_in\"),\n          buttonText: {\n            btnFirst: \"\",\n            btnSecond: this.$t(\"m.tip.b_ok\")\n          }\n        };\n        this.closeRemind(passData);\n      } else if (this.confirmPassWord !== this.setPassWord) {\n        var _passData = {\n          title: this.$t(\"m.register.sign_up\"),\n          show: true,\n          content: this.$t(\"m.tip.password_confirm_error\"),\n          buttonText: {\n            btnFirst: \"\",\n            btnSecond: this.$t(\"m.tip.b_ok\")\n          }\n        };\n        this.closeRemind(_passData);\n        this.confirmPassWord = \"\";\n      } else {\n        cb();\n      } // else if (this.status !== 'accepted') {//判断是否勾选协议，暂时去掉\n      //         let passData = {\n      //             title: 'Register',\n      //             show: true,\n      //             content: 'Please Check Our Privacy Policy and Terms of Service',\n      //             buttonText: {\n      //                 btnFirst: '',\n      //                 btnSecond: 'OK'\n      //             }\n      //         };\n      //         this.closeRemind(passData);\n      //     }\n\n    },\n    postData: function postData() {\n      var _this2 = this;\n\n      var data = {\n        firstName: this.firstName,\n        lastName: this.lastName,\n        password: this.confirmPassWord,\n        phone: this.phone,\n        userEmail: this.user.email\n      };\n      var token = this.GetRequest().token;\n      var link = \"/api/v1/user/reg?token=\" + token;\n      httpClient.post(link, data).then(function (res) {\n        if (res && res.data.code === 400) {\n          _this2.showResult = !_this2.showResult;\n          _this2.errInfo = _this2.$t(\"m.tip.user_already\");\n          _this2.succInfo = \"\";\n          _this2.icon = \"fa fa-close\";\n        } else {\n          _this2.showResult = !_this2.showResult;\n          _this2.errInfo = \"\";\n          _this2.succInfo = _this2.$t(\"m.cloud.register_success_login\", {\n            store: _this2.user.lot\n          });\n          _this2.icon = \"cui cui-check\";\n        }\n      });\n    },\n    closeRemind: function closeRemind(data) {\n      this.showAlerts.show = data.show;\n      this.showAlerts.title = data.title;\n      this.showAlerts.content = data.content;\n      this.showAlerts.buttonText = data.buttonText;\n    },\n    closeBox: function closeBox() {\n      //子组件来请求父组件关闭弹窗\n      this.showAlerts.show = !this.showAlerts.show;\n    }\n  }\n};",{"version":3,"sources":["userInviteRegist.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn\">\n        <div class=\"invite-register\" v-if=\"!showResult\">\n            <b-row>\n                <b-col sm=\"12\" lg=\"12\" class=\"text-center\">\n                    <img src=\"../../../assets/pages-img/logo.svg\" width=\"200\" alt=\"\" />\n                </b-col>\n                <b-col sm=\"12\" lg=\"12\">\n                    <p class=\"text-muted text-center title\">\n                        {{ $t(\"m.cloud.invite_user_title\") }}\n                    </p>\n                </b-col>\n                <b-col sm=\"12\" lg=\"12\">\n                    <div class=\"text-muted text-center\" style=\"margin-bottom: 10px\">\n                        {{ $t(\"m.cloud.user_invite_desc\", { name: user.name, store: user.lot }) }}<br />\n                        {{ $t(\"m.cloud.user_invite_fill\") }}\n                    </div>\n                </b-col>\n            </b-row>\n\n            <div class=\"form-submit\">\n                <b-row>\n                    <b-col class=\"full-width\" sm=\"6\" lg=\"6\">\n                        <label class=\"text-muted\">{{ $t(\"m.common.first_name\") }}</label>\n                        <b-form-input class=\"form-control\" type=\"text\" :state=\"firstNameState\" v-model=\"firstName\"></b-form-input>\n                    </b-col>\n                    <b-col class=\"full-width\" sm=\"6\" lg=\"6\">\n                        <label class=\"text-muted\">{{ $t(\"m.common.last_name\") }}</label>\n                        <b-form-input class=\"form-control\" type=\"text\" :state=\"lastNameState\" v-model=\"lastName\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{ $t(\"m.admin.email\") }}</label>\n                        <b-form-input disabled class=\"form-control\" type=\"email\" v-model=\"user.email\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{ $t(\"m.register.set\") }}</label>\n                        <b-form-input class=\"form-control\" type=\"password\" :state=\"setPassWordState\" v-model=\"setPassWord\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{ $t(\"m.register.confirm\") }}</label>\n                        <b-form-input class=\"form-control\" :state=\"confirmPassWordState\" type=\"password\" v-model=\"confirmPassWord\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\">\n                        <label class=\"text-muted\">{{ $t(\"m.common.contact_phone\") }}</label>\n                        <b-form-input class=\"form-control\" :state=\"phoneState\" type=\"number\" v-model=\"phone\"></b-form-input>\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <!--                    <b-form-checkbox class=\"input-check\" v-model=\"status\" value=\"accepted\"-->\n                    <!--                                     unchecked-value=\"not_accepted\">-->\n                    <!--                        Agree to the Privacy Policy and Terms of Service-->\n                    <!--                    </b-form-checkbox>-->\n                </b-row>\n                <b-row>\n                    <b-col sm=\"12\" lg=\"12\" class=\"margin-submit\">\n                        <b-button variant=\"success\" class=\"btn col-12 \" @click=\"saveInviteData\">{{ $t(\"m.common.submit\") }}</b-button>\n                    </b-col>\n                </b-row>\n            </div>\n        </div>\n\n        <div v-if=\"showResult\">\n            <registerStatus id=\"after-result\" :btnGroup=\"btnGroup\" :errInfo=\"errInfo\" :succInfo=\"succInfo\"></registerStatus>\n        </div>\n\n        <Alert @closeRemindBox=\"closeBox()\" :buttonText=\"showAlerts.buttonText\" :show=\"showAlerts.show\" :title=\"showAlerts.title\" :content=\"showAlerts.content\"></Alert>\n    </div>\n</template>\n<script>\nimport httpClient from \"@/utils/httpclient\";\nimport Alert from \"@components/model\";\nimport registerStatus from \"@components/registStatus\";\n\nexport default {\n    name: \"userInviteRegister\",\n    components: {\n        Alert,\n        registerStatus\n    },\n    data() {\n        return {\n            firstName: \"\",\n            lastName: \"\",\n            setPassWord: \"\",\n            confirmPassWord: \"\",\n            phone: \"\",\n            status: \"accepted\",\n            showResult: false,\n            showAlerts: {\n                title: \"\",\n                show: false,\n                content: \"\",\n                buttonText: \"\"\n            },\n            user: {\n                name: \"\",\n                lot: \"\",\n                email: \"\"\n            },\n            btnGroup: {\n                btnFirst: \"Login\",\n                btnSecond: \"Homepage\"\n            },\n            errInfo: \"\",\n            succInfo: \"\",\n            icon: \"\",\n            valueLength: \"\",\n            language: \"44\", //226是美国\n            inviteData: {}\n        };\n    },\n    mounted() {\n        let token = window.location.search.split(\"token=\")[1];\n        //let token = 'eyJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRJZCI6ImJkMzM1MGJhMWRmZDQ4Njg5MTc5MTE3YWExNTY5ZTk5IiwiZW1haWwiOiJ3ZWltaW5Abm9uZGEudXMiLCJzdWIiOiJiZDMzNTBiYTFkZmQ0ODY4OTE3OTExN2FhMTU2OWU5OV93ZWltaW5Abm9uZGEudXMiLCJleHAiOjE1NjI4Mzc0ODN9.DDntzh__-hj25PHzpazZCm9iUyFR-yv2VPUdbgmBQpU';\n        this.inviteRegister(token)\n            .then(res => {\n                if (res.data.code === 200) {\n                    let data = res.data.data;\n                    this.firstName = data.inviteFirstName ? data.inviteFirstName : \"\";\n                    this.lastName = data.inviteLastName ? data.inviteLastName : \"\";\n                    this.phone = data.invitePhone ? data.invitePhone : \"\";\n                    this.user.name = data.firstName + \" \" + data.lastName;\n                    this.user.lot = data.storeName;\n                    this.user.email = data.inviteEmail;\n                } else if (res.data.code === 400) {\n                    let passData = {\n                        title: this.$t(\"m.register.sign_up\"),\n                        show: true,\n                        content: this.$t(\"m.cloud.register_verify_failed\"),\n                        buttonText: {\n                            btnFirst: \"\",\n                            btnSecond: this.$t(\"m.tip.b_ok\")\n                        }\n                    };\n                    this.closeRemind(passData);\n                }\n            })\n            .catch(err => {\n                console.log(err);\n            });\n    },\n    computed: {\n        firstNameState() {\n            return this.firstName.length > 0;\n        },\n        lastNameState() {\n            return this.lastName.length > 0;\n        },\n        setPassWordState() {\n            return this.setPassWord.length > 5;\n        },\n        confirmPassWordState() {\n            return this.confirmPassWord.length > 5;\n        },\n        phoneState() {\n            return this.phone.length > 7;\n        }\n    },\n    methods: {\n        inviteRegister(token) {\n            return httpClient.post(\"/api/v1/user/inviteLinkVerification\", {\n                token: token\n            });\n        },\n        GetRequest() {\n            var url = location.search; //获取url中\"?\"符后的字串\n            var theRequest = {};\n            if (url.indexOf(\"?\") !== -1) {\n                var str = url.substr(1);\n                var strs = str.split(\"&\");\n                for (var i = 0; i < strs.length; i++) {\n                    theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\n                }\n            }\n            return theRequest;\n        },\n        saveInviteData() {\n            this.checkThePassWord(this.postData);\n        },\n        checkThePassWord(cb) {\n            //检验两次密码，是否勾选\n            if (this.firstName === \"\" || this.lastName === \"\" || this.setPassWord === \"\" || this.confirmPassWord === \"\" || this.phone === \"\") {\n                let passData = {\n                    title: this.$t(\"m.register.sign_up\"),\n                    show: true,\n                    content: this.$t(\"m.cloud.fill_in_all_in\"),\n                    buttonText: {\n                        btnFirst: \"\",\n                        btnSecond: this.$t(\"m.tip.b_ok\")\n                    }\n                };\n                this.closeRemind(passData);\n            } else if (this.confirmPassWord !== this.setPassWord) {\n                let passData = {\n                    title: this.$t(\"m.register.sign_up\"),\n                    show: true,\n                    content: this.$t(\"m.tip.password_confirm_error\"),\n                    buttonText: {\n                        btnFirst: \"\",\n                        btnSecond: this.$t(\"m.tip.b_ok\")\n                    }\n                };\n                this.closeRemind(passData);\n                this.confirmPassWord = \"\";\n            } else {\n                cb();\n            }\n\n            // else if (this.status !== 'accepted') {//判断是否勾选协议，暂时去掉\n            //         let passData = {\n            //             title: 'Register',\n            //             show: true,\n            //             content: 'Please Check Our Privacy Policy and Terms of Service',\n            //             buttonText: {\n            //                 btnFirst: '',\n            //                 btnSecond: 'OK'\n            //             }\n            //         };\n            //         this.closeRemind(passData);\n            //     }\n        },\n        postData() {\n            let data = {\n                firstName: this.firstName,\n                lastName: this.lastName,\n                password: this.confirmPassWord,\n                phone: this.phone,\n                userEmail: this.user.email\n            };\n            let token = this.GetRequest().token;\n            let link = \"/api/v1/user/reg?token=\" + token;\n            httpClient.post(link, data).then(res => {\n                if (res && res.data.code === 400) {\n                    this.showResult = !this.showResult;\n                    this.errInfo = this.$t(\"m.tip.user_already\");\n                    this.succInfo = \"\";\n                    this.icon = \"fa fa-close\";\n                } else {\n                    this.showResult = !this.showResult;\n                    this.errInfo = \"\";\n                    this.succInfo = this.$t(\"m.cloud.register_success_login\", { store: this.user.lot });\n                    this.icon = \"cui cui-check\";\n                }\n            });\n        },\n        closeRemind(data) {\n            this.showAlerts.show = data.show;\n            this.showAlerts.title = data.title;\n            this.showAlerts.content = data.content;\n            this.showAlerts.buttonText = data.buttonText;\n        },\n        closeBox() {\n            //子组件来请求父组件关闭弹窗\n            this.showAlerts.show = !this.showAlerts.show;\n        }\n    }\n};\n</script>\n<style lang=\"scss\" scoped>\n.invite-register {\n    margin: 40px auto;\n    max-width: 440px;\n\n    .title {\n        margin: 10px 0;\n        font-size: 28px;\n    }\n}\n\n.form-submit {\n    label {\n        margin-top: 10px;\n    }\n}\n\n.input-check {\n    margin: 10px auto;\n}\n\n.contain {\n    transform: translateX(-50%);\n    position: absolute;\n    left: 50%;\n    top: 20px;\n\n    .col-lg-6 {\n        flex: 0 0 100%;\n        max-width: 100%;\n    }\n\n    .full-width {\n        flex: 0 0 50% !important;\n    }\n}\n.margin-submit {\n    margin-top: 20px;\n}\n</style>\n"],"sourceRoot":"src/views/dashboard/inventory"}]}