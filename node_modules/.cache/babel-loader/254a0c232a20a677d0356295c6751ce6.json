{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/soldManager/soldVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/soldManager/soldVehicle.vue","mtime":1576663069000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport myMap from '@/components/map';\nexport default {\n  name: 'lots',\n  inject: ['reload'],\n  components: {\n    myMap: myMap\n  },\n  data: function data() {\n    return {\n      currentPage: 1,\n      pageSize: 10,\n      table: null,\n      curDel: null,\n      show: false,\n      btnGroup: {\n        btnFirst: this.$t('m.tip.b_cancel'),\n        btnSecond: this.$t('m.tip.b_ok')\n      },\n      tableFields: {\n        serviceNum: {\n          label: this.$t('m.sold_vehicle.sold_vehicle_id'),\n          class: \"text-center\"\n        },\n        photo: {\n          label: this.$t('m.vehicle.photo'),\n          class: \"text-center\"\n        },\n        info: {\n          label: this.$t('m.sold_vehicle.info'),\n          class: \"text-center\"\n        },\n        mileage: {\n          label: this.$t('m.sold_vehicle.mileage'),\n          class: \"text-center\"\n        },\n        days: {\n          label: this.$t('m.sold_vehicle.sold_days'),\n          class: \"text-center\"\n        },\n        actions: {\n          label: this.$t('m.vehicle.actions'),\n          class: \"text-center\"\n        }\n      },\n      total: 0,\n      totalPages: 0,\n      tipTitle: '',\n      showMap: false,\n      map: {}\n    };\n  },\n  mounted: function mounted() {\n    this.initData(this.currentPage);\n  },\n  methods: {\n    initData: function initData(page) {\n      var _this = this;\n\n      httpClient.get(\"/api/v1/saledvehicle/list?pageNo=\".concat(page)).then(function (response) {\n        if (response.data.data && response.data.code == 200) {\n          _this.total = response.data.data ? response.data.data.rowCount : 0;\n\n          _this.filterData(response.data.data);\n\n          _this.totalPages = response.data.data.totalPages;\n        }\n      });\n    },\n    filterData: function filterData(data) {\n      var _this2 = this;\n\n      this.table = data.datas.map(function (item) {\n        var year = item.vehicleYear ? item.vehicleYear : 'N/A';\n        var make = item.vehicleMake ? item.vehicleMake : 'N/A';\n        var model = item.vehicleModel ? item.vehicleModel : 'N/A';\n        var alias = item.alias ? \"-\" + item.alias : '';\n        var color = item.color ? item.color : 'N/A';\n        var trim = item.trim ? item.trim : 'N/A';\n        var stock = item.stockNumber ? item.stockNumber : 'N/A';\n        var mile = \"N/A\";\n\n        if (_this2.$i18n.locale === 'en-US') {\n          mile = (item.odbmeter * 0.0006214).toFixed(0);\n        } else {\n          mile = (item.odbmeter / 1000).toFixed(0);\n        }\n\n        return {\n          serviceNum: item.vehicleServiceNum,\n          photo: item.vehicleUrl ? item.vehicleUrl : require(\"@/assets/pages-img/placeholder.svg\"),\n          info: \"<p style=\\\"margin-bottom: 0px;line-height: 32px;\\\"><span style=\\\"color:rgb(32, 168, 216);font-weight: bolder; \\\">\".concat(year, \" \").concat(make, \" \").concat(model, \" \").concat(alias, \"</span></p><p style=\\\"line-height: 14px;margin-bottom: 6px;\\\">\").concat(color, \"\\u3001\").concat(trim, \"</p> <p style=\\\"line-height: 14px;margin-bottom: 6px;\\\"> \").concat(stock, \"</p> \"),\n          stock: item.stockNumber,\n          mileage: mile,\n          lat: item.lastLocationLat,\n          lng: item.lastLocationLng,\n          days: item.saledDays ? item.saledDays : 0,\n          id: item.id\n        };\n      });\n    },\n    prevPage: function prevPage() {\n      this.initData(this.currentPage > 1 ? this.currentPage - 1 : 1);\n    },\n    nextPage: function nextPage() {\n      this.initData(this.currentPage >= this.pageCount ? this.currentPage : this.currentPage + 1);\n    },\n    changePage: function changePage(page) {\n      this.initData(page);\n    },\n    showMapTip: function showMapTip(lat, lng) {\n      if (lat) {\n        this.map = {\n          lat: lat,\n          lng: lng,\n          area: [],\n          info: \"\"\n        };\n        this.showMap = true;\n      }\n    }\n  }\n};",{"version":3,"sources":["soldVehicle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn lots\">\n        <b-card>\n            <div slot=\"header\">\n                {{ $t('m.dashboard.vehicles') }}\n            </div>\n            <div class=\"content\">\n                <b-table class=\"mb-0 table-outline\" small striped responsive=\"sm\" :items=\"table\" hover :fields=\"tableFields\">\n                    <template slot=\"photo\" slot-scope=\"data\">\n                        <img :src=\"data.item.photo + '?width=300&height=300'\" class=\"photo\" width=\"100px\" height=\"100px\">\n                    </template>\n                    <template slot-scope=\"data\" slot=\"info\">\n                        <div class=\"cursor-point\" @click=\"$router.push('/sold-manager/detail/' + data.item.id)\" v-html=\"data.item.info\"></div>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\">\n                        <div class=\"mapLocation d-inline-block margin-right-4\"\n                             @click=\"showMapTip(data.item.lat, data.item.lng)\"><i\n                                class=\"cui cui-location-pin btn btn-sm btn-secondary color-white\"\n                                :class=\"data.item.lat || data.item.lng ? 'btn-success' : '' \"></i></div>\n                        <div class=\"btn btn-sm btn-info vehicledetail color-white d-inline-block\"\n                             @click=\"$router.push('/sold-manager/detail/' + data.item.id)\"><i class=\"fa fa-eye\"></i></div>\n                    </template>\n                </b-table>\n            </div>\n            <b-row v-if=\"total > 0\" class=\"margin-top-2\">\n                <b-col sm=\"4\" lg=\"4\">\n                    <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">\n                        {{ $t('m.common.show') }} {{10 * (currentPage - 1) + 1 }} {{ $t('m.common.to') }} {{currentPage === totalPages? total :currentPage * 10 }} {{ $t('m.common.of') }} {{total}} {{ $t('m.common.entries') }}\n                    </div>\n                </b-col>\n                <b-col sm=\"8\" lg=\"8\">\n                    <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"pageSize\" @input=\"changePage(currentPage)\"></b-pagination>\n                </b-col>\n            </b-row>\n        </b-card>\n\n        <b-modal ref=\"my-modal\" :title=\"tipTitle\" :ok-title=\"$t('m.tip.b_ok')\" v-model=\"showMap\" @ok=\"showMap = false\" class=\"show-map\" ok-only>\n            <myMap :map=\"map\"></myMap>\n        </b-modal>\n    </div>\n</template>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import myMap from '@/components/map';\n    export default {\n        name: 'lots',\n        inject: ['reload'],\n        components: {\n            myMap,\n        },\n        data() {\n            return {\n                currentPage: 1,\n                pageSize: 10,\n                table: null,\n                curDel: null,\n                show: false,\n                btnGroup: {\n                    btnFirst: this.$t('m.tip.b_cancel'),\n                    btnSecond: this.$t('m.tip.b_ok')\n                },\n                tableFields: {\n                    serviceNum: {\n                        label: this.$t('m.sold_vehicle.sold_vehicle_id'),\n                        class: \"text-center\"\n                    },\n                    photo: {\n                        label: this.$t('m.vehicle.photo'),\n                        class: \"text-center\"\n                    },\n                    info: {\n                        label: this.$t('m.sold_vehicle.info'),\n                        class: \"text-center\"\n                    },\n                    mileage: {\n                        label: this.$t('m.sold_vehicle.mileage'),\n                        class: \"text-center\"\n                    },\n                    days: {\n                        label: this.$t('m.sold_vehicle.sold_days'),\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: this.$t('m.vehicle.actions'),\n                        class: \"text-center\"\n                    }\n                },\n                total: 0,\n                totalPages:0,\n                tipTitle: '',\n                showMap: false,\n                map: {}\n\n            }\n        },\n        mounted() {\n            this.initData(this.currentPage);\n        },\n        methods: {\n            initData(page) {\n                httpClient.get(`/api/v1/saledvehicle/list?pageNo=${page}`).then(response => {\n                    if (response.data.data && response.data.code == 200) {\n                        this.total = response.data.data ? response.data.data.rowCount : 0;\n                        this.filterData(response.data.data);\n                        this.totalPages = response.data.data.totalPages;\n                    }\n                })\n            },\n            filterData(data){\n                this.table = data.datas.map(item => {\n                    let year = item.vehicleYear ? item.vehicleYear : 'N/A';\n                    let make = item.vehicleMake ? item.vehicleMake : 'N/A';\n                    let model = item.vehicleModel ? item.vehicleModel : 'N/A';\n                    let alias = item.alias ? \"-\" + item.alias : '';\n                    let color = item.color ? item.color : 'N/A';\n                    let trim = item.trim ? item.trim : 'N/A';\n                    let stock = item.stockNumber ? item.stockNumber : 'N/A';\n                    let mile = \"N/A\";\n                    if (this.$i18n.locale === 'en-US') {\n                        mile = (item.odbmeter * 0.0006214).toFixed(0)\n                    } else {\n                        mile = (item.odbmeter / 1000).toFixed(0)\n                    }\n                    return {\n                        serviceNum: item.vehicleServiceNum,\n                        photo: item.vehicleUrl ? item.vehicleUrl : require(\"@/assets/pages-img/placeholder.svg\"),\n                        info: `<p style=\"margin-bottom: 0px;line-height: 32px;\"><span style=\"color:rgb(32, 168, 216);font-weight: bolder; \">${year} ${make} ${model} ${alias}</span></p><p style=\"line-height: 14px;margin-bottom: 6px;\">${color}、${trim}</p> <p style=\"line-height: 14px;margin-bottom: 6px;\"> ${stock}</p> `,\n                        stock: item.stockNumber,\n                        mileage: mile,\n                        lat: item.lastLocationLat,\n                        lng: item.lastLocationLng,\n                        days: item.saledDays ? item.saledDays : 0,\n                        id: item.id,\n                    }\n                });\n            },\n            prevPage(){\n                this.initData(this.currentPage > 1  ? this.currentPage - 1 : 1)\n            },\n            nextPage(){\n                this.initData(this.currentPage >= this.pageCount  ? this.currentPage : this.currentPage + 1)\n            },\n            changePage(page) {\n                this.initData(page);\n            },\n            showMapTip(lat, lng) {\n                if (lat) {\n                    this.map = {\n                        lat: lat,\n                        lng: lng,\n                        area: [],\n                        info: \"\"\n                    };\n                    this.showMap = true;\n                }\n            },\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .card {\n        width: 100%;\n    }\n    .show-map {\n        .modal-dialog {\n            max-width: 80%;\n        }\n    }\n    .lots {\n        .margin-right-4 {\n            margin-right: 4px;\n        }\n        .margin-top-2 {\n            margin-top: 2%;\n        }\n        .photo {\n            object-fit: cover;\n            border-radius: 4px;\n        }\n        .cursor-point {\n            cursor: pointer;\n        }\n        .card-header span {\n            margin-left: 10px;\n        }\n        .card-header {\n            .add-lot {\n                float: right;\n            }\n        }\n        th, td {\n            height: 44px;\n            line-height: 44px;\n        }\n    }\n</style>\n"],"sourceRoot":"src/views/dashboard/soldManager"}]}