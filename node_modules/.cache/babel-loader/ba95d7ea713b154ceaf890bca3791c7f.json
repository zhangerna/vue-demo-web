{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testVehicle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/views/dashboard/testDrive/testVehicle.vue","mtime":1577066250000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport httpClient from \"@/utils/httpclient\";\nimport myMap from \"@components/map\";\nimport model from \"@/components/model\";\nexport default {\n  name: \"shopManager\",\n  components: {\n    myMap: myMap,\n    model: model\n  },\n  inject: [\"reload\"],\n  data: function data() {\n    return {\n      showModel: false,\n      modelTitle: \"\",\n      modelContent: \"\",\n      btnGroup: {\n        btnFirst: this.$t(\"m.tip.b_cancel\"),\n        btnSecond: this.$t(\"m.tip.confirm\")\n      },\n      showModel2: false,\n      modelTitle2: \"\",\n      modelContent2: \"\",\n      btnGroup2: {\n        btnFirst: \"\",\n        btnSecond: this.$t(\"m.tip.b_ok\")\n      },\n      map: {},\n      showMap: false,\n      verifyCarStatus: false,\n      verifyCarText: this.$t(\"m.cloud.verify_car_list\"),\n      verifyCarId: 0,\n      mapModalData: null,\n      searchText: \"\",\n      tableFields: {\n        vehicleServiceNum: {\n          label: this.$t(\"m.cloud.drive_vehicle_num\"),\n          class: \"text-center\"\n        },\n        photo: {\n          label: this.$t(\"m.vehicle.photo\"),\n          class: \"text-center\"\n        },\n        info: {\n          label: this.$t(\"m.sold_vehicle.info\"),\n          class: \"text-center\"\n        },\n        point: {\n          label: this.$t(\"m.cloud.point\"),\n          class: \"text-center\"\n        },\n        status: {\n          label: this.$t(\"m.cloud.status\"),\n          class: \"text-center\"\n        },\n        actions: {\n          label: this.$t(\"m.vehicle.actions\"),\n          class: \"text-center\"\n        }\n      },\n      table: null,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      totalPages: 0,\n      showChangeTip: false,\n      curStatus: \"all\",\n      curVehicleId: \"\",\n      curLot: \"all\",\n      curParkId: \"\",\n      changeErrorTip: false,\n      changeErrorMsg: \"\",\n      lotList: [],\n      allStatus: [{\n        id: \"10\",\n        name: this.$t(\"m.cloud.ready\")\n      }, {\n        id: \"20\",\n        name: this.$t(\"m.cloud.test_drive\")\n      }, {\n        id: \"30\",\n        name: this.$t(\"m.cloud.w_accept\")\n      }],\n      colorRed: \"color-red\"\n    };\n  },\n  mounted: function mounted() {\n    this.$route.query.type ? this.curStatus = this.$route.query.type : \"all\";\n    this.initData(this.currentPage);\n  },\n  methods: {\n    showDelVehicle: function showDelVehicle(id) {\n      this.curVehicleId = id;\n      this.modelTitle = this.$t(\"m.vehicle.actions_remind\");\n      this.modelContent = this.$t(\"m.tip.confirm_del_lot\");\n      this.showModel = true;\n    },\n    clickButton: function clickButton(type) {\n      if (type) {\n        this.delVehicle();\n      } else {\n        this.showModel = false;\n      }\n\n      this.showModel = false;\n    },\n    delVehicle: function delVehicle() {\n      var _this = this;\n\n      httpClient.post(\"/api/v1/clouddrive/vehicle/delete\", {\n        vehicleId: this.curVehicleId\n      }).then(function (res) {\n        if (res.data.code == 200 && res.data.data.result) {\n          window.location.reload();\n        } else {\n          _this.modelTitle2 = _this.$t(\"m.vehicle.actions_remind\");\n          _this.modelContent2 = _this.$t(\"m.tip.unfinished_order\");\n          _this.showModel2 = true;\n        }\n      });\n    },\n    clickButton2: function clickButton2() {\n      this.showModel2 = false;\n    },\n    initData: function initData(page) {\n      var _this2 = this;\n\n      httpClient.get(\"/api/v1/clouddrive/vehicle/pagelist?searchText=\".concat(this.searchText, \"&pageNo=\").concat(page, \"&pageSize=\").concat(this.pageSize).concat(this.curStatus == \"all\" ? \"\" : \"&drivingStatus=\" + this.curStatus)).then(function (response) {\n        if (response.data.code == 200 && response.data.data.datas) {\n          _this2.total = response.data.data.rowCount;\n\n          _this2.filterData(response.data.data);\n\n          _this2.totalPages = response.data.data.totalPages;\n        } else {\n          _this2.table = [];\n        }\n      });\n      httpClient.get(\"/api/v1/clouddrive/parkinglot/list\").then(function (res) {\n        if (res.data.code == 200) {\n          _this2.lotList = res.data.data;\n        }\n      });\n    },\n    changePoint: function changePoint() {\n      var _this3 = this;\n\n      if (this.curLot && this.curLot != \"all\") {\n        httpClient.post(\"/api/v1/clouddrive/vehicle/transferparking\", {\n          isRemove: this.curLot == \"remove\" ? 1 : \"\",\n          receiveParkingId: this.curLot == \"remove\" ? \"\" : this.curLot,\n          vehicleId: this.curVehicleId,\n          orgParkingid: this.curParkId\n        }).then(function (res) {\n          if (res.data.code == 200 && res.data.data.result) {\n            window.location.reload();\n          } else {\n            _this3.changeErrorMsg = res.data.data.content;\n            _this3.changeErrorTip = true;\n          }\n        });\n      }\n    },\n    openMap: function openMap(lat, lng, datas) {\n      if (lat) {\n        this.map = {\n          lat: lat,\n          lng: lng,\n          area: [],\n          vehicleInfo: {}\n        };\n        this.mapModalData = \"\".concat(datas.year).concat(datas.make).concat(datas.model).concat(datas.alias ? -datas.alias : \"\", \" | <span class=\\\"badge badge-success\\\">\").concat(datas.plat, \"</span>\").concat(datas.lastLocation ? datas.lastLocation : \"\");\n        this.showMap = true;\n      }\n    },\n    showChangePoint: function showChangePoint(vehicleId, parkId) {\n      this.curParkId = parkId;\n      this.curVehicleId = vehicleId;\n      this.showChangeTip = true;\n    },\n    filterData: function filterData(data) {\n      this.table = data.datas.map(function (item) {\n        return {\n          photo: item.photoPath ? item.photoPath : require(\"@/assets/pages-img/placeholder.svg\"),\n          year: item.year,\n          make: item.make,\n          model: item.model,\n          alias: item.alias,\n          color: item.color,\n          trim: item.trim,\n          stock: item.stockNumber,\n          plat: item.plat,\n          orderServiceNum: item.orderServiceNum,\n          point: item.parkingName,\n          status: item.orderStatus,\n          vehicleId: item.vehicleId,\n          vehicleStatus: item.testDrivingStatus,\n          parkingId: item.parkingLotId,\n          orderId: item.orderId,\n          id: item.id,\n          lat: item.lastLocationLat,\n          lng: item.lastLocationLng,\n          superComputingDevice: item.superComputingDevice,\n          vehicleServiceNum: item.vehicleServiceNum || \"N/A\"\n        };\n      });\n    },\n    searchStatus: function searchStatus() {\n      this.currentPage = 1;\n      this.initData(this.currentPage);\n    },\n    prevPage: function prevPage() {\n      this.initData(this.currentPage > 1 ? this.currentPage - 1 : 1);\n    },\n    nextPage: function nextPage() {\n      this.initData(this.currentPage >= this.pageCount ? this.currentPage : this.currentPage + 1);\n    },\n    changePage: function changePage(page) {\n      this.initData(page);\n    },\n    showVerifyModel: function showVerifyModel(id) {\n      //点击时取出order-id,赋值给data，验收接口调用时使用该id\n      this.verifyCarId = id;\n      this.verifyCarStatus = true;\n    },\n    verifyCar: function verifyCar() {\n      var _this4 = this;\n\n      httpClient.get(\"/api/v1/clouddrive/order/check?orderId=\".concat(this.verifyCarId)).then(function (res) {\n        _this4.verifyCarStatus = false;\n\n        if (res.data.code == 200 && res.data.data.result) {\n          _this4.reload();\n        } else {\n          alert(res.data.data.content);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["testVehicle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"animated fadeIn shop\">\n        <b-card class=\"custom-header\">\n            <div slot=\"header\">\n                {{ $t(\"m.dashboard.test_vehicle\") }}\n            </div>\n            <div class=\"content\">\n                <b-form-group class=\"search-data\">\n                    <b-input-group>\n                        <b-form-input type=\"text\" :placeholder=\"$t('m.test_vehicle.placeholder')\"\n                                      v-model=\"searchText\"></b-form-input>\n                        <b-input-group-append>\n                            <b-button variant=\"primary\" @click=\"searchStatus()\"><i class=\"fa fa-search\"></i>{{\n                                $t(\"m.vehicle.b_search\") }}\n                            </b-button>\n                        </b-input-group-append>\n                    </b-input-group>\n                </b-form-group>\n\n                <div class=\"select-status\">\n                    <p>{{ $t(\"m.cloud.vehicle_status\") }}</p>\n                    <select class=\"form-control d-inline-block select-width\" v-model=\"curStatus\"\n                            @change=\"searchStatus()\">\n                        <option value=\"all\" selected>{{ $t(\"m.cloud.all_status\") }}</option>\n                        <option v-for=\"(item, key) in allStatus\" :key=\"key\" :value=\"item.id\">{{ item.name }}</option>\n                    </select>\n                </div>\n\n                <b-table class=\"mb-0 table-outline table-responsive-sm\" small striped responsive=\"sm\" :items=\"table\"\n                         hover :fields=\"tableFields\">\n                    <template slot=\"photo\" slot-scope=\"data\">\n                        <img :src=\"data.item.photo + '?width=300&height=300'\"\n                             class=\"img-object-cover\" width=\"100px\" height=\"100px\"/>\n                    </template>\n                    <template slot=\"info\" slot-scope=\"data\">\n                        <p class=\"hot-text-blue font-weight-bold\"\n                           @click=\"$router.push('/test-drive/test-vehicle/detail/' + data.item.vehicleId)\">{{\n                            data.item.year | checkNan }} {{ data.item.make | checkNan  }} {{\n                            data.item.model | checkNan  }} {{ data.item.alias ? \"-\" + data.item.alias : \"\"\n                            }}</p>\n                        <p>{{ data.item.color | checkNan  }}, {{\n                            data.item.trim | checkNan  }}</p>\n                        <p style=\"margin-bottom: 1px;\">\n                            {{ data.item.stock | checkNan }}\n                            <template v-if=\"data.item.plat\">\n                                <span class=\"plat\">{{ data.item.plat }}</span>\n                            </template>\n                        </p>\n                    </template>\n                    <template slot=\"point\" slot-scope=\"data\">\n                        <template v-if=\"data.item.point\">\n                            <p @click=\"$router.push('/test-drive/test-point/detail/' + data.item.parkingId)\" class=\"hot-text-blue font-weight-bold\">{{ data.item.point }}</p>\n                        </template>\n                        <template v-else>\n                            <p class=\"margin-b-1\">{{ $t(\"m.cloud.undistribute\") }}</p>\n                        </template>\n                        <p class=\"hot-text-blue\" @click=\"showChangePoint(data.item.vehicleId, data.item.parkingId)\">{{\n                            $t(\"m.cloud.change_point\") }}</p>\n                    </template>\n                    <template slot=\"status\" slot-scope=\"data\">\n                        <template v-if=\"data.item.superComputingDevice\">\n                            <div class=\"bind-device\">{{ $t(\"m.vehicle.has_bound\") }}</div>\n                        </template>\n                        <template v-else>\n                            <div class=\"unbind-device\">{{ $t(\"m.vehicle.unbound\") }}</div>\n                        </template>\n                        <template v-if=\"data.item.vehicleStatus == 10\">\n                            <p class=\"margin-b-1\">\n                                <span class=\"badge badge-primary\">{{ $t(\"m.cloud.ready\") }}</span>\n                            </p>\n                        </template>\n                        <template v-if=\"data.item.vehicleStatus == 20\">\n                            <span class=\"badge badge-success\">{{ $t(\"m.cloud.test_drive\") }}</span>\n                            <p @click=\"$router.push('/test-drive/test-vehicle/detail/' + data.item.vehicleId)\"\n                               class=\"hot-text-blue margin-b-1\">\n                                {{ $t(\"m.report.order_num\") + \":\" }} {{ data.item.orderServiceNum }}</p>\n                        </template>\n                        <template v-if=\"data.item.vehicleStatus == 30\">\n                            <span class=\"badge badge-warning\">{{ $t(\"m.cloud.w_accept\") }}</span>\n                            <p @click=\"$router.push('/test-drive/test-vehicle/detail/' + data.item.vehicleId)\"\n                               class=\"margin-b-1 hot-text-blue\">\n                                {{ $t(\"m.report.order_num\") + \":\" }} {{ data.item.orderServiceNum }}</p>\n                            <p class=\"margin-b-1 hot-text-blue\"\n                               @click=\"showVerifyModel(data.item.orderId)\">{{ $t(\"m.cloud.vehicle_accept\") }}</p>\n                        </template>\n                    </template>\n                    <template slot=\"actions\" slot-scope=\"data\" class=\"d-inline-block margin-2\">\n                        <div v-b-tooltip.hover :title=\"$t('m.common.position_detail')\"><i\n                                class=\"cui cui-location-pin btn btn-sm btn-secondary\"\n                                :class=\"data.item.lat ? 'btn-success' : ''\"\n                                @click=\"openMap(data.item.lat, data.item.lng, data.item)\"></i></div>\n                        <div v-b-tooltip.hover :title=\"$t('m.vehicle_bind.detail')\"\n                             class=\"vehicledetail d-inline-block margin-2\"\n                             @click=\"$router.push('/test-drive/test-vehicle/detail/' + data.item.vehicleId)\">\n                            <i class=\"btn btn-info text-white btn-sm fa fa-eye\"></i>\n                        </div>\n                        <div v-b-tooltip.hover :title=\"$t('m.common.edit')\"\n                             class=\"vehicleedit d-inline-block margin-2\"\n                             @click=\"$router.push('/test-drive/test-vehicle/edit/' + data.item.vehicleId)\">\n                            <i class=\"fa fa-edit btn btn-sm btn-info text-white\"></i>\n                        </div>\n                        <div v-b-tooltip.hover :title=\"$t('m.cloud.delete')\" class=\"btn btn-sm btn-danger color-white\"\n                             @click=\"showDelVehicle(data.item.vehicleId)\"><i\n                                class=\"cui cui-trash\"></i></div>\n                    </template>\n                </b-table>\n            </div>\n        </b-card>\n        <b-row>\n            <b-col sm=\"4\" lg=\"4\">\n                <div class=\"dataTables_info\" id=\"DataTables0\" role=\"status\" aria-live=\"polite\">{{ $t(\"m.common.show\") }}\n                    {{ 10 * (currentPage - 1) + 1 }} {{ $t(\"m.common.to\") }} {{ currentPage === totalPages ? total :\n                    currentPage * 10 }} {{ $t(\"m.common.of\") }} {{ total }} {{ $t(\"m.common.entries\") }}\n                </div>\n            </b-col>\n            <b-col sm=\"8\" lg=\"8\">\n                <b-pagination align=\"right\" :total-rows=\"total\" v-model=\"currentPage\" :per-page=\"10\"\n                              @input=\"changePage(currentPage)\"></b-pagination>\n            </b-col>\n        </b-row>\n        <b-modal class=\"show-map-modal\" ref=\"my-modal\" v-model=\"showChangeTip\" :title=\"$t('m.cloud.change_tip_title')\"\n                 :ok-title=\"$t('m.tip.confirm')\" :cancel-title=\"$t('m.tip.b_cancel')\" @ok=\"changePoint\">\n            <p class=\"text-left margin-b-1\">{{ $t(\"m.cloud.change_tip_content\") }}</p>\n            <p class=\"text-left margin-b-1\">{{ $t(\"m.cloud.change_tip_content1\") }}</p>\n            <select class=\"model-select form-control\" v-model=\"curLot\">\n                <option value=\"all\" selected>{{ $t(\"m.cloud.choice_point\") }}</option>\n                <option value=\"remove\" :class=\"colorRed\">{{ $t(\"m.cloud.remove_point\") }}</option>\n                <option v-for=\"(item, key) in lotList\" :key=\"key\" :value=\"item.id\">{{ item.parkingName }}</option>\n            </select>\n        </b-modal>\n        <b-modal ref=\"my-modal\" v-model=\"changeErrorTip\" :title=\"$t('m.cloud.cant_change_point')\"\n                 :ok-title=\"$t('m.tip.b_ok')\" :cancel-title=\"$t('m.tip.b_cancel')\" ok-only>\n            {{ changeErrorMsg }}\n        </b-modal>\n\n        <b-modal :title=\"mapModalData\" ref=\"my-modal\" v-model=\"showMap\" :ok-title=\"$t('m.cloud.close_modal')\"\n                 class=\"show-map map-test-list\" @ok=\"showMap = false\" ok-only>\n            <myMap :map=\"map\"></myMap>\n        </b-modal>\n\n        <b-modal :title=\"$t('m.cloud.vehicle_accept')\" ref=\"my-modal-verify-car\" v-model=\"verifyCarStatus\"\n                 :ok-title=\"$t('m.tip.confirm')\" :cancel-title=\"$t('m.tip.b_cancel')\" @ok=\"verifyCar\">\n            <p class=\"text-center\">{{ verifyCarText }}</p>\n        </b-modal>\n        <model :show=\"showModel\" :title=\"modelTitle\" :content=\"modelContent\" :buttonText=\"btnGroup\"\n               @closeRemindBox=\"clickButton\"></model>\n        <model :show=\"showModel2\" :title=\"modelTitle2\" :content=\"modelContent2\" :buttonText=\"btnGroup2\"\n               @closeRemindBox=\"clickButton2\"></model>\n    </div>\n</template>\n\n<script>\n    import httpClient from \"@/utils/httpclient\";\n    import myMap from \"@components/map\";\n    import model from \"@/components/model\";\n\n    export default {\n        name: \"shopManager\",\n        components: {\n            myMap,\n            model\n        },\n        inject: [\"reload\"],\n        data() {\n            return {\n                showModel: false,\n                modelTitle: \"\",\n                modelContent: \"\",\n                btnGroup: {\n                    btnFirst: this.$t(\"m.tip.b_cancel\"),\n                    btnSecond: this.$t(\"m.tip.confirm\")\n                },\n                showModel2: false,\n                modelTitle2: \"\",\n                modelContent2: \"\",\n                btnGroup2: {\n                    btnFirst: \"\",\n                    btnSecond: this.$t(\"m.tip.b_ok\")\n                },\n                map: {},\n                showMap: false,\n                verifyCarStatus: false,\n                verifyCarText: this.$t(\"m.cloud.verify_car_list\"),\n                verifyCarId: 0,\n                mapModalData: null,\n                searchText: \"\",\n                tableFields: {\n                    vehicleServiceNum: {\n                        label: this.$t(\"m.cloud.drive_vehicle_num\"),\n                        class: \"text-center\"\n                    },\n                    photo: {\n                        label: this.$t(\"m.vehicle.photo\"),\n                        class: \"text-center\"\n                    },\n                    info: {\n                        label: this.$t(\"m.sold_vehicle.info\"),\n                        class: \"text-center\"\n                    },\n                    point: {\n                        label: this.$t(\"m.cloud.point\"),\n                        class: \"text-center\"\n                    },\n                    status: {\n                        label: this.$t(\"m.cloud.status\"),\n                        class: \"text-center\"\n                    },\n                    actions: {\n                        label: this.$t(\"m.vehicle.actions\"),\n                        class: \"text-center\"\n                    }\n                },\n                table: null,\n                currentPage: 1,\n                pageSize: 10,\n                total: 0,\n                totalPages: 0,\n                showChangeTip: false,\n                curStatus: \"all\",\n                curVehicleId: \"\",\n                curLot: \"all\",\n                curParkId: \"\",\n                changeErrorTip: false,\n                changeErrorMsg: \"\",\n                lotList: [],\n                allStatus: [\n                    {\n                        id: \"10\",\n                        name: this.$t(\"m.cloud.ready\")\n                    },\n                    {\n                        id: \"20\",\n                        name: this.$t(\"m.cloud.test_drive\")\n                    },\n                    {\n                        id: \"30\",\n                        name: this.$t(\"m.cloud.w_accept\")\n                    }\n                ],\n                colorRed: \"color-red\"\n            };\n        },\n        mounted() {\n            this.$route.query.type ? (this.curStatus = this.$route.query.type) : \"all\";\n            this.initData(this.currentPage);\n        },\n        methods: {\n            showDelVehicle(id) {\n                this.curVehicleId = id;\n                this.modelTitle = this.$t(\"m.vehicle.actions_remind\");\n                this.modelContent = this.$t(\"m.tip.confirm_del_lot\");\n                this.showModel = true;\n            },\n            clickButton(type) {\n                if (type) {\n                    this.delVehicle();\n                } else {\n                    this.showModel = false;\n                }\n                this.showModel = false;\n            },\n            delVehicle() {\n                httpClient\n                    .post(\"/api/v1/clouddrive/vehicle/delete\", {\n                        vehicleId: this.curVehicleId\n                    })\n                    .then(res => {\n                        if (res.data.code == 200 && res.data.data.result) {\n                            window.location.reload();\n                        } else {\n                            this.modelTitle2 = this.$t(\"m.vehicle.actions_remind\");\n                            this.modelContent2 = this.$t(\"m.tip.unfinished_order\");\n                            this.showModel2 = true;\n                        }\n                    });\n            },\n            clickButton2() {\n                this.showModel2 = false;\n            },\n            initData(page) {\n                httpClient.get(`/api/v1/clouddrive/vehicle/pagelist?searchText=${this.searchText}&pageNo=${page}&pageSize=${this.pageSize}${this.curStatus == \"all\" ? \"\" : \"&drivingStatus=\" + this.curStatus}`).then(response => {\n                    if (response.data.code == 200 && response.data.data.datas) {\n                        this.total = response.data.data.rowCount;\n                        this.filterData(response.data.data);\n                        this.totalPages = response.data.data.totalPages;\n                    } else {\n                        this.table = [];\n                    }\n                });\n                httpClient.get(`/api/v1/clouddrive/parkinglot/list`).then(res => {\n                    if (res.data.code == 200) {\n                        this.lotList = res.data.data;\n                    }\n                });\n            },\n            changePoint() {\n                if (this.curLot && this.curLot != \"all\") {\n                    httpClient\n                        .post(`/api/v1/clouddrive/vehicle/transferparking`, {\n                            isRemove: this.curLot == \"remove\" ? 1 : \"\",\n                            receiveParkingId: this.curLot == \"remove\" ? \"\" : this.curLot,\n                            vehicleId: this.curVehicleId,\n                            orgParkingid: this.curParkId\n                        })\n                        .then(res => {\n                            if (res.data.code == 200 && res.data.data.result) {\n                                window.location.reload();\n                            } else {\n                                this.changeErrorMsg = res.data.data.content;\n                                this.changeErrorTip = true;\n                            }\n                        });\n                }\n            },\n            openMap(lat, lng, datas) {\n                if (lat) {\n                    this.map = {\n                        lat: lat,\n                        lng: lng,\n                        area: [],\n                        vehicleInfo: {}\n                    };\n                    this.mapModalData = `${datas.year}${datas.make}${datas.model}${datas.alias ? -datas.alias : \"\"} | <span class=\"badge badge-success\">${datas.plat}</span>${datas.lastLocation ? datas.lastLocation : \"\"}`;\n                    this.showMap = true;\n                }\n            },\n            showChangePoint(vehicleId, parkId) {\n                this.curParkId = parkId;\n                this.curVehicleId = vehicleId;\n                this.showChangeTip = true;\n            },\n            filterData(data) {\n                this.table = data.datas.map(item => {\n                    return {\n                        photo: item.photoPath ? item.photoPath : require(\"@/assets/pages-img/placeholder.svg\"),\n                        year: item.year,\n                        make: item.make,\n                        model: item.model,\n                        alias: item.alias,\n                        color: item.color,\n                        trim: item.trim,\n                        stock: item.stockNumber,\n                        plat: item.plat,\n                        orderServiceNum: item.orderServiceNum,\n                        point: item.parkingName,\n                        status: item.orderStatus,\n                        vehicleId: item.vehicleId,\n                        vehicleStatus: item.testDrivingStatus,\n                        parkingId: item.parkingLotId,\n                        orderId: item.orderId,\n                        id: item.id,\n                        lat: item.lastLocationLat,\n                        lng: item.lastLocationLng,\n                        superComputingDevice: item.superComputingDevice,\n                        vehicleServiceNum: item.vehicleServiceNum || \"N/A\"\n                    };\n                });\n            },\n            searchStatus() {\n                this.currentPage = 1;\n                this.initData(this.currentPage);\n            },\n            prevPage() {\n                this.initData(this.currentPage > 1 ? this.currentPage - 1 : 1);\n            },\n            nextPage() {\n                this.initData(this.currentPage >= this.pageCount ? this.currentPage : this.currentPage + 1);\n            },\n            changePage(page) {\n                this.initData(page);\n            },\n            showVerifyModel(id) {\n                //点击时取出order-id,赋值给data，验收接口调用时使用该id\n                this.verifyCarId = id;\n                this.verifyCarStatus = true;\n            },\n            verifyCar() {\n                httpClient.get(`/api/v1/clouddrive/order/check?orderId=${this.verifyCarId}`).then(res => {\n                    this.verifyCarStatus = false;\n                    if (res.data.code == 200 && res.data.data.result) {\n                        this.reload();\n                    } else {\n                        alert(res.data.data.content);\n                    }\n                });\n            }\n        }\n    };\n</script>\n\n\n<style lang=\"scss\" scoped>\n    .model-select {\n        width: 90%;\n        margin: 0 auto;\n        margin-top: 40px;\n    }\n    .select-width {\n        width: 150px;\n    }\n    .margin-2 {\n        margin: 2px;\n    }\n    .hot-text-blue {\n        margin-bottom: 1px;\n        text-decoration: underline;\n        color: #63c2de;cursor: pointer\n    }\n    .margin-b-1 {\n        margin-bottom: 1px;\n    }\n    .img-object-cover {\n        object-fit: cover;\n        border-radius: 4px;\n    }\n    .state-card {\n        background: yellow;\n        color: #000000;\n        display: inline-block;\n        padding: 4px;\n        border-radius: 4px;\n        margin-bottom: 8px;\n    }\n\n    .select-status {\n        margin-bottom: 20px;\n\n        p {\n            margin-bottom: 5px;\n        }\n    }\n\n    .search-data {\n        width: 40%;\n    }\n\n    .plat {\n        color: white;\n        background: #63c2de;\n        padding: 2px;\n        border-radius: 8px;\n    }\n\n    .state-card-green {\n        background: #4dbd74;\n        color: #ffffff;\n    }\n\n    .unbind-device {\n        color: red;\n    }\n\n    .color-red {\n        color: #c00 !important;\n    }\n</style>\n"],"sourceRoot":"src/views/dashboard/testDrive"}]}