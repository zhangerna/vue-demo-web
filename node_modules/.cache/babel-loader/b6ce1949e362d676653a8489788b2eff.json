{"remainingRequest":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js!/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nonda/nonda/nonda-saas-web/src/components/searchMapForGaoDe.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nonda/nonda/nonda-saas-web/src/components/searchMapForGaoDe.vue","mtime":1577095653000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nonda/nonda/nonda-saas-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { wgs84ToGcjo2, calCenter } from \"@/utils/coordtransform\";\nimport httpClient from '@/utils/httpclient';\nimport AMap from 'AMap';\nexport default {\n  name: \"SearchMapForGaode\",\n  props: [\"map\", \"from\"],\n  data: function data() {\n    return {\n      mapInfo: {\n        lots: [],\n        lat: 0,\n        lng: 0,\n        vehicleInfo: [],\n        showMult: true\n      },\n      lat: \"\",\n      lng: \"\",\n      myMap: {},\n      myInfoWindow: null,\n      safeLayer: null,\n      roadLayer: null,\n      source: null\n    };\n  },\n  watch: {\n    map: function map(newVal) {\n      this.mapInfo.lots = newVal.lots;\n      this.mapInfo.vehicleInfo = newVal.vehicles;\n      this.getMyMap();\n    },\n    from: function from(newVal) {\n      this.source = newVal;\n    }\n  },\n  mounted: function mounted() {\n    this.getMyMap();\n  },\n  methods: {\n    changeMapType: function changeMapType(type) {\n      if (type == 'default') {\n        this.roadLayer.hide();\n        this.safeLayer.hide();\n      } else {\n        this.roadLayer.show();\n        this.safeLayer.show();\n      }\n    },\n    getMyMap: function getMyMap() {\n      var _this = this;\n\n      var centerPoint;\n      var _arr = [];\n\n      if (this.mapInfo.vehicleInfo.length > 0) {\n        this.mapInfo.vehicleInfo.map(function (item) {\n          if (item.lastLocationLat && item.lastLocationLng) {\n            _arr.push({\n              lng: item.lastLocationLng,\n              lat: item.lastLocationLat\n            });\n          }\n        });\n        centerPoint = calCenter(_arr);\n      }\n\n      this.myMap = new AMap.Map(\"gaode-map\", {\n        //实例化一个地图\n        zoom: 12,\n        viewMode: '3D',\n        center: centerPoint\n      });\n      this.roadLayer = new AMap.TileLayer.RoadNet({});\n      this.myMap.addControl(new AMap.ControlBar());\n      this.myMap.addControl(new AMap.Scale({\n        visible: true\n      }));\n      this.myMap.add(this.roadLayer);\n      var area2 = [];\n\n      if (this.mapInfo.lots.length > 0) {\n        this.mapInfo.lots.map(function (item) {\n          //给地图加上指定停车红色区域\n          var myArr = [];\n          item.areaCoordinate.map(function (val) {\n            var temp = val.split(\",\");\n            myArr.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1])));\n          });\n          area2.push(myArr);\n        });\n      }\n\n      var polygon = new AMap.Polygon({\n        //给地图加上指定停车红色区域\n        path: area2,\n        strokeColor: '#FF0000',\n        strokeOpacity: 0.8,\n        strokeWeight: 2,\n        fillColor: '#FF0000',\n        fillOpacity: 0.35\n      });\n      this.myMap.add(polygon);\n      this.myInfoWindow = new AMap.InfoWindow({\n        offset: new AMap.Pixel(0, 0)\n      }); //初始化地图infoWindow\n\n      if (this.mapInfo.showMult) {\n        this.mapInfo.vehicleInfo.map(function (item) {\n          if (item.lastLocationLat && item.lastLocationLng) {\n            _this.addMarkers(item);\n          }\n        });\n        this.myMap.setFitView();\n      }\n\n      this.myMap.setFitView();\n    },\n    addMarkers: function addMarkers(item) {\n      console.log(item);\n      var lnglat = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n      var marker = new AMap.Marker({\n        position: lnglat,\n        map: this.myMap,\n        icon: new AMap.Icon({\n          image: item.currentVoltage && item.currentVoltage.toFixed(1) < 11.7 ? \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\" : \"https://pic.zus.ai/saas/vehicle_normal.svg\",\n          size: new AMap.Size(20, 30),\n          imageSize: new AMap.Size(20, 30)\n        })\n      });\n      marker.content = '';\n      marker.item = item;\n      marker.on('click', this.markerClick);\n    },\n    markerClick: function markerClick(e) {\n      var _this2 = this;\n\n      //地图标记点击事件\n      var lang = '';\n\n      if (this.$i18n.locale === 'zh-CN') {\n        lang = 'China';\n      } else {\n        lang = 'US';\n      }\n\n      var item = e.target.item;\n      var link = '/api/v1/getlastLocation?lastlocationlat=' + item.lastLocationLat + '&lastlocationlng=' + item.lastLocationLng + '&country=' + lang;\n      httpClient.get(link).then(function (res) {\n        if (res.data.code === 200) {\n          var p = item.currentVoltage < 11.7 ? \"<p style=\\\"margin-bottom:6px;font-size: 12px;\\\">\".concat(_this2.$t('m.common.voltage'), \": <span style=\\\"color:red\\\"><i class=\\\"fa fa-exclamation-triangle\\\"></i>\").concat(item.currentVoltage ? item.currentVoltage.toFixed(1) + 'V' : '', \"</span></p>\") : \"<p style=\\\"margin-bottom:6px;font-size: 12px;\\\">\".concat(_this2.$t('m.common.voltage'), \":\").concat(item.currentVoltage ? item.currentVoltage.toFixed(1) + 'V' : '', \"</p>\");\n          var img = item.photoUrl ? \"<img style=\\\"background: #3a4149\\\" src=\\\"\".concat(item.photoUrl, \"\\\" width=\\\"100%\\\" alt=\\\"\\\">\") : '';\n          var contentString = \"<div>\\n                        \".concat(img, \"\\n                        <a target=\\\"_blank\\\" href='\").concat(item.saleStatus === 1 ? \"/inventory/vehicle\" : \"/sold-manager/sold-vehicle\", \"/detail/\").concat(item.vehicleId, \"'><h5 id=\\\"firstHeading\\\" class=\\\"firstHeading\\\">\").concat(item.year ? item.year : 'N/A', \" \").concat(item.make ? item.make : 'N/A', \" \").concat(item.model ? item.model : 'N/A', \" \").concat(item.alias ? \"-\" + item.alias : '', \"</h5></a>\\n                        <p style=\\\"margin-bottom:6px;font-size: 12px\\\">VIN:\").concat(item.vin, \"</p>\\n                        \").concat(p, \"\\n                        <p style=\\\"margin-bottom:6px;font-size: 12px\\\">\").concat(_this2.$t('m.common.last_location'), \":\").concat(res.data.data.locationName, \"</p>\\n                        <p style=\\\"margin-bottom:6px;font-size: 12px\\\">\").concat(_this2.$t('m.common.last_update'), \":\").concat(_this2.getYMDString(item.locationTime), \"</p>\\n                        </div>\");\n\n          _this2.myInfoWindow.setContent(contentString);\n\n          _this2.myInfoWindow.open(_this2.myMap, e.target.getPosition());\n        }\n      });\n    },\n    getYMDString: function getYMDString(time) {\n      //格式化时间\n      if (time) {\n        var date = new Date(time);\n        var Y = date.getFullYear() + ' ';\n        var M = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\n        var D = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\n        var h = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();\n        var m = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();\n        return M + '/' + D + '/' + Y + ' ' + h + ':' + m + ' ';\n      } else {\n        return '';\n      }\n    }\n  }\n};",{"version":3,"sources":["searchMapForGaoDe.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"searchGaode\">\n        <div class=\"map-btn-group\">\n            <ul>\n                <li @click=\"changeMapType('default')\">地图 |</li>\n                <li @click=\"changeMapType('sate')\">&nbsp;卫星图像</li>\n            </ul>\n        </div>\n        <div class=\"amap\" id=\"gaode-map\">\n\n        </div>\n    </div>\n</template>\n\n<script>\n    import { wgs84ToGcjo2,calCenter } from \"@/utils/coordtransform\";\n    import httpClient from '@/utils/httpclient';\n    import AMap from 'AMap'\n    export default {\n        name: \"SearchMapForGaode\",\n        props: [\"map\", \"from\"],\n        data() {\n            return {\n                mapInfo: {\n                    lots:[],\n                    lat:0,\n                    lng:0,\n                    vehicleInfo:[],\n                    showMult:true\n                },\n                lat: \"\",\n                lng: \"\",\n                myMap:{},\n                myInfoWindow:null,\n                safeLayer: null,\n                roadLayer: null,\n                source: null\n            }\n        },\n        watch: {\n            map: function (newVal) {\n                this.mapInfo.lots = newVal.lots;\n                this.mapInfo.vehicleInfo = newVal.vehicles;\n                this.getMyMap();\n            },\n            from: function (newVal) {\n                this.source = newVal;\n            }\n        },\n        mounted(){\n            this.getMyMap()\n        },\n        methods: {\n            changeMapType(type) {\n                if (type == 'default') {\n                    this.roadLayer.hide();\n                    this.safeLayer.hide();\n                } else {\n                    this.roadLayer.show();\n                    this.safeLayer.show();\n                }\n            },\n            getMyMap(){\n                let centerPoint;\n                let _arr = [];\n                if(this.mapInfo.vehicleInfo.length > 0){\n                    this.mapInfo.vehicleInfo.map(item => {\n                        if(item.lastLocationLat && item.lastLocationLng ){\n                            _arr.push({\n                                lng: item.lastLocationLng,\n                                lat: item.lastLocationLat\n                            })\n                        }\n                    });\n                    centerPoint = calCenter(_arr);\n                }\n\n                this.myMap = new AMap.Map(\"gaode-map\", {//实例化一个地图\n                    zoom: 12,\n                    viewMode: '3D',\n                    center: centerPoint\n                });\n                this.roadLayer = new AMap.TileLayer.RoadNet({\n                });\n                this.myMap.addControl(new AMap.ControlBar());\n                this.myMap.addControl(new AMap.Scale({\n                    visible: true\n                }));\n                this.myMap.add(this.roadLayer);\n                let area2 = [];\n                if(this.mapInfo.lots.length > 0){\n                    this.mapInfo.lots.map(item => {//给地图加上指定停车红色区域\n                        let myArr=[];\n                        item.areaCoordinate.map(val =>{\n                            let temp = val.split(\",\");\n                            myArr.push(wgs84ToGcjo2(Number(temp[0]), Number(temp[1]) ))\n                        });\n                        area2.push(myArr)\n                    });\n                }\n\n                let polygon = new AMap.Polygon({//给地图加上指定停车红色区域\n                    path: area2,\n                    strokeColor: '#FF0000',\n                    strokeOpacity: 0.8,\n                    strokeWeight: 2,\n                    fillColor: '#FF0000',\n                    fillOpacity: 0.35\n                });\n                this.myMap.add(polygon);\n                this.myInfoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, 0)});//初始化地图infoWindow\n                if (this.mapInfo.showMult) {\n                    this.mapInfo.vehicleInfo.map(item => {\n                        if(item.lastLocationLat && item.lastLocationLng ){\n                            this.addMarkers(item);\n                        }\n                    })\n                    this.myMap.setFitView();\n                }\n                this.myMap.setFitView();\n            },\n\n            addMarkers(item){\n                console.log(item)\n                let lnglat = wgs84ToGcjo2(item.lastLocationLng, item.lastLocationLat);\n                let marker = new AMap.Marker({\n                    position: lnglat,\n                    map: this.myMap,\n                    icon: new AMap.Icon({\n                        image: item.currentVoltage && item.currentVoltage.toFixed(1) < 11.7 ? \"https://cdn2.shopify.com/s/files/1/0703/1149/files/Location_03580bd1-f466-4803-a69e-720a098b08a5.svg?828688\" : \"https://pic.zus.ai/saas/vehicle_normal.svg\",\n                        size: new AMap.Size(20, 30),\n                        imageSize: new AMap.Size(20,30),\n                    })\n                });\n                marker.content = '';\n                marker.item = item;\n                marker.on('click', this.markerClick);\n            },\n\n            markerClick(e) {//地图标记点击事件\n                let lang='';\n                if(this.$i18n.locale === 'zh-CN'){\n                    lang = 'China'\n                }else{\n                    lang = 'US'\n                }\n                let item = e.target.item;\n                let link = '/api/v1/getlastLocation?lastlocationlat='+item.lastLocationLat+'&lastlocationlng='+item.lastLocationLng+'&country='+lang;\n                httpClient.get(link).then(res=>{\n                    if(res.data.code === 200){\n                        let p = item.currentVoltage < 11.7 ? `<p style=\"margin-bottom:6px;font-size: 12px;\">${ this.$t('m.common.voltage') }: <span style=\"color:red\"><i class=\"fa fa-exclamation-triangle\"></i>${item.currentVoltage ? item.currentVoltage.toFixed(1) + 'V' : ''}</span></p>` :`<p style=\"margin-bottom:6px;font-size: 12px;\">${ this.$t('m.common.voltage') }:${ item.currentVoltage ?  item.currentVoltage.toFixed(1) + 'V' : ''}</p>`;\n                        let img = item.photoUrl ?  `<img style=\"background: #3a4149\" src=\"${ item.photoUrl }\" width=\"100%\" alt=\"\">` : ''\n                        let contentString = `<div>\n                            ${img}\n                            <a target=\"_blank\" href='${item.saleStatus === 1 ?\"/inventory/vehicle\":\"/sold-manager/sold-vehicle\"}/detail/${item.vehicleId}'><h5 id=\"firstHeading\" class=\"firstHeading\">${item.year ? item.year :'N/A'} ${item.make ? item.make :'N/A'} ${item.model ? item.model:'N/A'} ${item.alias? \"-\" + item.alias:''}</h5></a>\n                            <p style=\"margin-bottom:6px;font-size: 12px\">VIN:${item.vin}</p>\n                            ${p}\n                            <p style=\"margin-bottom:6px;font-size: 12px\">${this.$t('m.common.last_location')}:${res.data.data.locationName}</p>\n                            <p style=\"margin-bottom:6px;font-size: 12px\">${this.$t('m.common.last_update')}:${this.getYMDString(item.locationTime)}</p>\n                            </div>`;\n                        this.myInfoWindow.setContent(contentString);\n                        this.myInfoWindow.open(this.myMap, e.target.getPosition());\n                    }\n                })\n\n            },\n            getYMDString(time) {//格式化时间\n                if(time){\n                    var date = new Date(time);\n                    var Y = date.getFullYear() + ' ';\n                    var M = (date.getMonth() + 1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1);\n                    var D = date.getDate() < 10 ? '0' + date.getDate() : date.getDate() ;\n                    var h = date.getHours() < 10 ? '0' + date.getHours() : date.getHours() ;\n                    var m = date.getMinutes() < 10 ? '0' + date.getMinutes()  : date.getMinutes();\n                    return  M + '/' + D + '/' + Y + ' ' + h +':'+ m +  ' ';\n                }else{\n                    return  '';\n                }\n            },\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .searchGaode {\n        #gaode-map {\n            width: 100%;\n            height: 65vh;\n            margin-bottom: 5vh;\n            .amap-info-contentContainer {\n                width: 100%;\n                border-radius: 10px;\n                .amap-info-content{\n                    padding: 20px 10px 0;\n                }\n                .amap-info-close{\n                    right:10px !important;\n                }\n            }\n            .amap-info-shadowContainer + div {\n                bottom: 30px!important;\n            }\n        }\n        .map-btn-group {\n            position: absolute;\n            margin-top: 10px;\n            z-index: 1;\n            margin-left: 20px;\n            ul {\n                color: grey;\n                padding: 0 20px;\n                height: 40px;\n                line-height: 40px;\n                background: #ffffff;\n                font-size: 18px;\n                li {\n                    cursor: pointer;\n                    display: inline-block;\n                }\n            }\n        }\n        .content-window-card {\n            position: relative;\n            box-shadow: none;\n            bottom: 0;\n            left: 0;\n            width: auto;\n            padding: 0;\n        }\n\n        .content-window-card p {\n            height: 2rem;\n        }\n\n        .custom-info {\n            border: solid 1px silver;\n        }\n\n        div.info-top {\n            position: relative;\n            background: none repeat scroll 0 0 #F9F9F9;\n            border-bottom: 1px solid #CCC;\n            border-radius: 5px 5px 0 0;\n        }\n\n        div.info-top div {\n            display: inline-block;\n            color: #333333;\n            font-size: 14px;\n            font-weight: bold;\n            line-height: 31px;\n            padding: 0 10px;\n        }\n\n        div.info-top img {\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            transition-duration: 0.25s;\n        }\n\n        div.info-top img:hover {\n            box-shadow: 0px 0px 5px #000;\n        }\n\n        div.info-middle {\n            font-size: 12px;\n            padding: 10px 6px;\n            line-height: 20px;\n        }\n\n        div.info-bottom {\n            height: 0px;\n            width: 100%;\n            clear: both;\n            text-align: center;\n        }\n\n        div.info-bottom img {\n            position: relative;\n            z-index: 104;\n        }\n\n        span {\n            margin-left: 5px;\n            font-size: 11px;\n        }\n\n        .info-middle img {\n            float: left;\n            margin-right: 6px;\n        }\n    }\n\n</style>\n"],"sourceRoot":"src/components"}]}