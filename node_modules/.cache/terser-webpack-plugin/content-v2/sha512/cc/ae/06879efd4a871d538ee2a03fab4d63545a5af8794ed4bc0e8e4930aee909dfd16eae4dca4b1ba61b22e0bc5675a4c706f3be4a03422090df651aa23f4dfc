{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"alerts\"],{\"032a\":function(t,e,a){e=t.exports=a(\"24fb\")(!1),e.push([t.i,\".card-header span{margin-left:10px}.alerts .bv-d-xs-down-none{display:none}.alerts .modal .modal-body button{color:#fff;background-color:#20a8d8;border-color:#20a8d8}\",\"\"])},\"19e1\":function(t,e,a){\"use strict\";var n=a(\"38ce\"),s=a.n(n);s.a},\"38ce\":function(t,e,a){var n=a(\"032a\");\"string\"===typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var s=a(\"499e\").default;s(\"590d154e\",n,!0,{sourceMap:!1,shadowMode:!1})},\"89f6\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"animated fadeIn alerts\"},[a(\"b-card\",[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"i\",{staticClass:\"nav-icon cui cui-bell\"}),a(\"span\",[t._v(\"Alerts\")])]),a(\"b-table\",{staticClass:\"mb-0 table-outline\",attrs:{small:\"\",striped:\"\",responsive:\"sm\",items:t.table,hover:\"\",fields:t.tableFields,\"head-variant\":\"light\"},scopedSlots:t._u([{key:\"status\",fn:function(e){return[a(\"span\",{staticClass:\"badge badge-pill\",class:1==e.item.status?\"badge-success\":\"badge-danger\"},[t._v(\"\\n                    \"+t._s(1==e.item.status?\"Solved\":\"Unsolved\")+\"\\n                \")])]}},{key:\"action\",fn:function(e){return[a(\"div\",{staticClass:\"btn btn-sm btn-info m-1\",on:{click:function(a){return t.$router.push(\"/alerts/detail/\"+e.item.id)}}},[a(\"i\",{staticClass:\"fa fa-eye\"})]),1==e.item.status?[a(\"div\",{staticClass:\"btn btn-sm btn-update btn-secondary\",attrs:{disabled:\"\"}},[a(\"i\",{staticClass:\"cui fa fa-wrench\"})])]:[a(\"div\",{staticClass:\"btn btn-sm btn-update btn-success\",on:{click:function(a){return t.updateVehicle(e.item.id)}}},[a(\"i\",{staticClass:\"cui fa fa-wrench\"})])]]}}])}),t.total>0?a(\"b-row\",[a(\"b-col\",{attrs:{sm:\"4\",lg:\"4\"}},[a(\"div\",{staticClass:\"dataTables_info\",attrs:{id:\"DataTables0\",role:\"status\",\"aria-live\":\"polite\"}},[t._v(\"\\n                    Showing \"+t._s(10*(t.currentPage-1)+1)+\" to \"+t._s(t.currentPage===t.pageCount?t.total:10*t.currentPage)+\" of \"+t._s(t.total)+\" entries\\n                \")])]),a(\"b-col\",{attrs:{sm:\"8\",lg:\"8\"}},[a(\"b-pagination\",{attrs:{align:\"right\",\"total-rows\":t.total,\"per-page\":t.pageSize},on:{input:function(e){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:\"currentPage\"}})],1)],1):t._e()],1),a(\"b-modal\",{ref:\"my-modal\",attrs:{\"hide-footer\":\"\",title:\"Success\"},on:{ok:function(e){t.show=!1}},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"div\",[t._v(\"Update Success! \")]),a(\"b-button\",{staticClass:\"btn btn-primary\",staticStyle:{float:\"right\"},on:{click:function(e){return t.reload()}}},[t._v(\"Ok\")])],1)],1)},s=[],o=a(\"3159\"),r=a(\"c466\"),i={name:\"alerts\",data:function(){return{currentPage:1,pageSize:10,total:0,show:!1,tableFields:{alertType:{label:\"Alert Type\",class:\"text-center\"},vehicle:{label:\"Vehicle\",class:\"text-center\"},stockNo:{label:\"Stock NO.\",class:\"text-center\"},time:{label:\"Time\",class:\"text-center\"},status:{label:\"Status\",class:\"text-center\"},action:{label:\"Actions\",class:\"text-center\"}},data:null,table:null,pageCount:0,updateInfo:\"\"}},mounted:function(){this.axiosData(this.currentPage)},methods:{axiosData:function(t){var e=this;o[\"a\"].post(\"/api/v1/alert/list?pageNo=\".concat(t,\"&pageSize=10\")).then(function(t){console.log(t),e.currentPage=t.data.data.pageNo,e.total=t.data.data.rowCount,e.data=t.data.data,e.pageCount=t.data.data.totalPages,e.filterData()})},filterData:function(){this.table=this.data.datas.map(function(t){var e=t.year?t.year:\"N/A\",a=t.make?t.make:\"N/A\",n=t.model?t.model:\"N/A\";return{alertType:t.alertTypeName,vehicle:\"\".concat(e,\" \").concat(a,\" \").concat(n),stockNo:t.stockNum?t.stockNum:\"N/A\",time:t.createTime?Object(r[\"a\"])(t.createTime):\"N/A\",status:t.alertStatus,id:t.id}})},changeFL:function(t){this.axiosData(\"f\"==t?1:this.pageCount)},prevPage:function(){this.axiosData(this.currentPage>1?this.currentPage-1:1)},nextPage:function(){this.axiosData(this.currentPage>=this.pageCount?this.currentPage:this.currentPage+1)},changePage:function(t){console.log(t),this.axiosData(t)},reload:function(){window.location.reload()},updateVehicle:function(t){var e=this;o[\"a\"].post(\"/api/v1/alert/update/status\",{alertId:t}).then(function(t){200==t.data.code?(e.updateInfo=\"The alert status has been modified\",e.show=!0):(e.updateInfo=\"update error\",e.show=!0)}).catch(function(t){})}}},c=i,l=(a(\"19e1\"),a(\"2877\")),u=Object(l[\"a\"])(c,n,s,!1,null,null,null);e[\"default\"]=u.exports},c466:function(t,e,a){\"use strict\";function n(t){var e=new Date(t),a=e.getFullYear()+\" \",n=(e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1)+\"/\",s=e.getDate()<10?\"0\"+e.getDate()+\" \":e.getDate()+\"/\",o=e.getHours()<10?\"0\"+e.getHours():e.getHours()+\":\",r=e.getMinutes()<10?\"0\"+e.getMinutes():e.getMinutes()+\" \",i=\"AM\";return e.getHours()>=12&&(o=e.getHours()-12+\":\",i=\"PM\"),n+s+a+o+r+i}function s(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?\"0\"+e.getDate()+\" \":e.getDate();return a+\"-\"+n+\"-\"+s}function o(t,e){return Math.ceil((e-t)/1e3/3600/24)}function r(t){var e=new Date(t),a=new Array(\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Spt\",\"Oct\",\"Nov\",\"Dec\"),n=new Array(\"Sun\",\"Mon\",\"Tus\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"),s=e.getMonth(),o=e.getDay(),r=e.getDate();return n[o]+\" , \"+a[s]+\" \"+r+\" , \"+e.getFullYear()}a.d(e,\"a\",function(){return n}),a.d(e,\"d\",function(){return s}),a.d(e,\"b\",function(){return o}),a.d(e,\"c\",function(){return r})}}]);","extractedComments":[]}