{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"profile\"],{\"17d1\":function(e,a,t){\"use strict\";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t(\"div\",{staticClass:\"animated fadeIn profile-content\"},[t(\"b-card\",{staticClass:\"profile\",attrs:{header:\"Profile\"}},[t(\"div\",{staticClass:\"content\"},[t(\"div\",{staticClass:\"group-img\"},[t(\"img\",{attrs:{src:e.img,width:\"160px\",height:\"160px\"}}),t(\"input\",{ref:\"upload\",attrs:{type:\"file\",id:\"uploadAvatar\",accept:\"image/jpeg,image/png,image/jpg\"},on:{change:function(a){return e.savefile(a)}}})]),t(\"div\",[t(\"b-form-group\",[t(\"label\",{attrs:{for:\"email\"}},[e._v(\"Email\")]),t(\"b-form-input\",{attrs:{id:\"email\",type:\"email\",required:\"\",disabled:\"\",autocomplete:\"email\"},model:{value:e.email,callback:function(a){e.email=a},expression:\"email\"}})],1),t(\"b-row\",[t(\"b-col\",{attrs:{sm:\"6\"}},[t(\"b-form-group\",[t(\"label\",{attrs:{for:\"firstname\"}},[e._v(\"Firstname\")]),t(\"b-form-input\",{attrs:{id:\"firstname\",type:\"text\",placeholder:\"Enter Firstname..\",required:\"\"},model:{value:e.firstname,callback:function(a){e.firstname=a},expression:\"firstname\"}})],1)],1),t(\"b-col\",[t(\"b-form-group\",[t(\"label\",{attrs:{for:\"lastname\"}},[e._v(\"Lastname\")]),t(\"b-form-input\",{attrs:{id:\"lastname\",type:\"text\",placeholder:\"Enter Lastname..\",required:\"\"},model:{value:e.lastname,callback:function(a){e.lastname=a},expression:\"lastname\"}})],1)],1)],1),t(\"b-form-group\",[t(\"label\",{attrs:{for:\"phone\"}},[e._v(\"Phone\")]),t(\"b-form-input\",{attrs:{id:\"phone\",type:\"text\",placeholder:\"Enter Lastname..\",required:\"\"},model:{value:e.phone,callback:function(a){e.phone=a},expression:\"phone\"}})],1),t(\"b-form-group\",[t(\"label\",{attrs:{for:\"Role\"}},[e._v(\"Role\")]),t(\"b-form-input\",{attrs:{id:\"role\",type:\"text\",disabled:\"\",required:\"\"},model:{value:e.role,callback:function(a){e.role=a},expression:\"role\"}})],1),t(\"b-form-group\",[t(\"label\",[e._v(\"Dealership\")]),t(\"b-form-input\",{attrs:{type:\"text\",disabled:\"\",required:\"\"},model:{value:e.dealship,callback:function(a){e.dealship=a},expression:\"dealship\"}})],1),t(\"b-form-group\",[t(\"label\",[e._v(\"Dealership Group\")]),t(\"b-form-input\",{attrs:{type:\"text\",disabled:\"\",required:\"\"},model:{value:e.dealGroup,callback:function(a){e.dealGroup=a},expression:\"dealGroup\"}})],1),t(\"b-form-group\",[t(\"button\",{staticClass:\"btn btn-primary\",on:{click:e.saveUserInfo}},[e._v(\"\\n                        Save\\n                    \")]),t(\"button\",{staticClass:\"btn btn-ghost-danger\",on:{click:function(a){return e.$router.push(\"/change-password\")}}},[e._v(\"\\n                        Change Password\\n                    \")])])],1)])]),t(\"b-modal\",{ref:\"my-modal\",attrs:{title:\"Profile Saved Successfully\"},on:{ok:function(a){e.showTip=!1}},model:{value:e.showTip,callback:function(a){e.showTip=a},expression:\"showTip\"}}),t(\"b-modal\",{ref:\"my-modal\",attrs:{title:\"Profile Saved Failed\"},on:{ok:function(a){e.showETip=!1}},model:{value:e.showETip,callback:function(a){e.showETip=a},expression:\"showETip\"}})],1)},r=[],i=t(\"f499\"),s=t.n(i),n=t(\"3159\"),l={name:\"profile\",inject:[\"reload\"],data:function(){return{data:null,email:\"\",firstname:\"\",lastname:\"\",phone:\"\",role:\"\",dealGroup:\"\",dealship:\"\",img:\"\",showTip:!1,showETip:!1}},mounted:function(){var e=this;this.img=this.$store.state.userInfo.avatarUrl,n[\"a\"].post(\"/api/v1/getUserById\",{userId:this.$store.state.userInfo.userId}).then(function(a){e.email=a.data.data.userEmail?a.data.data.userEmail:\"\",e.firstname=a.data.data.firstName,e.lastname=a.data.data.lastName,e.phone=a.data.data.phone,e.role=a.data.data.role,e.dealship=a.data.data.storeName,e.dealGroup=a.data.data.tenantName})},methods:{savefile:function(e){var a=this,t=e.target.files,o=new FormData;o.append(\"image\",t[0]),n[\"a\"].post(\"/api/v1/user/updateAvatar\",o).then(function(e){if(200===e.data.code){a.img=e.data.data.avatarUrl;var t={avatarUrl:a.img,firstName:a.firstname,lastName:a.lastname};a.$store.dispatch(\"user_Personal_Info\",t);var o=JSON.parse(localStorage.getItem(\"user_info\"));o.avatarUrl=a.img,localStorage.setItem(\"user_info\",s()(o)),a.showTip=!0}else a.showETip=!0})},saveUserInfo:function(){var e=this;this.firstname&&this.lastname&&this.phone&&n[\"a\"].post(\"/api/v1/updateUserDetail\",{firstName:this.firstname,lastName:this.lastname,userPhone:this.phone}).then(function(a){if(200===a.data.code){var t={avatarUrl:e.img,firstName:e.firstname,lastName:e.lastname};e.$store.dispatch(\"user_Personal_Info\",t);var o=JSON.parse(localStorage.getItem(\"user_info\"));o.firstName=e.firstname,o.lastName=e.lastname,localStorage.setItem(\"user_info\",s()(o)),e.showTip=!0}}).catch(function(){e.showETip=!0})}}},p=l,m=(t(\"503a\"),t(\"2877\")),d=Object(m[\"a\"])(p,o,r,!1,null,null,null);a[\"default\"]=d.exports},\"503a\":function(e,a,t){\"use strict\";var o=t(\"9a1eb\"),r=t.n(o);r.a},\"9a1eb\":function(e,a,t){var o=t(\"b205\");\"string\"===typeof o&&(o=[[e.i,o,\"\"]]),o.locals&&(e.exports=o.locals);var r=t(\"499e\").default;r(\"51438967\",o,!0,{sourceMap:!1,shadowMode:!1})},b205:function(e,a,t){a=e.exports=t(\"24fb\")(!1),a.push([e.i,\".profile .content{max-width:600px;margin:0 auto}.profile .content img{border-radius:50%;cursor:pointer}.profile .content .group-img{position:relative;margin-bottom:20px;text-align:center}.profile .content .group-img input{opacity:0;height:160px;width:160px;position:absolute;z-index:1;margin-left:-160px}.profile .content .btn-ghost-danger{margin-left:20px}.profile-content .modal-body,.profile-content .modal-footer .btn-secondary{display:none}\",\"\"])}}]);","extractedComments":[]}