{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"add-lots\"],{\"11e9\":function(t,e,a){var o=a(\"52a7\"),n=a(\"4630\"),r=a(\"6821\"),i=a(\"6a99\"),s=a(\"69a8\"),l=a(\"c69a\"),d=Object.getOwnPropertyDescriptor;e.f=a(\"9e1e\")?d:function(t,e){if(t=r(t),e=i(e,!0),l)try{return d(t,e)}catch(a){}if(s(t,e))return n(!o.f.call(t,e),t[e])}},\"13d5\":function(t,e,a){var o=a(\"2958\");\"string\"===typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=a(\"499e\").default;n(\"873f9f38\",o,!0,{sourceMap:!1,shadowMode:!1})},\"1f55\":function(t,e,a){\"use strict\";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"draw-map\"},[a(\"b-row\",[a(\"b-col\",{attrs:{sm:\"6\"}},[a(\"b-form-group\",[a(\"label\",[t._v(\"Lot Name\")]),a(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Lot Name\"},model:{value:t.parkingName,callback:function(e){t.parkingName=e},expression:\"parkingName\"}})],1)],1),a(\"b-col\",{attrs:{sm:\"6\"}},[a(\"b-form-group\",[a(\"label\",[t._v(\"Lot Address\")]),a(\"b-input-group\",[a(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Lot Name\"},model:{value:t.address,callback:function(e){t.address=e},expression:\"address\"}}),a(\"b-input-group-append\",[a(\"b-button\",{attrs:{variant:\"secondary\",id:\"locate\"},on:{click:function(e){return t.getLocate()}}},[t._v(\"Locate\")])],1)],1)],1)],1)],1),a(\"p\",[t._v(\"Draw a geo fence around your lot.\")]),a(\"div\",{attrs:{id:\"map-canvas\"}}),a(\"model\",{attrs:{show:t.show,title:\"Warning\",content:t.content,buttonText:t.btnGroup},on:{closeRemindBox:t.hideTip}}),a(\"b-button\",{staticClass:\"btn btn-primary submit\",attrs:{disabled:t.disable},on:{click:function(e){return t.submitData()}}},[t._v(\"Submit\")])],1)},n=[],r=a(\"5d738\"),i=a.n(r),s=(a(\"c5f6\"),a(\"28a5\"),a(\"3159\")),l=a(\"4287\"),d=a.n(l),c=a(\"ebd9\"),p={name:\"drawMap\",props:[\"data\"],components:{model:c[\"a\"]},watch:{data:function(t){this.parkingName=t.parkingName,this.address=t.address,this.areaCoord=t.areaCoordinate,this.centerCoordinate=t.centerCoordinate,this.initEdit()}},data:function(){return{disable:!0,mapObj:null,infoWindow:null,geocoders:null,drawManager:null,polygonCompete:null,locations:[],parkingName:\"\",centerCoordinate:null,address:\"\",show:!1,content:\"\",btnGroup:{btnSecond:\"OK\"},areaCoord:null,bermudaTriangle:null,isMapChanged:!1}},mounted:function(){this.$route.params.id||this.initialize()},methods:{initEdit:function(){this.disable=!1;var t=this.centerCoordinate.split(\" \");this.mapObj=new d.a.maps.Map(document.getElementById(\"map-canvas\"),{zoom:15,center:{lat:Number(t[1]),lng:Number(t[0])},mapTypeId:d.a.maps.MapTypeId.SATELLITE});var e=document.createElement(\"div\");this.centerControl(e),e.index=1,this.mapObj.controls[d.a.maps.ControlPosition.TOP_CENTER].push(e);var a=[],o=!0,n=!1,r=void 0;try{for(var s,l=i()(this.areaCoord);!(o=(s=l.next()).done);o=!0){var c=s.value;a.push({lat:Number(c.split(\",\")[1]),lng:Number(c.split(\",\")[0])})}}catch(p){n=!0,r=p}finally{try{o||null==l.return||l.return()}finally{if(n)throw r}}this.bermudaTriangle=new d.a.maps.Polygon({paths:a,strokeColor:\"#FF0000\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#FF0000\",fillOpacity:.35}),this.bermudaTriangle.setMap(this.mapObj),this.initDrawManager()},hideTip:function(){this.show=!1,this.disable=!0},centerControl:function(t){var e=this,a=document.createElement(\"div\");a.style.backgroundColor=\"#fff\",a.style.border=\"2px solid #fff\",a.style.borderRadius=\"2px\",a.style.boxShadow=\"0 2px 6px rgba(0,0,0,.3)\",a.style.cursor=\"pointer\",a.style.marginTop=\"10px\",a.style.marginBottom=\"22px\",a.style.textAlign=\"center\",a.title=\"Click to draw a geo fence\",t.appendChild(a);var o=document.createElement(\"div\");o.style.color=\"rgb(25,25,25)\",o.style.fontFamily=\"Roboto,Arial,sans-serif\",o.style.fontSize=\"16px\",o.style.lineHeight=\"38px\",o.style.paddingLeft=\"5px\",o.style.paddingRight=\"5px\",o.innerHTML=\"Start Draw\",a.appendChild(o);var n=document.createElement(\"div\");n.style.display=\"none\",n.style.backgroundColor=\"#fff\",n.style.border=\"2px solid #fff\",n.style.borderRadius=\"2px\",n.style.boxShadow=\"0 2px 6px rgba(0,0,0,.3)\",n.style.cursor=\"pointer\",n.style.marginTop=\"10px\",n.style.marginBottom=\"22px\",n.style.textAlign=\"center\",n.title=\"Click to redraw the geo fence\",t.appendChild(n);var r=document.createElement(\"div\");r.style.color=\"rgb(25,25,25)\",r.style.fontFamily=\"Roboto,Arial,sans-serif\",r.style.fontSize=\"16px\",r.style.lineHeight=\"38px\",r.style.paddingLeft=\"5px\",r.style.paddingRight=\"5px\",r.innerHTML=\"Redraw\",n.appendChild(r);var i=new d.a.maps.Polyline({strokeColor:\"#0000FF\",strokeOpacity:.8,strokeWeight:2});i.setMap(this.mapObj),a.addEventListener(\"click\",function(){a.style.display=\"none\",n.style.display=\"block\",e.drawManager.setOptions({drawingMode:\"polygon\",fillColor:\"#fff\"}),e.$route.params.id&&e.bermudaTriangle.setMap(null)}),n.addEventListener(\"click\",function(){e.polygonCompete.setMap(null),e.drawManager.setOptions({drawingMode:\"polygon\",fillColor:\"#fff\"})})},initDrawManager:function(){var t=this;this.drawManager=new d.a.maps.drawing.DrawingManager({drawingMode:\"\",drawingControl:!1,circleOptions:{fillColor:\"#ffff00\",fillOpacity:1,strokeWeight:5,clickable:!1,editable:!0,zIndex:1},polygonOptions:{strokeColor:\"#FF0000\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#FF0000\",fillOpacity:.35,editable:!0}}),this.drawManager.setMap(this.mapObj),d.a.maps.event.addListener(this.drawManager,\"polygoncomplete\",function(e){t.polygonCompete=e,t.drawManager.setOptions({drawingMode:\"\"})}),d.a.maps.event.addListener(this.drawManager,\"polygoncomplete\",function(e){var a=e.getPath().getArray();t.showLonLat(a)})},initialize:function(){var t=this,e={zoom:15,mapTypeId:d.a.maps.MapTypeId.SATELLITE};this.mapObj=new d.a.maps.Map(document.getElementById(\"map-canvas\"),e),this.infoWindow=new d.a.maps.InfoWindow,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude};t.infoWindow.setPosition(a),t.infoWindow.setContent(\"Current Location\"),t.mapObj.setCenter(a);var o=document.createElement(\"div\");t.centerControl(o),o.index=1,t.geocoders=new d.a.maps.Geocoder,t.mapObj.controls[d.a.maps.ControlPosition.TOP_CENTER].push(o)},function(){this.handleError(!0)}):this.handleError(!1),this.initDrawManager()},handleError:function(t){this.infoWindow.setPosition(this.mapObj.getCenter()),this.infoWindow.setContent(t?\"Error: The Geolocation service failed.\":\"Error: Your browser doesn't support geolocation.\"),this.infoWindow.open(this.mapObj)},showTip:function(t){this.show=!0,this.content=\"The geo fence selected overlaps with the existing lot \".concat(t,\"Please redraw.\")},getLocate:function(){var t=this;this.checkInput(),this.address&&this.geocoders.geocode({address:this.address},function(e,a){\"OK\"==a?(t.mapObj.setCenter(e[0].geometry.location),new d.a.maps.Marker({map:t.mapObj,position:e[0].geometry.location})):alert(\"Geocode was not successful for the following reason: \"+a)})},checkInput:function(){this.parkingName&&this.address?this.disable=!1:this.disable=!0},showLonLat:function(t){var e=this,a=[];t.map(function(t){a.push(t)}),this.areaCoord=a,a[t.length]=t[0],s[\"a\"].post(\"/api/v1/lot/isRepeated\",{parkingName:this.parkingName,address:this.address,areaCoordinate:a}).then(function(t){null!=t.data.data?(e.isMapChanged=!0,e.showTip(t.data.data)):e.disable=!1})},submitData:function(){var t=this;this.checkInput();var e=\"\";e=this.data?\"/api/v1/lot/update\":\"/api/v1/lot/insert\",s[\"a\"].post(e,{parkingName:this.parkingName,address:this.address,areaCoordinate:!0===this.isMapChanged?this.areaCoord:[],id:this.$route.params.id}).then(function(e){200==e.data.code?t.$router.push(\"/lots\"):(t.show=!0,t.content=\"Lot Name: <strong>\".concat(e.data.data,\"</strong> Existed.\"))})}}},u=p,f=(a(\"820a\"),a(\"2877\")),m=Object(f[\"a\"])(u,o,n,!1,null,null,null);e[\"a\"]=m.exports},2958:function(t,e,a){e=t.exports=a(\"24fb\")(!1),e.push([t.i,\".draw-map #map-canvas{height:40vh}.draw-map .submit{background-color:#20a8d8!important;border-color:#20a8d8!important}\",\"\"])},\"469f\":function(t,e,a){a(\"6c1c\"),a(\"1654\"),t.exports=a(\"7d7b\")},5868:function(t,e,a){\"use strict\";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"animated fadeIn add-lots\"},[a(\"b-card\",{attrs:{header:\"Add a New Lot\"}},[a(\"div\",{staticClass:\"content\"},[a(\"draw-map\")],1)])],1)},n=[],r=a(\"1f55\"),i={name:\"addLots\",components:{drawMap:r[\"a\"]},data:function(){return{}}},s=i,l=a(\"2877\"),d=Object(l[\"a\"])(s,o,n,!1,null,null,null);e[\"default\"]=d.exports},\"5d738\":function(t,e,a){t.exports=a(\"469f\")},\"5dbc\":function(t,e,a){var o=a(\"d3f4\"),n=a(\"8b97\").set;t.exports=function(t,e,a){var r,i=e.constructor;return i!==a&&\"function\"==typeof i&&(r=i.prototype)!==a.prototype&&o(r)&&n&&n(t,r),t}},\"679e\":function(t,e,a){var o=a(\"8c50\");\"string\"===typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=a(\"499e\").default;n(\"6b677c8a\",o,!0,{sourceMap:!1,shadowMode:!1})},\"7d7b\":function(t,e,a){var o=a(\"e4ae\"),n=a(\"7cd6\");t.exports=a(\"584a\").getIterator=function(t){var e=n(t);if(\"function\"!=typeof e)throw TypeError(t+\" is not iterable!\");return o(e.call(t))}},\"820a\":function(t,e,a){\"use strict\";var o=a(\"13d5\"),n=a.n(o);n.a},\"8b97\":function(t,e,a){var o=a(\"d3f4\"),n=a(\"cb7c\"),r=function(t,e){if(n(t),!o(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,o){try{o=a(\"9b43\")(Function.call,a(\"11e9\").f(Object.prototype,\"__proto__\").set,2),o(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return r(t,a),e?t.__proto__=a:o(t,a),t}}({},!1):void 0),check:r}},\"8c50\":function(t,e,a){e=t.exports=a(\"24fb\")(!1),e.push([t.i,\".mo-module .modal-footer button.btn-secondary[data-v-36f4ae4e]{display:none}.fade-enter[data-v-36f4ae4e]{opacity:0}.fade-enter-active[data-v-36f4ae4e]{-webkit-transition:opacity .3s;transition:opacity .3s}.fade-leave-active[data-v-36f4ae4e]{-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}#popup-edit[data-v-36f4ae4e]{width:100%;height:100%;position:fixed;left:0;top:0;z-index:2222}#popup-edit .popup-content[data-v-36f4ae4e]{width:100%;position:fixed;z-index:10;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;top:25%}#popup-edit .bg[data-v-36f4ae4e]{width:100%;height:100%;position:fixed;left:0;top:0;background:rgba(10,53,68,.5);z-index:8}\",\"\"])},9093:function(t,e,a){var o=a(\"ce10\"),n=a(\"e11e\").concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return o(t,n)}},\"976a\":function(t,e,a){\"use strict\";var o=a(\"679e\"),n=a.n(o);n.a},aa77:function(t,e,a){var o=a(\"5ca1\"),n=a(\"be13\"),r=a(\"79e5\"),i=a(\"fdef\"),s=\"[\"+i+\"]\",l=\"​\",d=RegExp(\"^\"+s+s+\"*\"),c=RegExp(s+s+\"*$\"),p=function(t,e,a){var n={},s=r(function(){return!!i[t]()||l[t]()!=l}),d=n[t]=s?e(u):i[t];a&&(n[a]=d),o(o.P+o.F*s,\"String\",n)},u=p.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(d,\"\")),2&e&&(t=t.replace(c,\"\")),t};t.exports=p},c5f6:function(t,e,a){\"use strict\";var o=a(\"7726\"),n=a(\"69a8\"),r=a(\"2d95\"),i=a(\"5dbc\"),s=a(\"6a99\"),l=a(\"79e5\"),d=a(\"9093\").f,c=a(\"11e9\").f,p=a(\"86cc\").f,u=a(\"aa77\").trim,f=\"Number\",m=o[f],h=m,b=m.prototype,g=r(a(\"2aeb\")(b))==f,y=\"trim\"in String.prototype,v=function(t){var e=s(t,!1);if(\"string\"==typeof e&&e.length>2){e=y?e.trim():u(e,3);var a,o,n,r=e.charCodeAt(0);if(43===r||45===r){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+e}for(var i,l=e.slice(2),d=0,c=l.length;d<c;d++)if(i=l.charCodeAt(d),i<48||i>n)return NaN;return parseInt(l,o)}}return+e};if(!m(\" 0o1\")||!m(\"0b1\")||m(\"+0x1\")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(g?l(function(){b.valueOf.call(a)}):r(a)!=f)?i(new h(v(e)),a,m):v(e)};for(var _,w=a(\"9e1e\")?d(h):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),C=0;w.length>C;C++)n(h,_=w[C])&&!n(m,_)&&p(m,_,c(h,_));m.prototype=b,b.constructor=m,a(\"2aba\")(o,f,m)}},ebd9:function(t,e,a){\"use strict\";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"transition\",{attrs:{name:\"fade\"}},[t.show?a(\"div\",{attrs:{id:\"popup-edit\"}},[a(\"div\",{staticClass:\"modal-dialog modal-md popup-content\"},[a(\"div\",{staticClass:\"modal-content\",attrs:{role:\"document\",id:\"__BVID__42___BV_modal_content_\",\"aria-labelledby\":\"__BVID__42___BV_modal_header_\",\"aria-describedby\":\"__BVID__42___BV_modal_body_\"}},[a(\"header\",{staticClass:\"modal-header\",attrs:{id:\"__BVID__42___BV_modal_header_\"}},[a(\"h5\",{staticClass:\"modal-title\"},[t._v(t._s(t.title))]),a(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:function(e){return t.closePopup()}}},[t._v(\"×\")])]),a(\"div\",{staticClass:\"modal-body\",attrs:{id:\"__BVID__42___BV_modal_body_\"}},[a(\"div\",[t._v(t._s(t.content))])]),a(\"footer\",{staticClass:\"modal-footer\",attrs:{id:\"__BVID__42___BV_modal_footer_\"}},[t.buttonText.btnFirst?a(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.closePopup()}}},[t._v(t._s(t.buttonText.btnFirst)+\"\\n                  \")]):t._e(),a(\"button\",{staticClass:\"btn btn-primary\",attrs:{type:\"button\"},on:{click:function(e){return t.closePopup(t.type=\"ok\",t.buttonText.userId)}}},[t._v(t._s(t.buttonText.btnSecond)+\"\\n                  \")])])])]),a(\"div\",{staticClass:\"bg\",on:{click:function(e){return t.closePopup()}}})]):t._e()])},n=[],r={name:\"modal\",props:[\"show\",\"title\",\"content\",\"buttonText\"],methods:{closePopup:function(t,e){this.$emit(\"closeRemindBox\",t,e)}}},i=r,s=(a(\"976a\"),a(\"2877\")),l=Object(s[\"a\"])(i,o,n,!1,null,\"36f4ae4e\",null);e[\"a\"]=l.exports},fdef:function(t,e){t.exports=\"\\t\\n\\v\\f\\r   ᠎             　\\u2028\\u2029\\ufeff\"}}]);","extractedComments":[]}