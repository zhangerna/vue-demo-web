{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"lots\"],{\"1f47\":function(t,a,e){\"use strict\";var n=e(\"ff26\"),i=e.n(n);i.a},\"469f\":function(t,a,e){e(\"6c1c\"),e(\"1654\"),t.exports=e(\"7d7b\")},\"5d73\":function(t,a,e){t.exports=e(\"469f\")},\"607c\":function(t,a,e){\"use strict\";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{attrs:{id:\"map\"}})},i=[],o=(e(\"28a5\"),e(\"c5f6\"),e(\"5d73\")),s=e.n(o),l=e(\"4287\"),r=e.n(l),c={name:\"googleMap\",props:[\"map\"],data:function(){return{mapInfo:null,mapObj:null,marker:null,polygon:null,markers:[]}},watch:{map:function(t){this.mapInfo=t,this.initMap()}},methods:{addMarker:function(t,a,e){var n=new r.a.maps.InfoWindow({content:e}),i=new r.a.maps.Marker({position:t,map:this.mapObj,animation:r.a.maps.Animation.DROP,title:a});this.markers.push(i),i.addListener(\"click\",function(){n.open(this.mapObj,i)})},initMap:function t(){var a=this,e=[],n=!0,i=!1,o=void 0;try{for(var l,c=s()(this.mapInfo[\"area\"]);!(n=(l=c.next()).done);n=!0){var u=l.value;e.push({lat:Number(u.split(\",\")[1]),lng:Number(u.split(\",\")[0])})}}catch(t){i=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}this.mapObj=new r.a.maps.Map(document.getElementById(\"map\"),{zoom:15,center:{lng:this.mapInfo.lng,lat:this.mapInfo.lat},mapTypeId:r.a.maps.MapTypeId.SATELLITE}),this.mapInfo.showMult?this.mapInfo.vehicleInfo.map(function(t){var e={lat:t.lastLocationLat,lng:t.lastLocationLng},n=\"\".concat(t.year,\" \").concat(t.make,\" \").concat(t.model),i=\"<a href='/vehicle/detail/\".concat(t.vehicleId,\"'>\\n                        <img src=\\\"\").concat(t.photoPath,'\" width=\"40%\">\\n                        <h5 id=\"firstHeading\" class=\"firstHeading\">').concat(t.year,\" \").concat(t.make,\" \").concat(t.model,\"</h5>\\n                        </a>\");a.addMarker(e,n,i)}):this.marker=new r.a.maps.Marker({position:{lng:this.mapInfo.lng,lat:this.mapInfo.lat},map:this.mapObj,title:this.mapInfo.vehicleInfo}),this.polygon=new r.a.maps.Polygon({paths:e,strokeColor:\"#FF0000\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#FF0000\",fillOpacity:.35}),this.polygon.setMap(this.mapObj),new r.a.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:r.a.maps.ControlPosition.TOP_CENTER,drawingModes:[r.a.maps.drawing.OverlayType.POLYGON]},circleOptions:{fillColor:\"#ffff00\",fillOpacity:1,strokeWeight:5,clickable:!1,editable:!0,zIndex:1},polygonOptions:{strokeColor:\"#FF0000\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#FF0000\",fillOpacity:.35,editable:!0}})}}},u=c,d=(e(\"1f47\"),e(\"2877\")),p=Object(d[\"a\"])(u,n,i,!1,null,null,null);a[\"a\"]=p.exports},\"62da\":function(t,a,e){\"use strict\";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"animated fadeIn lots\"},[e(\"b-card\",[e(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[e(\"i\",{staticClass:\"nav-icon cui-account-logout\"}),t._v(\"\\n            Lots\\n            \"),e(\"button\",{staticClass:\"btn btn-sm btn-primary add-lot\",on:{click:function(a){return t.$router.push(\"/lots/add\")}}},[e(\"i\",{staticClass:\"fa fa-plus-square\"}),t._v(\"\\n                Add a New Lot\\n            \")])]),e(\"div\",{staticClass:\"content\"},[e(\"b-table\",{staticClass:\"mb-0 table-outline\",attrs:{small:\"\",striped:\"\",responsive:\"sm\",items:t.table,hover:\"\",fields:t.tableFields},scopedSlots:t._u([{key:\"vehicles\",fn:function(a){return[e(\"span\",{staticClass:\"btn btn-sm btn-block btn-outline-success\",on:{click:function(e){return t.linkVehicles(a.item.id)}}},[t._v(t._s(a.item.vehicles))])]}},{key:\"battery\",fn:function(a){return[e(\"span\",{staticClass:\"btn btn-sm btn-block btn-outline-danger\",on:{click:function(e){return t.linkBattery(a.item.id)}}},[t._v(t._s(a.item.battery))])]}},{key:\"offline\",fn:function(a){return[e(\"span\",{staticClass:\"btn btn-sm btn-block btn-outline-secondary\",on:{click:function(e){return t.linkSecondary(a.item.id)}}},[t._v(t._s(a.item.offline))])]}},{key:\"actions\",fn:function(a){return[e(\"button\",{staticClass:\"btn btn-sm btn-success\"},[e(\"i\",{staticClass:\"cui icon-map\",on:{click:function(e){return t.mapInfo(a.item.id)}}})]),e(\"button\",{staticClass:\"btn btn-sm btn-info  m-1\",on:{click:function(e){return t.$router.push(\"/lots/edit/\"+a.item.id)}}},[e(\"i\",{staticClass:\"fa fa-edit\"})]),e(\"button\",{staticClass:\"btn btn-sm btn-danger btn-del\",on:{click:function(e){return t.delId(a.item.id)}}},[e(\"i\",{staticClass:\"cui cui-trash\"})])]}}])})],1),t.total>0?e(\"b-row\",{staticStyle:{\"margin-top\":\"2%\"}},[e(\"b-col\",{attrs:{sm:\"4\",lg:\"4\"}},[e(\"div\",{staticClass:\"dataTables_info\",attrs:{id:\"DataTables0\",role:\"status\",\"aria-live\":\"polite\"}},[t._v(\"\\n                    Showing \"+t._s(10*(t.currentPage-1)+1)+\" to \"+t._s(t.currentPage===t.totalPages?t.total:10*t.currentPage)+\" of \"+t._s(t.total)+\" entries\\n                \")])]),e(\"b-col\",{attrs:{sm:\"8\",lg:\"8\"}},[e(\"b-pagination\",{attrs:{align:\"right\",\"total-rows\":t.total,\"per-page\":t.pageSize},on:{input:function(a){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:\"currentPage\"}})],1)],1):t._e()],1),e(\"b-modal\",{ref:\"my-modal\",attrs:{title:t.tipTitle},on:{ok:function(a){t.showMap=!1}},model:{value:t.showMap,callback:function(a){t.showMap=a},expression:\"showMap\"}},[e(\"google-map\",{attrs:{map:t.map}})],1),e(\"model\",{attrs:{show:t.show,title:\"Warn\",content:\"Are you sure to delete the lot?\",buttonText:t.btnGroup},on:{closeRemindBox:t.hideTip}})],1)},i=[],o=(e(\"c5f6\"),e(\"28a5\"),e(\"3159\")),s=e(\"607c\"),l=e(\"ebd9\"),r={name:\"lots\",inject:[\"reload\"],components:{googleMap:s[\"a\"],model:l[\"a\"]},data:function(){return{currentPage:1,pageSize:10,table:null,curDel:null,show:!1,btnGroup:{btnFirst:\"Cancel\",btnSecond:\"OK\"},tableFields:{name:{label:\"Lot Name\",class:\"text-center\"},address:{label:\"Lot Address\",class:\"text-center\"},dealership:{label:\"Dealership\",class:\"text-center\"},vehicles:{label:\"All Vehicles\",class:\"text-center\"},battery:{label:\"Low Battery\",class:\"text-center\"},offline:{label:\"Offline\",class:\"text-center\"},actions:{label:\"Actions\",class:\"text-center\"}},total:0,totalPages:0,tipTitle:\"\",showMap:!1,map:{}}},mounted:function(){this.initData(this.currentPage)},methods:{initData:function(t){var a=this;o[\"a\"].get(\"/api/v1/lot/page?pageNo=\".concat(t)).then(function(t){a.currentPage=t.data.data.pageNo,a.total=t.data.data.rowCount,a.filterData(t.data.data),a.totalPages=t.data.data.totalPages})},filterData:function(t){this.table=t.datas.map(function(t){return{name:t.parkingName,address:t.address,dealership:t.storeName,vehicles:t.vehicleFilter.num,battery:t.lowBatteryFilter.num,offline:t.offLineFilter.num,id:t.id}})},delId:function(t){this.curDel=t,this.show=!0},hideTip:function(t){var a=this;t&&o[\"a\"].post(\"/api/v1/lot/delete\",{id:this.curDel}).then(function(t){a.reload()}),this.show=!1},linkVehicles:function(t){var a='[{\"key\":\"parking\",\"value\":[\"'.concat(t,'\"]}]');this.$router.push({name:\"vehicle\",query:{filters:a}})},linkBattery:function(t){this.$router.push({name:\"vehicle\",query:{filters:'[{\"key\":\"parking\",\"value\":[\"'.concat(t,'\"]},{\"key\":\"battery\",\"value\":[\"1\"]}]')}})},linkSecondary:function(t){this.$router.push({name:\"vehicle\",query:{filters:'[{\"key\":\"parking\",\"value\":[\"'.concat(t,'\"]},{\"key\":\"online\",\"value\":[\"2\"]}]')}})},prevPage:function(){this.initData(this.currentPage>1?this.currentPage-1:1)},nextPage:function(){this.initData(this.currentPage>=this.pageCount?this.currentPage:this.currentPage+1)},changePage:function(t){this.initData(t)},getVehicleList:function(t,a,e,n){var i=this;o[\"a\"].get(\"/api/v1/inlotvehiclelist\",{params:{parkingId:t}}).then(function(t){var o=e.split(\" \");i.map={lat:Number(o[1]),lng:Number(o[0]),area:a,vehicleInfo:t.data.data,showMult:!0},i.tipTitle=n,i.showMap=!0})},mapInfo:function(t){var a=this;o[\"a\"].get(\"/api/v1/lot/detail\",{params:{id:t}}).then(function(e){var n=e.data.data;a.getVehicleList(t,n.areaCoordinate,n.centerCoordinate,n.parkingName)})}}},c=r,u=(e(\"7c77\"),e(\"2877\")),d=Object(u[\"a\"])(c,n,i,!1,null,null,null);a[\"default\"]=d.exports},\"7c77\":function(t,a,e){\"use strict\";var n=e(\"7e7e\"),i=e.n(n);i.a},\"7d7b\":function(t,a,e){var n=e(\"e4ae\"),i=e(\"7cd6\");t.exports=e(\"584a\").getIterator=function(t){var a=i(t);if(\"function\"!=typeof a)throw TypeError(t+\" is not iterable!\");return n(a.call(t))}},\"7e7e\":function(t,a,e){},\"842b\":function(t,a,e){},c5f6:function(t,a,e){t.exports=e(\"292f\")(394)},cdb6:function(t,a,e){\"use strict\";var n=e(\"842b\"),i=e.n(n);i.a},ebd9:function(t,a,e){\"use strict\";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"transition\",{attrs:{name:\"fade\"}},[t.show?e(\"div\",{attrs:{id:\"popup-edit\"}},[e(\"div\",{staticClass:\"modal-dialog modal-md popup-content\"},[e(\"div\",{staticClass:\"modal-content\",attrs:{role:\"document\",id:\"__BVID__42___BV_modal_content_\",\"aria-labelledby\":\"__BVID__42___BV_modal_header_\",\"aria-describedby\":\"__BVID__42___BV_modal_body_\"}},[e(\"header\",{staticClass:\"modal-header\",attrs:{id:\"__BVID__42___BV_modal_header_\"}},[e(\"h5\",{staticClass:\"modal-title\"},[t._v(t._s(t.title))]),e(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:function(a){return t.closePopup()}}},[t._v(\"Ã—\")])]),e(\"div\",{staticClass:\"modal-body\",attrs:{id:\"__BVID__42___BV_modal_body_\"}},[e(\"div\",[t._v(t._s(t.content))])]),e(\"footer\",{staticClass:\"modal-footer\",attrs:{id:\"__BVID__42___BV_modal_footer_\"}},[t.buttonText&&t.buttonText.btnFirst?e(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(a){return t.closePopup()}}},[t._v(t._s(t.buttonText?t.buttonText.btnFirst:\"\")+\"\\n                  \")]):t._e(),t.buttonText&&t.buttonText.btnSecond?e(\"button\",{staticClass:\"btn btn-primary\",attrs:{type:\"button\"},on:{click:function(a){return t.closePopup(t.type=\"ok\",t.buttonText.userId)}}},[t._v(t._s(t.buttonText.btnSecond)+\"\\n                  \")]):t._e()])])]),e(\"div\",{staticClass:\"bg\",on:{click:function(a){return t.closePopup()}}})]):t._e()])},i=[],o={name:\"modal\",props:[\"show\",\"title\",\"content\",\"buttonText\"],methods:{closePopup:function(t,a){this.$emit(\"closeRemindBox\",t,a)}}},s=o,l=(e(\"cdb6\"),e(\"2877\")),r=Object(l[\"a\"])(s,n,i,!1,null,\"76acff4f\",null);a[\"a\"]=r.exports},ff26:function(t,a,e){}}]);","extractedComments":[]}