{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"alerts\"],{\"19e1\":function(t,e,a){\"use strict\";var n=a(\"48f2\"),s=a.n(n);s.a},\"48f2\":function(t,e,a){},\"89f6\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"animated fadeIn alerts\"},[a(\"b-card\",[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"i\",{staticClass:\"nav-icon cui cui-bell\"}),a(\"span\",[t._v(t._s(t.$t(\"m.dashboard.alerts\")))])]),a(\"b-table\",{staticClass:\"table-outline\",attrs:{small:\"\",striped:\"\",responsive:\"sm\",items:t.table,hover:\"\",fields:t.tableFields,\"head-variant\":\"light\"},scopedSlots:t._u([{key:\"status\",fn:function(e){return[a(\"span\",{staticClass:\"badge badge-pill\",class:1==e.item.status?\"badge-success\":\"badge-danger\"},[t._v(\"\\n                    \"+t._s(1==e.item.status?\"Read\"==e.item.alertAction?t.$t(\"m.alert.read_status\"):t.$t(\"m.alert.solved_status\"):\"Read\"==e.item.alertAction?t.$t(\"m.alert.unread_status\"):t.$t(\"m.alert.unsolved_status\"))+\"\\n                \")])]}},{key:\"action\",fn:function(e){return[a(\"div\",{staticClass:\"btn btn-sm btn-info m-1\",on:{click:function(a){return t.$router.push(\"/inventory/alerts/detail/\"+e.item.id)}}},[a(\"i\",{staticClass:\"fa fa-eye\"})]),1==e.item.status?[a(\"div\",{staticClass:\"btn btn-sm btn-update btn-secondary\",attrs:{disabled:\"\"}},[a(\"i\",{staticClass:\"cui fa fa-wrench\"})])]:[a(\"div\",{staticClass:\"btn btn-sm btn-update btn-success\",on:{click:function(a){return t.updateVehicle(e.item.id)}}},[a(\"i\",{staticClass:\"cui fa fa-wrench\"})])]]}}])}),t.total>0?a(\"b-row\",{staticClass:\"paginate-alert\"},[a(\"b-col\",{attrs:{sm:\"4\",lg:\"4\"}},[a(\"div\",{staticClass:\"dataTables_info\",attrs:{id:\"DataTables0\",role:\"status\",\"aria-live\":\"polite\"}},[t._v(\"\\n                    \"+t._s(t.$t(\"m.common.show\"))+\" \"+t._s(10*(t.currentPage-1)+1)+\" \"+t._s(t.$t(\"m.common.to\"))+\" \"+t._s(t.currentPage===t.pageCount?t.total:10*t.currentPage)+\" \"+t._s(t.$t(\"m.common.of\"))+\" \"+t._s(t.total)+\" \"+t._s(t.$t(\"m.common.entries\"))+\"\\n                \")])]),a(\"b-col\",{attrs:{sm:\"8\",lg:\"8\"}},[a(\"b-pagination\",{attrs:{align:\"right\",\"total-rows\":t.total,\"per-page\":t.pageSize,\"aria-controls\":\"my-table\"},on:{input:function(e){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:\"currentPage\"}})],1)],1):t._e()],1),a(\"b-modal\",{ref:\"my-modal\",attrs:{\"hide-footer\":\"\",title:t.$t(\"m.tip.info\")},on:{ok:function(e){t.show=!1}},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"div\",[t._v(t._s(t.updateInfo)+\" \")]),a(\"b-button\",{staticClass:\"btn btn-primary\",staticStyle:{float:\"right\"},on:{click:function(e){return t.reload()}}},[t._v(t._s(t.$t(\"m.tip.b_ok\")))])],1)],1)},s=[],r=a(\"3159\"),o=a(\"c466\"),i={name:\"alerts\",data:function(){return{currentPage:1,pageSize:10,total:0,show:!1,tableFields:{alertType:{label:this.$t(\"m.alert.type\"),class:\"text-center\"},vehicle:{label:this.$t(\"m.common.vehicle\"),class:\"text-center\"},stockNo:{label:this.$t(\"m.common.stock_num2\"),class:\"text-center\"},time:{label:this.$t(\"m.common.time\"),class:\"text-center\"},status:{label:this.$t(\"m.common.status\"),class:\"text-center\"},action:{label:this.$t(\"m.common.action\"),class:\"text-center\"}},data:null,table:null,pageCount:0,updateInfo:\"\"}},mounted:function(){this.axiosData(this.currentPage)},methods:{axiosData:function(t){var e=this;r[\"a\"].post(\"/api/v1/alert/list?pageNo=\".concat(t,\"&pageSize=10\")).then(function(t){e.total=t.data.data.rowCount,e.data=t.data.data,e.pageCount=t.data.data.totalPages,e.filterData()})},filterData:function(){var t=this;this.table=this.data.datas.map(function(e){var a=e.year?e.year:\"N/A\",n=e.make?e.make:\"N/A\",s=e.model?e.model:\"N/A\";console.log(e);var r=null;return 1===e.alertType?r=t.$t(\"m.alert.alert_type_1\"):2===e.alertType?r=t.$t(\"m.alert.alert_type_2\"):3===e.alertType?r=t.$t(\"m.alert.alert_type_3\"):4===e.alertType?r=t.$t(\"m.alert.alert_type_4\"):5===e.alertType&&(r=t.$t(\"m.alert.alert_type_5\")),{alertType:r,vehicle:\"\".concat(a,\" \").concat(n,\" \").concat(s),stockNo:e.stockNum?e.stockNum:\"N/A\",time:e.createTime?Object(o[\"d\"])(e.createTime):\"N/A\",status:e.alertStatus,id:e.id,alertAction:e.alertMarkAction}})},changeFL:function(t){this.axiosData(\"f\"==t?1:this.pageCount)},prevPage:function(){this.axiosData(this.currentPage>1?this.currentPage-1:1)},nextPage:function(){this.axiosData(this.currentPage>=this.pageCount?this.currentPage:this.currentPage+1)},changePage:function(t){this.axiosData(t)},reload:function(){window.location.reload()},updateVehicle:function(t){var e=this;r[\"a\"].post(\"/api/v1/alert/update/status\",{alertId:t}).then(function(t){200==t.data.code?(e.updateInfo=e.$t(\"m.tip.update_succ\"),e.show=!0):(e.updateInfo=e.$t(\"m.tip.update_failed\"),e.show=!0)}).catch(function(t){})}}},c=i,l=(a(\"19e1\"),a(\"2877\")),u=Object(l[\"a\"])(c,n,s,!1,null,null,null);e[\"default\"]=u.exports},c466:function(t,e,a){\"use strict\";function n(t){var e=new Date(t),a=e.getFullYear()+\" \",n=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?\"0\"+e.getDate():e.getDate(),r=e.getHours()<10?\"0\"+e.getHours():e.getHours(),o=e.getMinutes()<10?\"0\"+e.getMinutes():e.getMinutes();return n+\"/\"+s+\"/\"+a+\" \"+r+\":\"+o}function s(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?\"0\"+e.getDate():e.getDate();return a+\"-\"+n+\"-\"+s}function r(t,e){return Math.ceil((e-t)/1e3/3600/24)}function o(t){var e=new Date(t),a=new Array(\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Spt\",\"Oct\",\"Nov\",\"Dec\"),n=new Array(\"Sun\",\"Mon\",\"Tus\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"),s=e.getMonth(),r=e.getDay(),o=e.getDate();return n[r]+\" , \"+a[s]+\" \"+o+\" , \"+e.getFullYear()}function i(t){if(8===t.length){var e=t.slice(0,4),a=t.slice(4,6),n=t.slice(6,8);return e+\"/\"+a+\"/\"+n}if(17===t.length){var s=t.slice(0,4),r=t.slice(4,6),o=t.slice(6,8),i=t.slice(9,13),c=t.slice(13,15),l=t.slice(15,17);return s+\"/\"+r+\"/\"+o+\" - \"+i+\"/\"+c+\"/\"+l}}function c(t){var e=t.slice(0,4),a=(new Date).getFullYear();return a-e}function l(t){var e=new Date(t.slice(0,4),t.slice(4,5),t.slice(5,6)).getTime(),a=(new Date).getTime(),n=a-e,s=Math.floor(n/31536e6),r=Math.floor(n-s/2592e6)%12;return{year:s,month:r}}function u(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?\"0\"+e.getDate():e.getDate();return n+\"/\"+s+\"/\"+a}function g(t,e){var a=new Date(t),n=(a.getFullYear(),a.getMonth()+1<10?a.getMonth():a.getMonth(),a.getDate()<10?a.getDate():a.getDate(),a.getHours()<10?\"0\"+a.getHours():a.getHours()),s=a.getMinutes()<10?\"0\"+a.getMinutes():a.getMinutes(),r=new Date(e),o=(r.getFullYear(),r.getMonth()+1<10?r.getMonth():r.getMonth(),r.getDate()<10?r.getDate():r.getDate(),r.getHours()<10?\"0\"+r.getHours():r.getHours()),i=r.getMinutes()<10?\"0\"+r.getMinutes():r.getMinutes();return\"\".concat(n,\":\").concat(s,\"-\").concat(o,\":\").concat(i)}function d(t){var e=new Date(t),a=(e.getFullYear(),e.getMonth()+1<10?e.getMonth():e.getMonth(),e.getDate()<10?e.getDate():e.getDate(),e.getHours()<10?\"0\"+e.getHours():e.getHours()),n=e.getMinutes()<10?\"0\"+e.getMinutes():e.getMinutes(),s=e.getSeconds()<10?\"0\"+e.getSeconds():e.getSeconds();return a+\":\"+n+\":\"+s}a.d(e,\"d\",function(){return n}),a.d(e,\"i\",function(){return s}),a.d(e,\"g\",function(){return r}),a.d(e,\"h\",function(){return o}),a.d(e,\"c\",function(){return i}),a.d(e,\"a\",function(){return c}),a.d(e,\"b\",function(){return l}),a.d(e,\"e\",function(){return u}),a.d(e,\"j\",function(){return g}),a.d(e,\"f\",function(){return d})}}]);","extractedComments":[]}