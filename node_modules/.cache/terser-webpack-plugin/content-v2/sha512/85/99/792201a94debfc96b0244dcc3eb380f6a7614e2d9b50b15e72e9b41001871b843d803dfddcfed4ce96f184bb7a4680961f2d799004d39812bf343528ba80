{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"vehicle\"],{\"13f6\":function(t,e,a){\"use strict\";var n=a(\"9621\"),i=a.n(n);i.a},\"1f47\":function(t,e,a){\"use strict\";var n=a(\"ff26\"),i=a.n(n);i.a},\"386d\":function(t,e,a){t.exports=a(\"292f\")(477)},\"3a23\":function(t,e,a){t.exports=a.p+\"img/placeholder.5367544d.svg\"},\"469f\":function(t,e,a){a(\"6c1c\"),a(\"1654\"),t.exports=a(\"7d7b\")},\"5d6a\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"animated fadeIn vehicle\"},[a(\"b-card\",{staticStyle:{width:\"100%\"}},[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"i\",{staticClass:\"fa fa-automobile\"}),a(\"span\",[t._v(\"Vehicles\")]),a(\"div\",{staticClass:\"header-right\"},[a(\"b-button\",{staticClass:\"btn btn-sm btn-primary mr-2\",on:{click:function(e){return t.$router.push(\"/vehicle/add\")}}},[a(\"i\",{staticClass:\"fa fa-plus-square\"}),t._v(\"\\n\\t\\t\\t\\t\\tAdd Inventory\\n\\t\\t\\t\\t\")]),a(\"b-button\",{staticClass:\"btn btn-sm btn-primary mr-2\",on:{click:function(e){return t.$router.push(\"/vehicle/bind\")}}},[a(\"i\",{staticClass:\"fa fa-wrench\"}),t._v(\"\\n\\t\\t\\t\\t\\tDevice Installation\\n\\t\\t\\t\\t\")])],1)]),a(\"div\",[a(\"b-form-group\",{staticClass:\"search-group\",attrs:{\"label-for\":\"elementsAppendButton\"}},[a(\"b-input-group\",[a(\"b-form-input\",{attrs:{type:\"text\"},model:{value:t.search,callback:function(e){t.search=e},expression:\"search\"}}),a(\"b-input-group-append\",[a(\"b-button\",{attrs:{variant:\"primary\"},on:{click:t.searchData}},[a(\"i\",{staticClass:\"fa fa-search\"}),t._v(\"Search\")])],1)],1)],1),a(\"b-btn\",{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.collapse\",modifiers:{collapse:!0}}],staticClass:\"m-1 btn btn-outline-info\"},[a(\"i\",{staticClass:\"fa fa-filter\"}),t._v(\"Filters\\n\\t\\t\\t\")])],1),a(\"b-collapse\",{attrs:{id:\"collapse\"}},[a(\"b-card\",{staticClass:\"collapse-m\",staticStyle:{width:\"100%\"}},[t._l(t.gFData,function(e){return[a(\"b-row\",{key:e.label},[a(\"b-col\",{staticClass:\"text-primary\",attrs:{sm:\"2\"}},[t._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+t._s(e.label)+\"\\n\\t\\t\\t\\t\\t\\t\")]),a(\"b-col\",{attrs:{sm:\"10\"}},t._l(e.filters,function(n){return a(\"div\",{key:n.value,staticClass:\"filter-content\"},[a(\"b-form-checkbox-group\",{model:{value:t.queryData[e.key],callback:function(a){t.$set(t.queryData,e.key,a)},expression:\"queryData[item.key]\"}},[a(\"b-form-checkbox\",{ref:\"checkbox\",refInFor:!0,attrs:{value:n.value,name:e.key,checked:t.queryData[e.key]}},[t._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+t._s(n.key)+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])],1)],1)}),0)],1)]})],2)],1),a(\"b-table\",{staticClass:\"mb-0 table-outline\",attrs:{small:\"\",striped:\"\",responsive:\"sm\",items:t.table,hover:\"\",fields:t.tableFields,\"head-variant\":\"light\"},scopedSlots:t._u([{key:\"photoUrl\",fn:function(e){return[a(\"div\",{staticClass:\"photo-url\",on:{click:function(a){return t.$router.push(\"/vehicle/detail/\"+e.item.vehicleId)}}},[a(\"span\",[t._v(t._s(e.item.unboundStatus))]),a(\"img\",{staticStyle:{\"object-fit\":\"cover\"},attrs:{src:e.item.photoUrl,width:\"100px\",height:\"100px\"}})])]}},{key:\"battery\",fn:function(e){return[a(\"span\",{staticClass:\"badge badge-pill\",class:e.item.batteryClass?e.item.batteryClass:\"\"},[t._v(t._s(e.item.battery))])]}},{key:\"vehicle\",fn:function(e){return[a(\"div\",[a(\"div\",{on:{click:function(a){return t.$router.push(\"/vehicle/detail/\"+e.item.vehicleId)}}},[a(\"strong\",{staticClass:\"link-to-detail\"},[t._v(t._s(e.item.vehicle))])]),a(\"div\",[t._v(t._s(e.item.colorTrim))]),a(\"div\",[t._v(t._s(e.item.stock))])])]}},{key:\"online\",fn:function(e){return[a(\"span\",{staticClass:\"badge badge-pill\",class:\"Online\"==e.item.online?\"badge-success\":\"btn-secondary\"},[t._v(t._s(e.item.online))])]}},{key:\"use\",fn:function(e){return[a(\"span\",{staticClass:\"badge badge-pill\",class:\"Available\"==e.item.use?\"badge-success\":\"btn-danger\"},[t._v(t._s(e.item.use))])]}},{key:\"action\",fn:function(e){return[a(\"div\",{staticClass:\"mapLocation\",on:{click:function(a){return t.showMapTip(e.item.lat,e.item.lng,e.item.area,e.item.info)}}},[a(\"i\",{staticClass:\"cui cui-location-pin btn btn-sm btn-secondary\",class:e.item.lat||e.item.area?\"btn-success\":\"\"})]),a(\"div\",{staticClass:\"btn btn-sm btn-info vehicledetail\",on:{click:function(a){return t.$router.push(\"/vehicle/detail/\"+e.item.vehicleId)}}},[a(\"i\",{staticClass:\"fa fa-eye\"})]),a(\"div\",{staticClass:\"btn btn-sm btn-info vehicleedit\",on:{click:function(a){return t.$router.push(\"/vehicle/edit/\"+e.item.vehicleId)}}},[a(\"i\",{staticClass:\"fa fa-edit\"})]),a(\"div\",{directives:[{name:\"b-modal\",rawName:\"v-b-modal.del-1\",modifiers:{\"del-1\":!0}}],staticClass:\"btn btn-sm btn-danger btn-del\",on:{click:function(a){return t.delData(e.item.vehicleId)}}},[a(\"i\",{staticClass:\"cui cui-trash\"})])]}}])}),a(\"b-row\",{staticClass:\"top-holder\"},[a(\"b-col\",{attrs:{sm:\"4\",lg:\"4\"}},[a(\"div\",{staticClass:\"dataTables_info\",attrs:{id:\"DataTables0\",role:\"status\",\"aria-live\":\"polite\"}},[t.total>0?a(\"span\",[t._v(\"\\n\\t\\t\\t\\t\\t\\tShowing \"+t._s(10*(t.currentPage-1)+1)+\" to \"+t._s(t.currentPage===t.pageCount?t.total:10*t.currentPage)+\" of \"+t._s(t.total)+\" entries\\n\\t\\t\\t\\t\\t\")]):a(\"span\",[t._v(\"\\n\\t\\t\\t\\t\\t\\tShowing 0 to 0 of \"+t._s(t.total)+\" entries\\n\\t\\t\\t\\t\\t\")])])]),a(\"b-col\",{attrs:{sm:\"8\",lg:\"8\"}},[a(\"b-pagination\",{attrs:{align:\"right\",\"total-rows\":t.total,\"per-page\":t.perPage},on:{input:function(e){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:\"currentPage\"}})],1)],1)],1),a(\"div\",{staticClass:\"del-tip\"},[a(\"b-modal\",{ref:\"my-modal\",attrs:{\"hide-footer\":\"\",title:\"Are you sure to delete the vehicles?\"},on:{ok:function(e){t.showDelMap=!1}},model:{value:t.showDelMap,callback:function(e){t.showDelMap=e},expression:\"showDelMap\"}},[a(\"b-button\",{on:{click:t.hideModal}},[t._v(\"Cancel\")]),a(\"button\",{staticClass:\"btn btn-primary\",on:{click:t.apiDel}},[t._v(\"Ok\")])],1)],1),a(\"b-modal\",{ref:\"my-modal\",on:{ok:function(e){t.showMap=!1}},model:{value:t.showMap,callback:function(e){t.showMap=e},expression:\"showMap\"}},[a(\"google-map\",{attrs:{map:t.map}})],1),a(\"b-modal\",{ref:\"my-modal\",on:{ok:function(e){t.showEtip=!1}},model:{value:t.showEtip,callback:function(e){t.showEtip=e},expression:\"showEtip\"}},[a(\"b-button\",[t._v(\"Cancel\")]),a(\"button\",{staticClass:\"btn btn-primary\"},[t._v(\"Ok\")])],1)],1)},i=[],s=(a(\"a481\"),a(\"28a5\"),a(\"386d\"),a(\"7f7f\"),a(\"6762\"),a(\"3159\")),o=a(\"607c\"),l={name:\"vehicle\",components:{googleMap:o[\"a\"]},inject:[\"reload\"],data:function(){return{tableFields:{photoUrl:{label:\"Photo\",class:\"text-center\"},vehicle:{label:\"Vehicle\",class:\"text-center\"},park:{label:\"Lot\",class:\"text-center\"},battery:{label:\"Voltage\",class:\"text-center\"},online:{label:\"Online/Offline\",class:\"text-center\"},use:{label:\"Available/In Use\",class:\"text-center\"},price:{label:\"Price\",class:\"text-center\"},inventory:{label:\"Inventory Age\",class:\"text-center\"},action:{label:\"Actions\",class:\"text-center\"}},data:null,table:null,showMap:!1,map:{},rows:0,currentPage:1,total:0,perPage:10,showDelMap:!1,delId:\"\",showEtip:!1,pageCount:0,gFData:[],search:\"\",queryData:{}}},mounted:function(){var t=this,e=this;this.axiosApi(e,1,this.$route.query.filters?JSON.parse(this.$route.query.filters):[]),this.getFilter();var a=this.$route.query.filters?JSON.parse(this.$route.query.filters):[];a.length&&a.map(function(e){t.queryData[e.key]=e.value})},methods:{getFilter:function(){var t=this;s[\"a\"].post(\"/api/v1/vehiclesearch/filter\").then(function(e){t.gFData=e.data.data}).catch(function(){})},searchData:function(){var t=[],e=[];this.$refs.checkbox.forEach(function(a){if(a.is_Checked)if(e.includes(a.name))for(var n=t,i=0;i<n.length;i++){var s=n[i];s.key==a.name&&s.value.push(a.value)}else t.push({key:a.name,value:[a.value]}),e.push(a.name)}),this.axiosApi(this,1,t)},axiosApi:function(t,e,a){var n=this;s[\"a\"].post(\"/api/v1/vehiclesearch/searchnew?searchText=\".concat(this.search,\"&source=&pageNo=\").concat(e,\"&pageSize=10\"),{filters:a}).then(function(e){t.data=e.data.data,t.total=e.data.data.rowCount?e.data.data.rowCount:0,t.currentPage=e.data.data.pageNo?e.data.data.pageNo:0,t.pageCount=e.data.data.pageCount?e.data.data.pageCount:0,n.filterData(t.data.vehicles)}).catch(function(t){alert(t)})},formatNumber:function(t){t+=\"\";var e=t.split(\".\"),a=e[0],n=e.length>1?\".\"+e[1]:\"\",i=/(\\d+)(\\d{3})/;while(i.test(a))a=a.replace(i,\"$1,$2\");return a+n},changePage:function(t){var e=this;this.axiosApi(e,t,[])},apiDel:function(){var t=this;s[\"a\"].post(\"/api/v1/vehicle/delete\",{vehicleId:this.delId}).then(function(e){200==e.data.code?t.reload():t.showEtip=!0}).catch(function(){t.showEtip=!0})},showMapTip:function(t,e,a,n){(t||a)&&(this.map={lat:t,lng:e,area:a,vehicleInfo:n},this.showMap=!0)},hideModal:function(){this.$refs[\"my-modal\"].hide()},delData:function(t){this.delId=t,this.showDelMap=!0},filterData:function(t){var e=this;this.table=t.map(function(t){var n=1==t.outStatus?t.parkingName:\"N/A\",i=null,s=null;if(t.currentVoltage){var o=t.currentVoltage.toFixed(1);i=t.currentVoltage.toFixed(1)+\" V\",s=o<=11.7?\"badge-danger\":o>11.7&&o<=12.1?\"badge-warning\":\"badge-success\"}else i=\"N/A\",s=\"badge-secondary\";var l=1==t.isOnline?\"Online\":\"Offline\",r=t.year?t.year:\"N/A\",c=t.make?t.make:\"N/A\",u=t.model?t.model:\"N/A\",p=\"N/A\"==r&&\"N/A\"==c&&\"N/A\"==u?\"N/A\":r+\" \"+c+\" \"+u,d=t.color?t.color:\"N/A\",h=t.trim?t.trim:\"N/A\",f=\"N/A\"==d&&\"N/A\"==h?\"N/A\":d+\" , \"+h;return{photoUrl:t.photoUrl?t.photoUrl:a(\"3a23\"),vehicle:p,colorTrim:f,stock:t.stockNumber?t.stockNumber:\"N/A\",park:n,battery:i,batteryClass:s,online:l,use:0==t.available?\"Available\":\"In Use\",price:t.price?t.priceUnit+\" \"+e.formatNumber(t.price):\"N/A\",inventory:t.inventoryDays?t.inventoryDays+\" Days\":\"N/A\",action:\"<span>action</span>\",vehicleId:t.vehicleId,unboundStatus:3==t.isOnline?\"Unbound\":\"\",info:p,lat:t.lastLocationLat,lng:t.lastLocationLng,area:t.areaCoordinates}})}}},r=l,c=(a(\"13f6\"),a(\"2877\")),u=Object(c[\"a\"])(r,n,i,!1,null,\"882c9ef4\",null);e[\"default\"]=u.exports},\"5d73\":function(t,e,a){t.exports=a(\"469f\")},\"607c\":function(t,e,a){\"use strict\";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{attrs:{id:\"map\"}})},i=[],s=(a(\"28a5\"),a(\"c5f6\"),a(\"5d73\")),o=a.n(s),l=a(\"4287\"),r=a.n(l),c={name:\"googleMap\",props:[\"map\"],data:function(){return{mapInfo:null,mapObj:null,marker:null,polygon:null,markers:[]}},watch:{map:function(t){this.mapInfo=t,this.initMap()}},methods:{addMarker:function(t,e,a){var n=new r.a.maps.InfoWindow({content:a}),i=new r.a.maps.Marker({position:t,map:this.mapObj,animation:r.a.maps.Animation.DROP,title:e});this.markers.push(i),i.addListener(\"click\",function(){n.open(this.mapObj,i)})},initMap:function t(){var e=this,a=[],n=!0,i=!1,s=void 0;try{for(var l,c=o()(this.mapInfo[\"area\"]);!(n=(l=c.next()).done);n=!0){var u=l.value;a.push({lat:Number(u.split(\",\")[1]),lng:Number(u.split(\",\")[0])})}}catch(t){i=!0,s=t}finally{try{n||null==c.return||c.return()}finally{if(i)throw s}}this.mapObj=new r.a.maps.Map(document.getElementById(\"map\"),{zoom:15,center:{lng:this.mapInfo.lng,lat:this.mapInfo.lat},mapTypeId:r.a.maps.MapTypeId.SATELLITE}),this.mapInfo.showMult?this.mapInfo.vehicleInfo.map(function(t){var a={lat:t.lastLocationLat,lng:t.lastLocationLng},n=\"\".concat(t.year,\" \").concat(t.make,\" \").concat(t.model),i=\"<a href='/vehicle/detail/\".concat(t.vehicleId,\"'>\\n                        <img src=\\\"\").concat(t.photoPath,'\" width=\"40%\">\\n                        <h5 id=\"firstHeading\" class=\"firstHeading\">').concat(t.year,\" \").concat(t.make,\" \").concat(t.model,\"</h5>\\n                        </a>\");e.addMarker(a,n,i)}):this.marker=new r.a.maps.Marker({position:{lng:this.mapInfo.lng,lat:this.mapInfo.lat},map:this.mapObj,title:this.mapInfo.vehicleInfo}),this.polygon=new r.a.maps.Polygon({paths:a,strokeColor:\"#FF0000\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#FF0000\",fillOpacity:.35}),this.polygon.setMap(this.mapObj),new r.a.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:r.a.maps.ControlPosition.TOP_CENTER,drawingModes:[r.a.maps.drawing.OverlayType.POLYGON]},circleOptions:{fillColor:\"#ffff00\",fillOpacity:1,strokeWeight:5,clickable:!1,editable:!0,zIndex:1},polygonOptions:{strokeColor:\"#FF0000\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#FF0000\",fillOpacity:.35,editable:!0}})}}},u=c,p=(a(\"1f47\"),a(\"2877\")),d=Object(p[\"a\"])(u,n,i,!1,null,null,null);e[\"a\"]=d.exports},\"7d7b\":function(t,e,a){var n=a(\"e4ae\"),i=a(\"7cd6\");t.exports=a(\"584a\").getIterator=function(t){var e=i(t);if(\"function\"!=typeof e)throw TypeError(t+\" is not iterable!\");return n(e.call(t))}},9621:function(t,e,a){},a481:function(t,e,a){t.exports=a(\"292f\")(476)},c5f6:function(t,e,a){t.exports=a(\"292f\")(394)},ff26:function(t,e,a){}}]);","extractedComments":[]}