{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"device\"],{\"1a7e\":function(t,e,n){var a=n(\"60b0\");\"string\"===typeof a&&(a=[[t.i,a,\"\"]]),a.locals&&(t.exports=a.locals);var i=n(\"499e\").default;i(\"69235ab9\",a,!0,{sourceMap:!1,shadowMode:!1})},\"320e\":function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"animated fadeIn device\"},[n(\"b-card\",[n(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[n(\"i\",{staticClass:\"nav-icon cui-tablet\"}),t._v(\"\\n            Devices\\n            \"),n(\"button\",{staticClass:\"btn btn-sm btn-primary link-bind\",on:{click:function(e){return t.$router.push(\"/vehicle/bind\")}}},[n(\"i\",{staticClass:\"fa fa-wrench\"}),t._v(\"\\n                Device Installaction\\n            \")])]),n(\"div\",{staticClass:\"content\"},[n(\"b-table\",{staticClass:\"mb-0 table-outline table-responsive-sm\",attrs:{small:\"\",striped:\"\",responsive:\"sm\",items:t.table,hover:\"\",fields:t.tableFields},scopedSlots:t._u([{key:\"vin\",fn:function(e){return[n(\"span\",{staticClass:\"vin-class\",on:{click:function(n){return t.$router.push(\"/vehicle/detail/\"+e.item.id)}}},[t._v(t._s(e.item.vin))])]}},{key:\"actions\",fn:function(e){return[\"N/A\"!=e.item.vin?[n(\"div\",{staticClass:\"btn btn-sm btn-danger placeholder\",on:{click:function(n){return t.unpairVehicle(e.item.vin,e.item.imei)}}},[n(\"i\",{staticClass:\"fa fa-close\"}),t._v(\" Unpair\\n                        \")])]:[n(\"div\",{staticClass:\"btn btn-sm btn-primary placeholder\",on:{click:function(n){return t.$router.push({name:\"BindVehicle\",query:{deviceMac:e.item.imei}})}}},[n(\"i\",{staticClass:\"fa fa-close\"}),t._v(\" Install\\n                        \")])],n(\"div\",{staticClass:\"btn btn-sm btn-danger btn-del\",on:{click:function(n){return t.delIdM(e.item.deviceId)}}},[n(\"i\",{staticClass:\"cui cui-trash\"}),t._v(\"Delete Device\\n                    \")])]}}])})],1)]),n(\"b-row\",[n(\"b-col\",{attrs:{sm:\"4\",lg:\"4\"}},[n(\"div\",{staticClass:\"dataTables_info\",attrs:{id:\"DataTables0\",role:\"status\",\"aria-live\":\"polite\"}},[t._v(\"\\n                Showing \"+t._s(10*(t.currentPage-1)+1)+\" to \"+t._s(t.currentPage===t.totalPages?t.total:10*t.currentPage)+\" of \"+t._s(t.total)+\" entries\\n            \")])]),n(\"b-col\",{attrs:{sm:\"8\",lg:\"8\"}},[n(\"b-pagination\",{attrs:{align:\"right\",\"total-rows\":t.total,\"per-page\":10},on:{input:function(e){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:\"currentPage\"}})],1)],1),n(\"model\",{attrs:{show:t.show,title:t.title,content:t.content,buttonText:t.btnGroup},on:{closeRemindBox:t.closeBox}})],1)},i=[],o=n(\"3159\"),s=n(\"ebd9\"),c={name:\"device\",inject:[\"reload\"],components:{model:s[\"a\"]},data:function(){return{tableFields:{imei:{label:\"IMEI\",class:\"text-center\"},vin:{label:\"Related Vehicle VIN\",class:\"text-center\"},actions:{label:\"Related Vehicle VIN\",class:\"Actions\"}},table:null,currentPage:1,pageSize:10,total:0,totalPages:0,show:!1,unpairVin:\"\",title:\"\",content:\"\",btnGroup:{btnFirst:\"Cancel\",btnSecond:\"OK\"},delId:\"\",currentOpa:!1}},mounted:function(){this.initData(this.currentPage,this.pageSize)},methods:{initData:function(t){var e=this;o[\"a\"].post(\"/api/v1/vehicle/listBindDevice?pageNo=\".concat(t,\"&pageSize=\").concat(this.pageSize)).then(function(t){e.currentPage=t.data.data.pageNo,e.total=t.data.data.rowCount,e.filterData(t.data.data),e.totalPages=t.data.data.totalPages})},filterData:function(t){this.table=t.datas.map(function(t){return{imei:t.deviceMac,vin:t.vin?t.vin:\"N/A\",id:t.vehicleId,deviceId:t.deviceId}})},changePage:function(t){this.initData(t,this.pageSize)},unpairVehicle:function(t,e){this.unpairVin={vin:t,deviceMac:e},this.currentOpa=\"unpair\",this.show=!0,this.title=\"Confirm\",this.content=\"Are you sure to unpair the device and vehicle ?\"},unbindVIn:function(){var t=this;o[\"a\"].post(\"/api/v1/vehicle/unbind/device\",{deviceMac:this.unpairVin.deviceMac,vin:this.unpairVin.vin}).then(function(e){200==e.data.code?t.reload():(t.show=!0,t.title=\"Error\",t.content=\"unbind error\",t.btnGroup.btnSecond=\"\")})},delDevice:function(){var t=this;o[\"a\"].post(\"/api/v1/device/delete\",{deviceId:this.delId}).then(function(e){200==e.data.code?t.reload():(t.show=!0,t.title=\"Error\",t.content=\"delete error\",t.btnGroup.btnSecond=\"\")})},closeBox:function(t){t?\"del\"==this.currentOpa?this.delDevice():this.unbindVIn():this.show=!1},delIdM:function(t){this.delId=t,this.currentOpa=\"del\",this.show=!0,this.title=\"Warning\",this.content=\"Are you sure to delete the device?\"}}},r=c,l=(n(\"3607\"),n(\"2877\")),d=Object(l[\"a\"])(r,a,i,!1,null,null,null);e[\"default\"]=d.exports},3532:function(t,e,n){e=t.exports=n(\"24fb\")(!1),e.push([t.i,\".mo-module .modal-footer button.btn-secondary[data-v-76acff4f]{display:none}.fade-enter[data-v-76acff4f]{opacity:0}.fade-enter-active[data-v-76acff4f]{-webkit-transition:opacity .3s;transition:opacity .3s}.fade-leave-active[data-v-76acff4f]{-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}#popup-edit[data-v-76acff4f]{width:100%;height:100%;position:fixed;left:0;top:0;z-index:2222}#popup-edit .popup-content[data-v-76acff4f]{width:100%;position:fixed;z-index:10;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;top:25%}#popup-edit .bg[data-v-76acff4f]{width:100%;height:100%;position:fixed;left:0;top:0;background:rgba(10,53,68,.5);z-index:8}\",\"\"])},3607:function(t,e,n){\"use strict\";var a=n(\"1a7e\"),i=n.n(a);i.a},\"60b0\":function(t,e,n){e=t.exports=n(\"24fb\")(!1),e.push([t.i,\".device .link-bind{float:right}.device td{height:44px;line-height:44px}.device .vin-class{color:#20a8d8;cursor:pointer}.device .vin-class:hover{text-decoration:underline}.device .placeholder{margin-right:4px}\",\"\"])},\"88ca\":function(t,e,n){var a=n(\"3532\");\"string\"===typeof a&&(a=[[t.i,a,\"\"]]),a.locals&&(t.exports=a.locals);var i=n(\"499e\").default;i(\"1e1d70a8\",a,!0,{sourceMap:!1,shadowMode:!1})},cdb6:function(t,e,n){\"use strict\";var a=n(\"88ca\"),i=n.n(a);i.a},ebd9:function(t,e,n){\"use strict\";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"transition\",{attrs:{name:\"fade\"}},[t.show?n(\"div\",{attrs:{id:\"popup-edit\"}},[n(\"div\",{staticClass:\"modal-dialog modal-md popup-content\"},[n(\"div\",{staticClass:\"modal-content\",attrs:{role:\"document\",id:\"__BVID__42___BV_modal_content_\",\"aria-labelledby\":\"__BVID__42___BV_modal_header_\",\"aria-describedby\":\"__BVID__42___BV_modal_body_\"}},[n(\"header\",{staticClass:\"modal-header\",attrs:{id:\"__BVID__42___BV_modal_header_\"}},[n(\"h5\",{staticClass:\"modal-title\"},[t._v(t._s(t.title))]),n(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:function(e){return t.closePopup()}}},[t._v(\"Ã—\")])]),n(\"div\",{staticClass:\"modal-body\",attrs:{id:\"__BVID__42___BV_modal_body_\"}},[n(\"div\",[t._v(t._s(t.content))])]),n(\"footer\",{staticClass:\"modal-footer\",attrs:{id:\"__BVID__42___BV_modal_footer_\"}},[t.buttonText&&t.buttonText.btnFirst?n(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.closePopup()}}},[t._v(t._s(t.buttonText?t.buttonText.btnFirst:\"\")+\"\\n                  \")]):t._e(),t.buttonText&&t.buttonText.btnSecond?n(\"button\",{staticClass:\"btn btn-primary\",attrs:{type:\"button\"},on:{click:function(e){return t.closePopup(t.type=\"ok\",t.buttonText.userId)}}},[t._v(t._s(t.buttonText.btnSecond)+\"\\n                  \")]):t._e()])])]),n(\"div\",{staticClass:\"bg\",on:{click:function(e){return t.closePopup()}}})]):t._e()])},i=[],o={name:\"modal\",props:[\"show\",\"title\",\"content\",\"buttonText\"],methods:{closePopup:function(t,e){this.$emit(\"closeRemindBox\",t,e)}}},s=o,c=(n(\"cdb6\"),n(\"2877\")),r=Object(c[\"a\"])(s,a,i,!1,null,\"76acff4f\",null);e[\"a\"]=r.exports}}]);","extractedComments":[]}