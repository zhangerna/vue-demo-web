{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"bind-vehicle\"],{\"316f\":function(t,e,i){\"use strict\";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"animated fadeIn bind-vehicle\"},[i(\"b-card\",[i(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[i(\"i\",{staticClass:\"fa fa-plus-square\"}),t._v(\"\\n            Device Installation\\n        \")]),i(\"div\",{staticClass:\"content\"},[i(\"b-row\",{staticClass:\"step\",staticStyle:{\"margin-left\":\"-28px\"}},[i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"button\",{staticClass:\"btn mx-3 px-4\",class:t.step1?\"btn-success\":\"btn-secondary\",staticStyle:{\"padding-left\":\"0px\",\"padding-right\":\"0px\"}},[i(\"strong\",[t._v(\"Step 1\")]),i(\"br\"),t._v(\"\\n                        Input Device ID (IMEI)\\n                    \")])]),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"button\",{staticClass:\"btn mx-3 px-4\",class:t.step2?\"btn-success\":\"btn-secondary\"},[i(\"strong\",[t._v(\"Step 2\")]),i(\"br\"),t._v(\"\\n                        Input Vehicle Info\\n                    \")])]),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"button\",{staticClass:\"btn mx-3 px-4\",class:t.step3?\"btn-success\":\"btn-secondary\"},[i(\"strong\",[t._v(\"Step 3\")]),i(\"br\"),t._v(\"\\n                        Complete\\n                    \")])])],1),t.step1?i(\"div\",{staticClass:\"step-info step1\"},[i(\"b-form-group\",[i(\"label\",[t._v(\"Device ID (IMEI)\")]),i(\"b-form-input\",{class:t.imeiIsVaild?\"is-invalid\":\"\",attrs:{type:\"text\",placeholder:\"Enter Device ID (IMEI)\",disabled:t.imeiDisable,maxlength:\"15\"},model:{value:t.deviceId,callback:function(e){t.deviceId=e},expression:\"deviceId\"}}),i(\"p\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.imeiIsVaild,expression:\"imeiIsVaild\"}],staticClass:\"warn-imei\"},[t._v(t._s(\"IMEI is Invalid\"))]),i(\"p\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.imeiSuccess,expression:\"imeiSuccess\"}],staticClass:\"primary-imei\"},[t._v(t._s(\"IMEI is Valid\"))])],1),i(\"b-button\",{staticClass:\"btn-success\",attrs:{type:\"submit\",disabled:t.step1Button},on:{click:t.clickStep1}},[t._v(\"Next Step\")])],1):t._e(),t.step2?i(\"div\",{staticClass:\"step-info step2\"},[i(\"b-row\",[i(\"b-col\",{attrs:{sm:\"6\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Device ID (IMEI)\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Device ID (IMEI)\",disabled:\"\",maxlength:\"15\"},model:{value:t.deviceId,callback:function(e){t.deviceId=e},expression:\"deviceId\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"6\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"VIN\")]),i(\"b-form-input\",{class:t.vinIsVaild?\"is-invalid\":\"\",attrs:{type:\"text\",placeholder:\"Enter VIN\",maxlength:\"17\",disabled:t.vinDisable},model:{value:t.vin,callback:function(e){t.vin=e},expression:\"vin\"}}),i(\"p\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.vinIsVaild,expression:\"vinIsVaild\"}],staticClass:\"warn-imei\"},[t._v(t._s(\"VIN is Invalid\"))]),i(\"p\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.vinSuccess,expression:\"vinSuccess\"}],staticClass:\"primary-imei\"},[t._v(t._s(\"VIN is Valid\"))])],1)],1)],1),t.isClickStep2?i(\"vehicle-form\",{attrs:{vehicleInfo:t.data2},on:{showStep3:t.showStep3}}):t._e(),t.isClickStep2?t._e():i(\"div\",{staticClass:\"text-center\"},[i(\"b-button\",{staticClass:\"btn-success\",attrs:{type:\"submit\",disabled:t.step2Button}},[t._v(\"Submit\")])],1)],1):t._e(),t.step3?i(\"div\",{staticClass:\"step-info step3\"},[i(\"b-row\",{staticClass:\"justify-content-center\"},[i(\"span\",{staticStyle:{\"font-size\":\"144px\"}},[i(\"i\",{staticClass:\"cui cui-check\"})])]),i(\"p\",{staticClass:\"text-center\"},[t._v(\"Installation Completed\")]),i(\"b-row\",{staticClass:\"justify-content-center\"},[i(\"b-col\",{attrs:{sm:\"4\",md:\"4\",xs:\"12\"}},[i(\"button\",{staticClass:\"btn btn-block btn-outline-success\",on:{click:function(e){return t.$router.push(\"/index\")}}},[t._v(\"Dashboard\")])]),i(\"b-col\",{attrs:{sm:\"4\",md:\"4\",xs:\"12\"}},[i(\"button\",{staticClass:\"btn btn-block btn-outline-success\",on:{click:function(e){return t.reloadPage()}}},[t._v(\"Continue\")])]),i(\"b-col\",{attrs:{sm:\"4\",md:\"4\",xs:\"12\"}},[i(\"button\",{staticClass:\"btn btn-block btn-outline-success\",on:{click:function(e){return t.$router.push(\"/vehicle/detail/\"+t.vehicleId)}}},[t._v(\"View Detail\")])])],1)],1):t._e()],1)]),i(\"b-modal\",{ref:\"my-modal\",staticClass:\"mo-module\",attrs:{\"hide-footer\":\"\",title:t.title},on:{ok:function(e){t.showTip=!1}},model:{value:t.showTip,callback:function(e){t.showTip=e},expression:\"showTip\"}},[i(\"div\",{staticClass:\"modal-footer\"},[i(\"b-button\",{on:{click:function(e){t.showTip=!1}}},[t._v(\"\\n                Cancel\\n            \")]),i(\"button\",{staticClass:\"btn btn-primary\",on:{click:t.unbind}},[t._v(\"\\n                Unpair\\n            \")])],1)])],1)},s=[],o=i(\"3159\"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"animated fadeIn vehicleForm\"},[i(\"b-row\",[i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"year\")]),i(\"b-form-input\",{attrs:{type:\"number\",placeholder:\"Enter Year\"},model:{value:t.year,callback:function(e){t.year=e},expression:\"year\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"make\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Make\"},model:{value:t.make,callback:function(e){t.make=e},expression:\"make\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"model\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Model\"},model:{value:t.model,callback:function(e){t.model=e},expression:\"model\"}})],1)],1)],1),i(\"b-row\",[i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Trim\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Trim\"},model:{value:t.trim,callback:function(e){t.trim=e},expression:\"trim\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Engine\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Engine\"},model:{value:t.engine,callback:function(e){t.engine=e},expression:\"engine\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Color\")]),i(\"b-form-select\",{attrs:{size:\"lg\",plain:!0,options:[\"Black\",\"White\",\"Silver\",\"Blue\",\"Red\",\"Brown\",\"Gold\",\"Orange\",\"Yellow\",\"Purple\",\"Green\",\"Pink\",\"other\"],value:\"Please select\"},model:{value:t.color,callback:function(e){t.color=e},expression:\"color\"}})],1)],1)],1),i(\"b-row\",[i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Price\")]),i(\"b-form-input\",{attrs:{type:\"number\",placeholder:\"Enter Price\"},model:{value:t.price,callback:function(e){t.price=e},expression:\"price\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Stock Number\")]),i(\"b-form-input\",{attrs:{type:\"number\",placeholder:\"Enter Stock Number\"},model:{value:t.stock,callback:function(e){t.stock=e},expression:\"stock\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Inventory Date\")]),i(\"b-form-input\",{attrs:{type:\"date\"},model:{value:t.date,callback:function(e){t.date=e},expression:\"date\"}})],1)],1)],1),i(\"b-row\",[i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Condition\")]),i(\"b-form-select\",{attrs:{size:\"lg\",plain:!0,options:[\"new\",\"Used\",\"Demo\"],value:\"Please select\"},model:{value:t.condition,callback:function(e){t.condition=e},expression:\"condition\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Odometer\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Current Mileage\"},model:{value:t.odometer,callback:function(e){t.odometer=e},expression:\"odometer\"}})],1)],1),i(\"b-col\",{attrs:{sm:\"4\"}},[i(\"b-form-group\",[i(\"label\",[t._v(\"Plate Number\")]),i(\"b-form-input\",{attrs:{type:\"text\",placeholder:\"Enter Plate Number\"},model:{value:t.plate,callback:function(e){t.plate=e},expression:\"plate\"}})],1)],1)],1),i(\"div\",{staticClass:\"upload-group text-center\"},[i(\"label\",[t._v(\"Upload Photo\")]),i(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.photo,expression:\"photo\"}],attrs:{src:t.photo,width:\"100%\"}}),i(\"div\",[i(\"input\",{ref:\"upload\",staticStyle:{\"margin-left\":\"16%\"},attrs:{type:\"file\",id:\"uploadAvatar\",accept:\"image/jpeg,image/png,image/jpg\"},on:{change:function(e){return t.savefile(e)}}})]),i(\"b-button\",{staticClass:\"btn btn-success\",staticStyle:{\"margin-top\":\"4%\"},attrs:{disabled:t.showB},on:{click:t.saveData}},[t._v(\"\\n            Submit\\n        \")])],1),i(\"model\",{attrs:{title:t.title,content:t.content,show:t.show,buttonText:{btnFirst:\"ok\"}},on:{closeRemindBox:function(e){t.show=!1}}})],1)},c=[],l=(i(\"c5f6\"),i(\"ebd9\")),r={name:\"vehicleForm\",components:{model:l[\"a\"]},props:[\"vehicleInfo\"],data:function(){return{title:\"\",content:\"\",show:!1,showB:!1,vin:\"\",data:{},year:\"\",make:\"\",trim:\"\",engine:\"\",price:\"\",stock:\"\",condition:\"new\",odometer:\"\",model:\"\",color:\"Black\",date:\"\",plate:\"\",photo:\"\",deviceMac:\"\"}},watch:{vehicleInfo:{immediate:!0,handler:function(t){console.log(\"---watch-----\"),console.log(t),this.showB=!1,this.data=t,this.year=this.data.year,this.make=this.data.make,this.model=this.data.model,this.trim=this.data.trim,this.engine=this.data.engineType,this.price=this.data.price,this.color=this.data.color,this.date=this.data.inventoryDays,this.stock=this.data.stockNumber,this.condition=this.data.vehicleType,this.odometer=this.data.currentMileage/1609.344,this.plate=this.data.plate,this.photo=this.data.photoPath,this.vin=this.data.vin,this.deviceMac=this.data.mac},deep:!0}},methods:{savefile:function(t){var e=this,i=t.target.files,a=new FormData;a.append(\"image\",i[0]),o[\"a\"].post(\"/api/v1/user/updateAvatar\",a).then(function(t){200==t.data.code&&(e.photo=t.data.data.avatarUrl,e.title=\"Success\",e.content=\"Photo Uploaded Successfully\",e.show=!0,e.showB=!1)}).catch(function(t){console.error(t)})},saveData:function(){var t=this;o[\"a\"].post(\"/api/v1/vehicle/bind/device\",{vin:this.vin,year:this.year,make:this.make,deviceMac:this.deviceMac,model:this.model,trim:this.trim,engineType:this.engine,color:this.color,price:Number(this.price)?this.price:\"\",stockNumber:this.stock,inventoryDate:new Date(this.date).getTime(),vehicleType:this.confidence,currentMileage:this.odometer,plate:this.plate,photoPath:this.photo}).then(function(e){t.$emit(\"showStep3\",e.data.data)}).catch(function(t){console.log(\"server error\")})}}},d=r,p=(i(\"9f92\"),i(\"2877\")),u=Object(p[\"a\"])(d,n,c,!1,null,null,null),m=u.exports,v={name:\"bindVehicle\",inject:[\"reload\"],components:{VehicleForm:m},data:function(){return{step1:!0,step2:!1,step3:!1,deviceId:null,step1Button:!0,imeiIsVaild:!1,imeiSuccess:!1,imeiDisable:!1,step2Button:!0,title:\"\",data1:{},data2:null,showTip:!1,vin:\"\",vinDisable:!1,vinIsVaild:!1,vinSuccess:!1,isClickStep2:!1,vehicleId:\"\"}},watch:{deviceId:function(t){15==t.length?(this.deviceId=t,this.imeiDisable=!0,this.imeiIsVaild=!1,this.imeiSuccess=!0,this.step1Button=!1):this.imeiIsVaild=!0},vin:function(t){17==t.length?(this.vin=t,this.vinDisable=!0,this.vinIsVaild=!1,this.vinSuccess=!1,this.step2Button=!1,this.clickStep2()):this.vinIsVaild=!0}},mounted:function(){this.$route.query.deviceMac&&(this.step1=!1,this.step2=!0,this.deviceId=this.$route.query.deviceMac)},methods:{reloadPage:function(){window.location.reload()},unbind:function(){var t=this;o[\"a\"].post(\"/api/v1/vehicle/unbind/device\",{deviceMac:this.deviceId,vin:this.vin}).then(function(e){200==e.data.code?(t.vin=\"\",t.vinDisable=!1,t.vinIsVaild=!1,t.vinSuccess=!1,t.step2Button=!0,t.showTip=!1,t.step1=!1,t.step2=!0):window.location.reload()})},clickStep2:function(){var t=this;o[\"a\"].get(\"/api/v1/vehicle/detail/vin?vin=\"+this.vin,{}).then(function(e){t.data2=e.data.data,t.data2.mac=t.deviceId,\"\"==t.data2.deviceMac&&(t.isClickStep2=!0,t.vinSuccess=!1)})},showStep3:function(t){this.step1=!1,this.step2=!1,this.step3=!0,this.vehicleId=t.vehicleId},clickStep1:function(){var t=this;o[\"a\"].post(\"/api/v1/device/vehiceldetail/mac\",{deviceMac:this.deviceId}).then(function(e){t.data1=e.data.data,\"\"==t.data1.vin?(t.step1=!1,t.step2=!0):(t.vin=e.data.data.vin,t.title=\"This device is currently paired with \".concat(e.data.data.year,\" \").concat(e.data.data.make,\" \").concat(e.data.data.model,\" vin:\").concat(e.data.data.vin),t.showTip=!0)}).catch(function(e){console.log(e),t.vin=e.response.data.data.vin,t.data1=e.response.data.data,t.title=\"This device is currently paired with \".concat(t.data1.year,\" \").concat(t.data1.make,\" \").concat(t.data1.model,\" vin:\").concat(t.data1.vin),t.showTip=!0})}}},b=v,h=(i(\"b1fd\"),Object(p[\"a\"])(b,a,s,!1,null,null,null));e[\"default\"]=h.exports},\"49f2\":function(t,e,i){},\"7f00\":function(t,e,i){},\"842b\":function(t,e,i){},\"9f92\":function(t,e,i){\"use strict\";var a=i(\"7f00\"),s=i.n(a);s.a},b1fd:function(t,e,i){\"use strict\";var a=i(\"49f2\"),s=i.n(a);s.a},c5f6:function(t,e,i){t.exports=i(\"292f\")(394)},cdb6:function(t,e,i){\"use strict\";var a=i(\"842b\"),s=i.n(a);s.a},ebd9:function(t,e,i){\"use strict\";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"transition\",{attrs:{name:\"fade\"}},[t.show?i(\"div\",{attrs:{id:\"popup-edit\"}},[i(\"div\",{staticClass:\"modal-dialog modal-md popup-content\"},[i(\"div\",{staticClass:\"modal-content\",attrs:{role:\"document\",id:\"__BVID__42___BV_modal_content_\",\"aria-labelledby\":\"__BVID__42___BV_modal_header_\",\"aria-describedby\":\"__BVID__42___BV_modal_body_\"}},[i(\"header\",{staticClass:\"modal-header\",attrs:{id:\"__BVID__42___BV_modal_header_\"}},[i(\"h5\",{staticClass:\"modal-title\"},[t._v(t._s(t.title))]),i(\"button\",{staticClass:\"close\",attrs:{type:\"button\",\"aria-label\":\"Close\"},on:{click:function(e){return t.closePopup()}}},[t._v(\"×\")])]),i(\"div\",{staticClass:\"modal-body\",attrs:{id:\"__BVID__42___BV_modal_body_\"}},[i(\"div\",[t._v(t._s(t.content))])]),i(\"footer\",{staticClass:\"modal-footer\",attrs:{id:\"__BVID__42___BV_modal_footer_\"}},[t.buttonText&&t.buttonText.btnFirst?i(\"button\",{staticClass:\"btn btn-secondary\",attrs:{type:\"button\"},on:{click:function(e){return t.closePopup()}}},[t._v(t._s(t.buttonText?t.buttonText.btnFirst:\"\")+\"\\n                  \")]):t._e(),t.buttonText&&t.buttonText.btnSecond?i(\"button\",{staticClass:\"btn btn-primary\",attrs:{type:\"button\"},on:{click:function(e){return t.closePopup(t.type=\"ok\",t.buttonText.userId)}}},[t._v(t._s(t.buttonText.btnSecond)+\"\\n                  \")]):t._e()])])]),i(\"div\",{staticClass:\"bg\",on:{click:function(e){return t.closePopup()}}})]):t._e()])},s=[],o={name:\"modal\",props:[\"show\",\"title\",\"content\",\"buttonText\"],methods:{closePopup:function(t,e){this.$emit(\"closeRemindBox\",t,e)}}},n=o,c=(i(\"cdb6\"),i(\"2877\")),l=Object(c[\"a\"])(n,a,s,!1,null,\"76acff4f\",null);e[\"a\"]=l.exports}}]);","extractedComments":[]}