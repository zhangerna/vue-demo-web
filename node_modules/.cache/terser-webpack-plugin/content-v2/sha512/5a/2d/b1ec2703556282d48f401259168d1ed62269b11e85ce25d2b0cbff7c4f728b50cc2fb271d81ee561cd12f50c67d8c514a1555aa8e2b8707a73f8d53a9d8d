{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"rese-order\"],{\"1e22\":function(t,e,a){},\"40da\":function(t,e,a){\"use strict\";var n=a(\"1e22\"),i=a.n(n);i.a},8028:function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"animated fadeIn shop\"},[a(\"b-card\",[a(\"div\",{attrs:{slot:\"header\"},slot:\"header\"},[a(\"i\",{staticClass:\"nav-icon fa fa-list\"}),t._v(\"\\n            \"+t._s(t.$t(\"m.dashboard.appoint_order\"))+\"\\n\\n            \"),a(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.curStatus,expression:\"curStatus\"}],staticClass:\" form-control\",staticStyle:{display:\"inline-block\",width:\"150px\",\"margin-left\":\"20px\"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e=\"_value\"in t?t._value:t.value;return e});t.curStatus=e.target.multiple?a:a[0]},function(e){return t.searchData()}]}},[a(\"option\",{attrs:{value:\"all\",selected:\"\"}},[t._v(t._s(t.$t(\"m.cloud.all_status\")))]),t._l(t.statusList,function(e,n){return a(\"option\",{key:n,domProps:{value:e.orderCode}},[t._v(t._s(e.content))])})],2)]),a(\"div\",{staticClass:\"content\"},[a(\"b-table\",{staticClass:\"mb-0 table-outline table-responsive-sm\",attrs:{small:\"\",striped:\"\",responsive:\"sm\",items:t.table,hover:\"\",fields:t.tableFields},scopedSlots:t._u([{key:\"userInfo\",fn:function(e){return[a(\"p\",{staticStyle:{cursor:\"pointer\",\"margin-bottom\":\"4px\",color:\"#63c2de\"},on:{click:function(a){return t.$router.push(\"/test-drive/test-user/detail/\"+e.item.userId)}}},[t._v(t._s(e.item.username))]),a(\"p\",[t._v(t._s(e.item.phone))])]}},{key:\"vehicleInfo\",fn:function(e){return[a(\"p\",{staticStyle:{cursor:\"pointer\",\"font-weight\":\"bolder\",\"margin-bottom\":\"1px\",color:\"#63c2de\"},on:{click:function(a){return t.$router.push(\"/test-drive/test-vehicle/detail/\"+e.item.vehicleId)}}},[t._v(t._s(e.item.year?e.item.year:\"N/A\")+\" \"+t._s(e.item.make?e.item.make:\"N/A\")+\" \"+t._s(e.item.model?e.item.model:\"N/A\")+\" \"+t._s(e.item.alias?\"-\"+e.item.alias:\"\"))]),a(\"p\",{staticStyle:{\"margin-bottom\":\"1px\"}},[t._v(t._s(e.item.color?e.item.color:\"N/A\")+\", \"+t._s(e.item.trim?e.item.trim:\"N/A\"))]),a(\"p\",{staticStyle:{\"margin-bottom\":\"1px\"}},[t._v(t._s(e.item.stock?e.item.stock:\"N/A\")+\"\\n                        \"),e.item.plat?[a(\"span\",{staticClass:\"plat\"},[t._v(t._s(e.item.plat))])]:t._e()],2)]}},{key:\"status\",fn:function(e){return[10==e.item.status?[t._v(\"\\n                        \"+t._s(t.$t(\"m.cloud.wait_pick_up\"))+\"\\n                    \")]:t._e(),20==e.item.status?[t._v(\"\\n                        \"+t._s(t.$t(\"m.cloud.wait_return\"))+\"\\n                    \")]:t._e(),30==e.item.status?[a(\"p\",{staticStyle:{\"margin-bottom\":\"4px\"}},[t._v(t._s(t.$t(\"m.cloud.returned_vehicle\")))]),a(\"p\",{staticStyle:{color:\"#63c2de\",cursor:\"pointer\"},on:{click:function(a){return t.acceptVehicle(e.item.id)}}},[t._v(t._s(t.$t(\"m.cloud.vehicle_accept\")))])]:t._e(),40==e.item.status?[t._v(\"\\n                        \"+t._s(t.$t(\"m.cloud.complete\"))+\"\\n                    \")]:t._e(),50==e.item.status?[t._v(\"\\n                        \"+t._s(t.$t(\"m.cloud.canceled\"))+\"\\n                    \")]:t._e()]}},{key:\"question\",fn:function(e){return[e.item.question?[a(\"span\",{staticStyle:{color:\"#ffffff\",\"border-radius\":\"6px\",background:\"#4dbd74\",padding:\"4px\"}},[t._v(t._s(t.$t(\"m.cloud.complete\")))])]:[a(\"span\",{staticStyle:{background:\"#d1dbe1\",\"border-radius\":\"6px\",padding:\"4px\"}},[t._v(t._s(t.$t(\"m.cloud.no_complete\")))])]]}},{key:\"actions\",fn:function(e){return[a(\"div\",{staticClass:\"btn btn-sm btn-info\",staticStyle:{color:\"#ffffff\",\"margin-right\":\"4px\"},on:{click:function(a){return t.$router.push(\"/test-drive/reservation-order/detail/\"+e.item.id)}}},[a(\"i\",{staticClass:\"fa fa-eye\"})]),10==e.item.status?a(\"div\",{staticClass:\"btn btn-sm btn-info\",staticStyle:{color:\"#ffffff\"},on:{click:function(a){return t.openOrderTip(e.item.id,e.item.orderId)}}},[a(\"i\",{staticClass:\"fa fa-rotate-left\"})]):t._e()]}}])})],1)]),a(\"b-row\",[a(\"b-col\",{attrs:{sm:\"4\",lg:\"4\"}},[a(\"div\",{staticClass:\"dataTables_info\",attrs:{id:\"DataTables0\",role:\"status\",\"aria-live\":\"polite\"}},[t._v(\"\\n                \"+t._s(t.$t(\"m.common.show\"))+\" \"+t._s(10*(t.currentPage-1)+1)+\" \"+t._s(t.$t(\"m.common.to\"))+\" \"+t._s(t.currentPage===t.totalPages?t.total:10*t.currentPage)+\" \"+t._s(t.$t(\"m.common.of\"))+\" \"+t._s(t.total)+\" \"+t._s(t.$t(\"m.common.entries\"))+\"\\n            \")])]),a(\"b-col\",{attrs:{sm:\"8\",lg:\"8\"}},[a(\"b-pagination\",{attrs:{align:\"right\",\"total-rows\":t.total,\"per-page\":10},on:{input:function(e){return t.changePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:\"currentPage\"}})],1)],1),a(\"b-modal\",{ref:\"my-modal-6\",staticClass:\"select-store\",attrs:{\"ok-title\":t.$t(\"m.tip.b_ok\"),\"ok-only\":\"\"},on:{ok:function(e){return t.cancelOrder()}},model:{value:t.cancelTip,callback:function(e){t.cancelTip=e},expression:\"cancelTip\"}},[a(\"template\",{slot:\"modal-title\"},[t._v(\"\\n            \"+t._s(t.$t(\"m.cloud.can_order\"))+\"\\n        \")]),a(\"div\",{staticClass:\"text-left\"},[t._v(\"\\n            \"+t._s(t.$t(\"m.cloud.can_order_content\"))+\"\\n        \")])],2),a(\"b-modal\",{ref:\"my-modal-6\",staticClass:\"select-store\",attrs:{\"ok-title\":t.$t(\"m.tip.b_ok\"),\"ok-only\":\"\"},model:{value:t.tipStatus,callback:function(e){t.tipStatus=e},expression:\"tipStatus\"}},[a(\"template\",{slot:\"modal-title\"},[t._v(\"\\n            \"+t._s(t.canStatus.title)+\"\\n        \")]),a(\"div\",{staticClass:\"text-left\"},[t._v(\"\\n            \"+t._s(t.canStatus.content)+\"\\n        \")])],2)],1)},i=[],r=(a(\"28a5\"),a(\"3159\")),s=a(\"c466\"),c={name:\"shopManager\",inject:[\"reload\"],data:function(){return{tableFields:{orderId:{label:this.$t(\"m.cloud.order_id\"),class:\"text-center\"},userInfo:{label:this.$t(\"m.cloud.user_info\"),class:\"text-center\"},vehicleInfo:{label:this.$t(\"m.cloud.vehicle_info\"),class:\"text-center\"},testInfo:{label:this.$t(\"m.dashboard.test_point\"),class:\"text-center\"},pointTime:{label:this.$t(\"m.cloud.rese_test_drive\"),class:\"text-center\"},status:{label:this.$t(\"m.cloud.status\"),class:\"text-center\"},question:{label:this.$t(\"m.cloud.check_question\"),class:\"text-center\"},actions:{label:this.$t(\"m.vehicle.actions\"),class:\"Actions\"}},table:null,currentPage:1,pageSize:10,total:0,totalPages:0,showTip:!1,curName:\"\",statusList:[],cancelTip:!1,curOrder:null,curOrderNum:null,tipStatus:!1,canStatus:{title:\"\",content:\"\"},curStatus:\"all\"}},mounted:function(){var t=this;r[\"a\"].get(\"/api/v1/clouddrive/order/orderstatuslist\").then(function(e){200==e.data.code&&(t.statusList=e.data.data.statusList,t.statusList.map(function(e){switch(e.orderCode){case 10:e[\"content\"]=t.$t(\"m.cloud.wait_pick_up\");break;case 20:e[\"content\"]=t.$t(\"m.cloud.wait_return\");break;case 30:e[\"content\"]=t.$t(\"m.cloud.returned_vehicle\");break;case 40:e[\"content\"]=t.$t(\"m.cloud.complete\");break;case 50:e[\"content\"]=t.$t(\"m.cloud.canceled\");break}}))}),this.initData(this.currentPage)},methods:{searchData:function(){this.initData(this.currentPage)},initData:function(t){var e=this,a=this.curStatus&&\"all\"!=this.curStatus?\"&orderStatus=\".concat(this.curStatus):\"\";r[\"a\"].get(\"/api/v1/clouddrive/order/pagelist?pageNo=\".concat(t,\"&pageSize=\").concat(this.pageSize).concat(a)).then(function(t){200==t.data.code&&(e.total=t.data.data.rowCount,e.data=t.data.data,e.pageCount=t.data.data.totalPages,e.filterData())})},acceptVehicle:function(t){r[\"a\"].get(\"/api/v1/clouddrive/order/check?orderId=\"+t).then(function(t){200==t.data.code&&t.data.data.result?window.location.reload():alert(\"车辆异常\")})},filterData:function(){this.table=this.data.datas.map(function(t){return{orderId:t.orderServiceNum,id:t.orderId,username:t.userName,phone:t.phone,year:t.vehicleYear,make:t.vehicleMake,model:t.vehicleModel,color:t.vehicleColor,alias:t.vehicleAlias,trim:t.vehicleTrim,plat:t.vehiclePlate,vehicleId:t.vehicleId,userId:t.userId,num:t.vehiclePlate,testInfo:t.parkingName,pointTime:Object(s[\"b\"])(t.appointmentStartTime)+\"~\"+Object(s[\"b\"])(t.appointmentEndTime).split(\"  \")[1],status:t.orderStatus,question:t.questionnaireStatus}})},openOrderTip:function(t,e){this.curOrder=t,this.curOrderNum=e,this.cancelTip=!0},cancelOrder:function(){var t=this;r[\"a\"].post(\"/api/v1/clouddrive/order/cancel\",{orderId:this.curOrder}).then(function(e){200==e.data.code&&e.data.data.result?(t.canStatus={title:t.$t(\"m.cloud.can_order_suc\"),content:t.$t(\"m.cloud.can_order_suc_c\",{order:t.curOrderNum})},t.reload()):t.canStatus={title:t.$t(\"m.cloud.can_order_fail\"),content:t.$t(\"m.cloud.can_order_fail_c\")},t.tipStatus=!0})},prevPage:function(){this.initData(this.currentPage>1?this.currentPage-1:1)},nextPage:function(){this.initData(this.currentPage>=this.pageCount?this.currentPage:this.currentPage+1)},changePage:function(t){this.initData(t)}}},o=c,l=(a(\"40da\"),a(\"2877\")),u=Object(l[\"a\"])(o,n,i,!1,null,\"75edda78\",null);e[\"default\"]=u.exports},c466:function(t,e,a){\"use strict\";function n(t){var e=new Date(t),a=e.getFullYear()+\" \",n=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?\"0\"+e.getDate():e.getDate(),r=e.getHours()<10?\"0\"+e.getHours():e.getHours(),s=e.getMinutes()<10?\"0\"+e.getMinutes():e.getMinutes();return n+\"/\"+i+\"/\"+a+\" \"+r+\":\"+s+\" \"}function i(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?\"0\"+e.getDate():e.getDate();return a+\"-\"+n+\"-\"+i}function r(t,e){return Math.ceil((e-t)/1e3/3600/24)}function s(t){var e=new Date(t),a=new Array(\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Spt\",\"Oct\",\"Nov\",\"Dec\"),n=new Array(\"Sun\",\"Mon\",\"Tus\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"),i=e.getMonth(),r=e.getDay(),s=e.getDate();return n[r]+\" , \"+a[i]+\" \"+s+\" , \"+e.getFullYear()}function c(t){if(8===t.length){var e=t.slice(0,4),a=t.slice(4,6),n=t.slice(6,8);return e+\"/\"+a+\"/\"+n}if(17===t.length){var i=t.slice(0,4),r=t.slice(4,6),s=t.slice(6,8),c=t.slice(9,13),o=t.slice(13,15),l=t.slice(15,17);return i+\"/\"+r+\"/\"+s+\" - \"+c+\"/\"+o+\"/\"+l}}a.d(e,\"b\",function(){return n}),a.d(e,\"e\",function(){return i}),a.d(e,\"c\",function(){return r}),a.d(e,\"d\",function(){return s}),a.d(e,\"a\",function(){return c})}}]);","extractedComments":[]}